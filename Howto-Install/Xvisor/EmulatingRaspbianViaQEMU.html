<h3>Emulating raspbian with QEMU</h3>

<P> It seems to me, Raspbian Pi and Pi2 can always be simulated in X86_64 via the 
<b>qemu-system-arm</b> command in the <b>wheezy</b> environment.  Just follow the 
fifth item, you may confirm it.  After <b>wheezy</b>, the evil <b>systemd</b> is 
the obstacle to overcome. Apparently, Rpi2 is partially supported according to 
<a href="https://qemu.weilnetz.de/qemu-doc.html#ARM-System-emulator" target="_b">this 
document</a>.

<OL>
  <LI><a href="#EmulateRpi2Qemu">Emulate Rapberry Pi 2 in QEMU</a>
  <LI><a href="#EmulatingRaspbianWithQEMU">Emulating raspbian with QEMU</a>
  <LI><a href="#build-kernel-qemu">Build Kernel Qemu</a>
  <LI><a href="#BuildRpiLinuxQemu">Build Raspberry Pi Linux Kernel For QEMU</a>
  <LI><a href="#EnablingKVMvirtualizationForRPi2">Enabling KVM 
      Virtualization for RPi2</a>
  <LI><a href="#FifthItem">QEMU - Emulating Raspberry Pi the easy way</a>
  <LI><a href="#BuildQemuArmImage">Build Your ARM Image for QEMU</a>
  <LI><a href="#dhruvvyas90-qemu-rpi-kernel">qemu-rpi-kernel</a>. Seems not working
  <LI><a href="#KVMOnRaspberryPi2">KVM on the Raspberry Pi2</a>
  <LI><a href="http://blog.kragniz.eu/raspbian-on-travis-ci/">Raspbian on Travis CI</a>
  <LI><a href="http://lostindetails.com/blog/post/Compiling-a-kernel-module-for-the-raspberry-pi-2">Compiling kernel module for Rpi2</a>
  <LI><a href="http://rpi2.fatdog.eu/" target="_b">Slackware Rpi2</a>&nbsp;&nbsp;
      <a href="http://docs.slackware.com/howtos:hardware:arm:start" 
      target="_b">Slackware ARM</a>
  <LI><a href="#DebianRpi">Debian RaspberryPi2</a>
  <LI><a href="#DevuanAndSlackWareArm">Devuan And SlackWare Arm</a>
  <LI><a href="#qemu-rpi-kernel">Qemu Rpi Kernel</a>
  <LI><a href="#MakeRootFs">Make Root File System</a>&nbsp;&nbsp;
      <a href="#MakeRootFsViaBuildroot">Make Root File System Via Buildroot</a>
  <LI><a href=""></a>
  <LI><a href=""></a>
</OL>

<a name="EmulateRpi2Qemu"></a> <h3 class="entry-title">Emulate Rapberry Pi 2 in QEMU 
<a href="http://blog.3mdeb.com/2015/12/30/emulate-rapberry-pi-2-in-qemu/">(Source 
Origin)</a></h3>
    
    
      <p class="meta">

<time datetime="2015-12-30T23:02:30+01:00" pubdate="" data-updated="true">Dec 30<span>th</span>, 2015</time>
        
         | <a href="http://blog.3mdeb.com/2015/12/30/emulate-rapberry-pi-2-in-qemu/#disqus_thread">13 Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In the process of planning system testing for one of 
my clients I found that someone from Microsoft published patches with <a target="_b" 
href="https://lists.gnu.org/archive/html/qemu-arm/2015-12/msg00078.html">BCM2846 
support</a> to QEMU mailing list. I thought it is very interesting, because if it is 
possible to setup emulated Raspberry Pi many use cases can be tested faster and in more
automatic way. For example checking how application behave when running on more then 
one device at once, testing massive deployment process, stress testing and finally speed 
up debug-fix-test process.</p>

<p>So it looks like making RPi 2 working in emulated environment can add a lot of value 
to some products. In email Andrew mention <a href="https://github.com/0xabu/qemu">github 
repo</a>, which I would like to try in this post</p>

<h4>Get QEMU and compile</h4>

<P> No need to compile QEMU at all, although the compilation can be done by following 
the outlined steps. Just use the <b>qemu-system-arm</b> command, we can boot 
2015-11-21-raspbian-jessie.img, but not 2016-05-10-raspbian-jessie.img. Don't know why, 
yet.

<hr>
<pre>
;; cd /src4/KVM/raspbian-img
1  git clone https://github.com/0xabu/qemu.git -b raspi
;; cd qemu; mkdir objects; cd objects; emacs myconf; chmod 755 myconf
;; cat myconf 
#! /bin/bash 

../configure --prefix=/src4/KVM/raspbian-img/qemu
2  sudo apt-get install libfdt-dev 
;; Not working:  git submodule update --init dtc
3  myconf 
4  make -j$(nproc) ;; make -j3
5  sudo make install</span>
</pre>
<hr>

<P> I have spent almost half a year on porting u-boot, xvisor, and linux 4.4.9 to Rpi2 
without any luck, (all of them are done on the newest versions).  Porting these software 
packages on a VM, (created for cross-compilation purpose), and copy these binary 
packages to SD card via SD card-reader is no fun at all. So, I decided to simulate a 
raspberry pi2 on x86_64. I kept on working on linux 4.4.9 without any fruitful result. 
Finally, I decided to replace linux 4.4 by linux 4.1.  Now, I got something positive 
to continue with.  What's going on? I need to figure out!

<h4>Prepare to boot</h4>

<p>QEMU requires kernel and device tree file to be given as parameters, because of
that we have to extract those pieces from existing Raspbian image.</p>

<h4>Get kernel and device tree</h4>

<OL>
  <LI><a href="http://downloads.raspberrypi.org/raspbian/images/raspbian-2016-05-13/2016-05-10-raspbian-jessie.zip">2016-05-10-raspbian-jessie.zip</a>&nbsp;&nbsp;
    <a href="http://downloads.raspberrypi.org/raspbian/images/raspbian-2016-05-31/2016-05-27-raspbian-jessie.zip">2016-05-27-raspbian-jessie.zip</a>
</OL>

<figure class="code">
<pre>
;; cd /src4/KVM 
;; mkdir raspbian-img; cd raspbian-img 
1  wget http://downloads.raspberrypi.org/raspbian/images/raspbian-2016-05-13/2016-05-10-raspbian-jessie.zip
2  unzip 2016-05-10-raspbian-jessie.zip
3  [23:35:23] pietrushnic:rpi2_qemu $ sudo /sbin/fdisk -lu 2016-05-10-raspbian-jessie.img 
4  Disk 2016-05-10-raspbian-jessie.img: 3.7 GiB, 3934257152 bytes, 7684096 sectors
5  Units: sectors of 1 * 512 = 512 bytes
6  Sector size (logical/physical): 512 bytes / 512 bytes
7  I/O size (minimum/optimal): 512 bytes / 512 bytes
8  Disklabel type: dos
9  Disk identifier: 0xea0e7380
10  
11  Device                          Boot  Start     End Sectors  Size Id Type
12  2016-05-10-raspbian-jessie.img1        8192  137215  122880   60M  c W95 FAT32 (LBA)
13  2016-05-10-raspbian-jessie.img2      137216 7843839 7706624  3.7G 83 Linux
</pre></figure>


<p>Check start of <code>W95 FAT32 (LBA)</code> partition. It is <code>8192</code>. Sector size is <code>512</code>.
So calculate offset in bytes <code>8192 * 512 = 4194304</code>.</p>

<figure class="code">
<pre>
2  sudo mount -o loop,offset=4194304 2016-05-10-raspbian-jessie.img /mnt/tmp
3  mkdir raspbian-boot
4  cp /mnt/tmp/kernel7.img raspbian-boot
5  cp /mnt/tmp/bcm2709-rpi-2-b.dtb raspbian-boot
6  sudo umount /mnt/tmp 
</pre>
</figure>


<p>Then if you try to boot <code>2016-05-10</code> Rapbian with <code>0xabu</code> 
code:</p>

<figure class="code">
<pre>
1  qemu-system-arm -M raspi2 -kernel raspbian-boot/kernel7.img \
2  -sd 2016-05-10-raspbian-jessie.img \
3  -append "rw earlyprintk loglevel=8 console=ttyAMA0,115200 dwc_otg.lpm_enable=0 root=/dev/mmcblk0p2" \
4  -dtb raspbian-boot/bcm2709-rpi-2-b.dtb -serial stdio
<pre>
</figure>


<p>You will experience kernel crash:</p>

<figure class="code">
<pre>
1  (...)
2  [    6.021989] Freeing unused kernel memory: 420K (80779000 - 807e2000)
3  [    7.366232] random: systemd urandom read with 7 bits of entropy available
4  [    7.383057] Kernel panic - not syncing: Attempted to kill init! exitcode=0x00000004
5  [    7.383057] 
6  [    7.384366] CPU: 0 PID: 1 Comm: systemd Not tainted 4.1.13-v7+ #826
7  [    7.384874] Hardware name: BCM2709
8  [    7.386615] [&lt;80018444>] (unwind_backtrace) from [&lt;80013e08>] (show_stack+0x20/0x24)
9  [    7.387307] [&lt;80013e08>] (show_stack) from [&lt;8055a188>] (dump_stack+0x98/0xe0)
10  [    7.387851] [&lt;8055a188>] (dump_stack) from [&lt;80556340>] (panic+0xa4/0x204)
11  [    7.388515] [&lt;80556340>] (panic) from [&lt;800293c8>] (do_exit+0xa0c/0xa64)
12  [    7.389074] [&lt;800293c8>] (do_exit) from [&lt;800294b8>] (do_group_exit+0x4c/0xcc)
13  [    7.389729] [&lt;800294b8>] (do_group_exit) from [&lt;80033f1c>] (get_signal+0x2b0/0x6e0)
14  [    7.390388] [&lt;80033f1c>] (get_signal) from [&lt;80013190>] (do_signal+0x98/0x3ac)
15  [    7.391021] [&lt;80013190>] (do_signal) from [&lt;8001368c>] (do_work_pending+0xb8/0xc8)
16  [    7.391665] [&lt;8001368c>] (do_work_pending) from [&lt;8000f9e4>] (work_pending+0xc/0x20)
17  [    7.393209] ---[ end Kernel panic - not syncing: Attempted to kill init! exitcode=0x00000004
18  [    7.393209] 
</pre>
</figure>

<p>To avoid this crash you have to comment <code>/etc/ld.so.preload</code>.</p>

<h4>Changing ld.so.preload</h4>

<p>First calculate offset in bytes to Raspbian root filesystem partition. According to 
fdisk output above partition starts with sector <code>137216</code>, so 
offset would be <code>512*137216=70254592</code>.</p>

<figure class="code">
<pre>
1  sudo mount -o loop,offset=70254592 2016-05-10-raspbian-jessie.img /mnt/tmp
</pre>
</figure>


<p>Use your favourite editor to change <code>/mnt/tmp/etc/ld.so.preload</code>. Note 
that you have to edit as superuser. Content of file should looks like this:</p>

<figure class="code">
<pre>
sudo emacs /mnt/tmp/etc/ld.so.preload
$ sudo mv /mnt/tmp/etc/ld.so.preload~ /mnt/tmp/etc/ld.so.preload.orig
$ diff /mnt/tmp/etc/ld.so.preload /mnt/tmp/etc/ld.so.preload.orig
1c1
< # /usr/lib/arm-linux-gnueabihf/libarmmem.so
---
> /usr/lib/arm-linux-gnueabihf/libarmmem.so
$ sync
$ sudo umount /mnt/tmp 
</pre>
</figure>


<h4>Final booting</h4>

<figure class="code">
<pre>
;; qemu-system-arm -M help
Supported machines are:
  .
  .
raspi2
  .
  .
1  qemu-system-arm -M raspi2 -kernel raspbian-boot/kernel7.img \
2  -sd 2016-05-10-raspbian-jessie.img \
3  -append "rw earlyprintk loglevel=8 console=ttyAMA0,115200 dwc_otg.lpm_enable=0 root=/dev/mmcblk0p2" \
4  -dtb raspbian-boot/bcm2709-rpi-2-b.dtb -serial stdio
5  emacs Rpi2-boot.sh&
6  chmod 755 Rpi2-boot.sh
7  cat Rpi2-boot.sh
#! /bin/bash 

qemu-system-arm -M raspi2 -kernel raspbian-boot/kernel7.img \
     -sd 2016-05-10-raspbian-jessie.img \
     -append "rw earlyprintk loglevel=8 console=ttyAMA0,115200 dwc_otg.lpm_enable=0 root=/dev/mmcblk0p2" \
     -dtb raspbian-boot/bcm2709-rpi-2-b.dtb -serial stdio
8  Rpi2-boot.sh
      .
      .
      .
[  153.876127] INFO: rcu_sched detected stalls on CPUs/tasks:
[  153.877041] 	1-O..: (11 GPs behind) idle=001/140000000000000/0 softirq=0/0 fqs=0 
[  153.878031] 	2-O..: (11 GPs behind) idle=001/140000000000000/0 softirq=0/0 fqs=0 
[  153.878979] 	3-O..: (11 GPs behind) idle=001/140000000000000/0 softirq=0/0 fqs=0 
[  153.879900] 	(detected by 0, t=14712 jiffies, g=-289, c=-290, q=1)
[  153.880757] Task dump for CPU 1:
[  153.881204] swapper/1       R running      0     0      1 0x00000000
[  153.882122] Task dump for CPU 2:
[  153.882538] swapper/2       R running      0     0      1 0x00000000
[  153.883371] Task dump for CPU 3:
[  153.883803] swapper/3       R running      0     0      1 0x00000000
[  153.884738] rcu_sched kthread starved for 14712 jiffies! g4294967007 c4294967006 f0x2 s3 ->state=0x0
      .
      .
      .

9 ctrl-c to terminate infinite loop
</pre>
</figure>


<h4>Summary</h4>

<p>There are many problem with existing setup, but from my experience this is best
approach and code that I saw during last years. Also it looks like this code is
backed by huge corporation so it looks like they see value in providing this
code to wide community. Rapid delivery of those patches probably would not be
possible without previous work to which Andrew point in his email. It would be
great to see community engagement in this effort.</p>

<h3><a href="./Rpi2ViaKvm.html" target="_b">Compiling Our Own Linux 
    Kernel</a></h3>

<P> I lost this file.  But, I think I can reproduce it without doubt.  More importantly, 
we need to build rpi-kernel-qemu (, Rpi Kernel emulated via qemu-system-arm).  After 
successfully building the Rpi2 kernel, modify the configuration as follows:



<h3><a href="https://github.com/dhruvvyas90/qemu-rpi-kernel/wiki/Emulating-Jessie-image-with-4.x.xx-kernel" 
    target="_b">Emulating ARM Jessie image</a></h3>

<h3>Linux Source</h3>

<OL>
  <LI><a href="http://lostindetails.com/blog/post/Compiling-a-kernel-module-for-the-raspberry-pi-2" 
      target="_b">Compiling Linux Kernel Module Rpi2</a>
  <LI><a href="https://github.com/raspberrypi/linux" 
      target="_b">Linux Source from Raspberry Pi Foundation</a>
  <LI><a href="https://github.com/raspberrypi/firmware" 
      target="_b">firmware</a>
</OL>
</div>

<a name="EmulatingRaspbianWithQEMU"></a><h3>Emulating raspbian with QEMU 
<a href="https://www.raspberrypi.org/forums/viewtopic.php?t=112259" 
target="_b">(Source Origin)</a></h3>
		

<div class="author">by <strong><a href="https://www.raspberrypi.org/forums/memberlist.php?mode=viewprofile&amp;u=90986">dhruvvyas90</a></strong> >> Wed Jun 03, 2015 5:02 am </div>

			

<P>Hello, I'm trying to emulate raspbian on QEMU and there're plenty of guides available 
on internet. However, every guide points to download qemu-linux kernel from link 
<a href="https://xecdesign.com/downloads/linux-qemu/kernel-qemu">kernel-qemu</a> 
however, this link is dead and I was unable to find an alternative link. Is there any 
alternative link to the kernel or guide how to compile kernel from source ?<br>
<br>Thanks.</div>

			

<P> <strong>Posts:</strong> 23 by <strong><a href="https://www.raspberrypi.org/forums/memberlist.php?mode=viewprofile&amp;u=356" style="color: #00AA00;" class="username-coloured">ShiftPlusOne</a></strong> >> Wed Jun 03, 2015 2:26 pm </div>

			

<P> I plan to bring the site back up over the weekend.</div>

			
<P>Raspberry Pi Engineer &amp; Forum Moderator
			
<P> <strong>Posts:</strong> 3796 by <strong><a href="https://www.raspberrypi.org/forums/memberlist.php?mode=viewprofile&amp;u=90986">dhruvvyas90</a></strong> >> Sun Jun 07, 2015 5:50 am </div>

<P> Thanks a lot. I really appreciate it. However, out of curiosity, if someone were to 
compile his own kernel for rpi for qemu, is there any technical difference? In other 
words, can I just take a working pi and use its kernel zImage to emulate rpi in qemu? 
It might sound silly but I'm just kicking off with rpi and linux in general.<br>
<br>Thanks in advance. 
			

<P> <strong>Posts:</strong> 23 by <strong><a href="https://www.raspberrypi.org/forums/memberlist.php?mode=viewprofile&amp;u=356" style="color: #00AA00;" class="username-coloured">ShiftPlusOne</a></strong> >> Sun Jun 07, 2015 6:39 am </div>

			

<P> Sorry, didn't get around to it.<br>
<br> One of the tutorials I had was how to compile such a kernel, it should be cached 
somewhere. You can't just take the normal pi kernel, because it doesn't support the 
hardware emulated by qemu.<br>
<br>If you look around, you should be able to find plenty of kernels which will work 
under qemu. For example, google spits this page out 
<a href="https://people.debian.org/%7Eaurel32/qemu/armhf/">qemu/armhf/</a>, but I 
haven't tried it.

<P>Raspberry Pi Engineer &amp; Forum Moderator

<P> <strong>Posts:</strong> 3796 by <strong><a href="https://www.raspberrypi.org/forums/memberlist.php?mode=viewprofile&amp;u=90986">dhruvvyas90</a></strong> >> Mon Jun 08, 2015 4:28 am </div>

			

<P> I found cached webpages. Hope it would be useful to someone following the same 
track as mine.

<OL>
  <LI><a href="https://web.archive.org/web/20131210001638/http://xecdesign.com/compiling-a-kernel/">compiling-a-kernel/</a>
  <LI><a href="https://web.archive.org/web/20131209235952/http://xecdesign.com/compiling-qemu/">compiling-qemu/</a>
  <LI><a href="https://web.archive.org/web/20131210001407/http://xecdesign.com/working-with-qemu/">working-with-qemu/</a>
  <LI><a href="https://web.archive.org/web/20131210001526/http://xecdesign.com/qemu-emulating-raspberry-pi-the-easy-way/">emulating-pi-the-easy-way/</a>
</OL>
			
<P> <strong>Posts:</strong> 23 by <strong><a href="https://www.raspberrypi.org/forums/memberlist.php?mode=viewprofile&amp;u=90986">dhruvvyas90</a></strong> >> Mon Jun 08, 2015 7:14 am 


<P> Meanwhile, I have made it available on the next link.  Hope it helps someone who 
stumbles across this thread. (Thanks to the Sandor Megyari for his answer on 
<a href="#EmulatingRaspbianWithQEMU">emulating-raspbian-with-qemu</a>)
			
<P> <a href="https://github.com/dhruvvyas90/qemu-rpi-kernel" 
target="_b">qemu-rpi-kernel</a>&nbsp;&nbsp;
<a href="https://github.com/dhruvvyas90/qemu-rpi-kernel/blob/master/kernel-qemu-4.4.11-jessie" target="_b">kernel-qemu-4.4.11-jessie</a>

<P> <strong>Posts:</strong> 23 by <strong><a href="https://www.raspberrypi.org/forums/memberlist.php?mode=viewprofile&amp;u=148112">jjletho67</a></strong> >> Tue Jun 16, 2015 5:45 pm </div>

<P> Thank you very much!!!<br>I was going crazy in finding the right kernel image. Your 
image is working  fine!<br>I followed this guide:<br> <a href="http://www.linux-mitterteich.de/fileadmin/datafile/papers/2013/qemu_raspiemu_lug_18_sep_2013.pdf">http://www.linux-mitterteich.de/fileadm ... p_2013.pdf</a> <br>(but there are a lot of usefull guides on this theme)<br><br>I think it would be very usefull to have a sticky thread with an "official" guide to running raspbian inside qemu.

<P> <strong>Posts:</strong> 1 by <strong><a href="https://www.raspberrypi.org/forums/memberlist.php?mode=viewprofile&amp;u=162211">polaco1782</a></strong> >> Wed Oct 21, 2015 12:00 pm </div>

<P> I have built a custom qemu kernel for raspbian Jessie. You can get a sources and a 
precompiled version on my github page:<br><
br><a href="https://github.com/polaco1782/raspberry-qemu">raspberry-qemu</a><br>
<br>Thanks

<P> <strong>Posts:</strong> 3 by <strong><a href="https://www.raspberrypi.org/forums/memberlist.php?mode=viewprofile&amp;u=73731">DougieLawson</a></strong> >> Wed Oct 21, 2015 6:30 pm </div>

			

<P> <blockquote><div><cite>polaco1782 wrote:</cite> I have built a custom qemu kernel for raspbian Jessie. You can get a sources and a precompiled version on my github page:<br><br><a href="https://github.com/polaco1782/raspberry-qemu">https://github.com/polaco1782/raspberry-qemu</a><br><br>Thanks</div></blockquote><br>Is there any way to get Qemu running with more than 256MB of RAM or multiple cores?</div>

			<div id="sig832124" class="signature"><span style="font-size: 85%; line-height: 116%;">Microprocessor, Raspberry Pi &amp; Arduino Hacker<br>Mainframe database troubleshooter<br>MQTT Evangelist<br>RPi owner since '12.<br>Twitter: @DougieLawson</span><br>2B, B+, A+, 5Bs, zero, 3B<br><br>Please post ALL technical questions <span style="font-weight: bold">on the forum</span>.<span style="text-decoration: underline">Do not</span> send private messages.

<P> <strong>Posts:</strong> 22024</dd>
			<dd>
			</dd>
		

		</dl>
	

	
	</div>


	<div id="p832237" class="post row-fluid odd">
	
		<div class="postbody span9">
			

			<div class="author">by <strong><a href="https://www.raspberrypi.org/forums/memberlist.php?mode=viewprofile&amp;u=162211">polaco1782</a></strong> >> Wed Oct 21, 2015 10:25 pm </div>

			

<P> <blockquote><div><cite>DougieLawson wrote:</cite> <blockquote><div><cite>polaco1782 wrote:</cite> I have built a custom qemu kernel for raspbian Jessie. You can get a sources and a precompiled version on my github page:<br><br><a href="https://github.com/polaco1782/raspberry-qemu">https://github.com/polaco1782/raspberry-qemu</a><br><br>Thanks</div></blockquote><br>Is there any way to get Qemu running with more than 256MB of RAM or multiple cores?</div></blockquote><br><br>Not
 really sure about, but its hardcoded 256 on versatilepb kernel source 
file. Also not sure if just increasing it would work, because of memory 
mappings.<br><br>Thanks

<P> <strong>Posts:</strong> 3 by <strong><a href="https://www.raspberrypi.org/forums/memberlist.php?mode=viewprofile&amp;u=90986">dhruvvyas90</a></strong> >> Tue Nov 17, 2015 11:43 am </div>

			

<P> <blockquote><div><cite>DougieLawson wrote:</cite> <blockquote><div><cite>polaco1782 wrote:</cite> I have built a custom qemu kernel for raspbian Jessie. You can get a sources and a precompiled version on my github page:<br><br><a href="https://github.com/polaco1782/raspberry-qemu">https://github.com/polaco1782/raspberry-qemu</a><br><br>Thanks</div></blockquote><br>Is there any way to get Qemu running with more than 256MB of RAM or multiple cores?</div></blockquote><br><br>I
 heard that torlus' qemu allows you to emulate original rpi kernel 
(without versatilepb patch and separate compilation) and without RAM 
limited to 256 MB. I've not tested it myself but it sounds promising. 
Here is the link :  <a href="https://github.com/Torlus/qemu/tree/rpi">https://github.com/Torlus/qemu/tree/rpi</a> 

<P> <strong>Posts:</strong> 23 by <strong><a href="https://www.raspberrypi.org/forums/memberlist.php?mode=viewprofile&amp;u=90986">dhruvvyas90</a></strong> >> Tue Nov 17, 2015 11:47 am </div>

			

<P> <blockquote><div><cite>polaco1782 wrote:</cite> I have built a custom qemu kernel for raspbian Jessie. You can get a sources and a precompiled version on my github page:<br><br><a href="https://github.com/polaco1782/raspberry-qemu">https://github.com/polaco1782/raspberry-qemu</a><br><br>Thanks</div></blockquote><br><br>@polaco1782: I tried to emulate but it enters into emergency mode giving me `root@raspberrypi` prompt every time I try to boot. <br><br>I've
 made changes as you suggested on your readme file, ie, commented lines 
in `/etc/ld.so.preload`, changed `mmcblk0p` to `sda` in /etc/fstab`. Can
 you describe step by step what you did to make it work right ? It could
 be useful to other users as well.<br><br>Thanks.<br><br>Attached is the snapshot : (link:  <a href="http://i.imgur.com/va8l51Z.png">http://i.imgur.com/va8l51Z.png</a>)<br><br><img src="http://i.imgur.com/va8l51Z.png" alt="Image"><br><br>Update : <br><br>I was able to make it work by, commenting all the mmcblk entries in `/etc/fstab`. I was doing it wrong. <br><br>It works perfectly fine. <br><br>In order to make fresh jessie image to work, this needs to be done.<br><br>1. Mount .img file.<br>2. Comment any lines present in `/etc/ld.so.preload`. Save file.<br>3. Comment mmcblk entries from `/etc/fstab`. Save file.<br>4. Unmount.<br>5.
 Use that image to emulate qemu by `qemu-system-arm -kernel kernel-name 
-cpu arm1176 -m 256 -M versatilepb -serial stdio -append "root=/dev/sda2
 rootfstype=ext4" -hda image-file-name.img`

<P> <strong>Posts:</strong> 23 by <strong><a href="https://www.raspberrypi.org/forums/memberlist.php?mode=viewprofile&amp;u=166187">vortexvortex</a></strong> >> Sun Nov 22, 2015 8:11 pm </div>

			

<P> @dhruvvyas90<br><br>Hi. Watching this thread, 
I've been getting the same result as yourself. su - pi and startx seems 
to work relatively well from that point, but I still don't seem to get a
 clean boot ...<br><br>Mounting the image and checking issues:<br><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>mount -t auto -o loop,offset=$((122880*512)) 2015-09-24-raspbian-jessie.img /mnt/rpi<br><br>cat /mnt/rpi/etc/ld.so.preload <br>#/usr/lib/arm-linux-gnueabihf/libarmmem.so<br><br># cat /mnt/rpi/etc/fstab <br>proc&nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /proc&nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp;proc&nbsp; &nbsp; defaults&nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;0<br>#/dev/mmcblk0p1&nbsp; 
/boot&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;vfat&nbsp; &nbsp; 
defaults&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;2<br>#/dev/mmcblk0p2&nbsp;
 /&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ext4&nbsp; 
&nbsp; defaults,noatime&nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;1<br>/dev/sda1&nbsp;
 /boot&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;vfat&nbsp; &nbsp; 
defaults&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;2<br>/dev/sda2&nbsp;
 /&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ext4&nbsp; 
&nbsp; defaults,noatime&nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;1<br><br></code></dd></dl><br><br>I
 also got warnings from my distro version of qemu (Fedora 22) stating I 
should explicitly configure raw format for the img file mount. I've 
tried qemu invocation as you have suggested, as well as <br><br><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>qemu-system-arm
 -kernel kernel-qemu-4.1.7-jessie -cpu arm1176 -m 256 -M versatilepb 
-serial stdio -append "root=/dev/sda2 panic=1 rootfstype=ext4 rw" -drive
 format=raw,file=2015-09-24-raspbian-jessie.img<br></code></dd></dl><br><br>I've also tried both your github kernel image as well as @polaco1782's, with the same result.<br><br>Any pointers/tips appreciated.

<P> <strong>Posts:</strong> 2 by <strong><a href="https://www.raspberrypi.org/forums/memberlist.php?mode=viewprofile&amp;u=90986">dhruvvyas90</a></strong> >> Mon Nov 23, 2015 6:22 am </div>

			

<P> <blockquote><div><cite>vortexvortex wrote:</cite> @dhruvvyas90<br><br>Hi.
 Watching this thread, I've been getting the same result as yourself. su
 - pi and startx seems to work relatively well from that point, but I 
still don't seem to get a clean boot ...<br><br>Mounting the image and checking issues:<br><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>mount -t auto -o loop,offset=$((122880*512)) 2015-09-24-raspbian-jessie.img /mnt/rpi<br><br>cat /mnt/rpi/etc/ld.so.preload <br>#/usr/lib/arm-linux-gnueabihf/libarmmem.so<br><br># cat /mnt/rpi/etc/fstab <br>proc&nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /proc&nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp;proc&nbsp; &nbsp; defaults&nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;0<br>#/dev/mmcblk0p1&nbsp; 
/boot&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;vfat&nbsp; &nbsp; 
defaults&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;2<br>#/dev/mmcblk0p2&nbsp;
 /&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ext4&nbsp; 
&nbsp; defaults,noatime&nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;1<br>/dev/sda1&nbsp;
 /boot&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;vfat&nbsp; &nbsp; 
defaults&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;2<br>/dev/sda2&nbsp;
 /&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ext4&nbsp; 
&nbsp; defaults,noatime&nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;1<br><br></code></dd></dl><br><br>I
 also got warnings from my distro version of qemu (Fedora 22) stating I 
should explicitly configure raw format for the img file mount. I've 
tried qemu invocation as you have suggested, as well as <br><br><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>qemu-system-arm
 -kernel kernel-qemu-4.1.7-jessie -cpu arm1176 -m 256 -M versatilepb 
-serial stdio -append "root=/dev/sda2 panic=1 rootfstype=ext4 rw" -drive
 format=raw,file=2015-09-24-raspbian-jessie.img<br></code></dd></dl><br><br>I've also tried both your github kernel image as well as @polaco1782's, with the same result.<br><br>Any pointers/tips appreciated.</div></blockquote><br><br>@vortexvortex<br><br>DO
 NOT ADD `/dev/sda` entries in fstab. Just comment `mmcblk` entries and 
you're good to go. Ie, your fstab should look like this,<br><br><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>proc&nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /proc&nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp;proc&nbsp; &nbsp; defaults&nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;0<br>#/dev/mmcblk0p1&nbsp; 
/boot&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;vfat&nbsp; &nbsp; 
defaults&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;2<br>#/dev/mmcblk0p2&nbsp;
 /&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ext4&nbsp; 
&nbsp; defaults,noatime&nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;1</code></dd></dl><br><br>It
 should boot right into desktop without any hassles. Also, ignore that 
raw image warnings. At first I also thought, that it has something to do
 with not booting it properly.<br><br>You should be able to emulate it with, <br><br><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>qemu-system-arm
 -kernel kernel-qemu-4.1.7-jessie -cpu arm1176 -m 256 -M versatilepb 
-serial stdio -append "root=/dev/sda2 panic=1 rootfstype=ext4 rw" -hda 
2015-09-24-raspbian-jessie.img</code></dd></dl><br><br>Hope it helps.

<P> <strong>Posts:</strong> 23 by <strong><a href="https://www.raspberrypi.org/forums/memberlist.php?mode=viewprofile&amp;u=166187">vortexvortex</a></strong> >> Mon Nov 23, 2015 1:47 pm </div>

			

<P> <blockquote><div><cite>dhruvvyas90 wrote:</cite> <blockquote><div><cite>vortexvortex wrote:</cite> @dhruvvyas90<br><br>Hi.
 Watching this thread, I've been getting the same result as yourself. su
 - pi and startx seems to work relatively well from that point, but I 
still don't seem to get a clean boot ...<br><br>Mounting the image and checking issues:<br><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>mount -t auto -o loop,offset=$((122880*512)) 2015-09-24-raspbian-jessie.img /mnt/rpi<br><br>cat /mnt/rpi/etc/ld.so.preload <br>#/usr/lib/arm-linux-gnueabihf/libarmmem.so<br><br># cat /mnt/rpi/etc/fstab <br>proc&nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /proc&nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp;proc&nbsp; &nbsp; defaults&nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;0<br>#/dev/mmcblk0p1&nbsp; 
/boot&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;vfat&nbsp; &nbsp; 
defaults&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;2<br>#/dev/mmcblk0p2&nbsp;
 /&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ext4&nbsp; 
&nbsp; defaults,noatime&nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;1<br>/dev/sda1&nbsp;
 /boot&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;vfat&nbsp; &nbsp; 
defaults&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;2<br>/dev/sda2&nbsp;
 /&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ext4&nbsp; 
&nbsp; defaults,noatime&nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;1<br><br></code></dd></dl><br><br>I
 also got warnings from my distro version of qemu (Fedora 22) stating I 
should explicitly configure raw format for the img file mount. I've 
tried qemu invocation as you have suggested, as well as <br><br><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>qemu-system-arm
 -kernel kernel-qemu-4.1.7-jessie -cpu arm1176 -m 256 -M versatilepb 
-serial stdio -append "root=/dev/sda2 panic=1 rootfstype=ext4 rw" -drive
 format=raw,file=2015-09-24-raspbian-jessie.img<br></code></dd></dl><br><br>I've also tried both your github kernel image as well as @polaco1782's, with the same result.<br><br>Any pointers/tips appreciated.</div></blockquote><br><br>@vortexvortex<br><br>DO
 NOT ADD `/dev/sda` entries in fstab. Just comment `mmcblk` entries and 
you're good to go. Ie, your fstab should look like this,<br><br><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>proc&nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /proc&nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp;proc&nbsp; &nbsp; defaults&nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;0<br>#/dev/mmcblk0p1&nbsp; 
/boot&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;vfat&nbsp; &nbsp; 
defaults&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;2<br>#/dev/mmcblk0p2&nbsp;
 /&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ext4&nbsp; 
&nbsp; defaults,noatime&nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;1</code></dd></dl><br><br>It
 should boot right into desktop without any hassles. Also, ignore that 
raw image warnings. At first I also thought, that it has something to do
 with not booting it properly.<br><br>You should be able to emulate it with, <br><br><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>qemu-system-arm
 -kernel kernel-qemu-4.1.7-jessie -cpu arm1176 -m 256 -M versatilepb 
-serial stdio -append "root=/dev/sda2 panic=1 rootfstype=ext4 rw" -hda 
2015-09-24-raspbian-jessie.img</code></dd></dl><br><br>Hope it helps.</div></blockquote><br><br>  Thanks! Works like a charm. Now to see how far I can push with getting 1Mb memory working &amp; maybe KVM/libvirt ...  

<P> <strong>Posts:</strong> 2 by <strong><a href="https://www.raspberrypi.org/forums/memberlist.php?mode=viewprofile&amp;u=162797">trojanspike</a></strong> >> Mon Nov 23, 2015 4:16 pm </div>

			

<P> I created a qemu cli to help me created minibian images ::<br><br><a href="https://github.com/trojanspike/qbian">https://github.com/trojanspike/qbian</a></div>

			<div id="sig848208" class="signature">Support me in No-Shave November :: https://www.no-shave.org/member/trojanspike

<P> <strong>Posts:</strong> 3 by <strong><a href="https://www.raspberrypi.org/forums/memberlist.php?mode=viewprofile&amp;u=168353">leighma</a></strong> >> Wed Dec 09, 2015 12:49 pm </div>

			

<P> <blockquote><div><cite>polaco1782 wrote:</cite> I have built a custom qemu kernel for raspbian Jessie. You can get a sources and a precompiled version on my github page:<br><br><a href="https://github.com/polaco1782/raspberry-qemu">https://github.com/polaco1782/raspberry-qemu</a><br><br>Thanks</div></blockquote><br><br>sorry to interrupt .  i am following your github.  to clone the git and checkout , but seems check out failed. <br>fatal check out failed and need to run " git checkout -f HEAD" <br><br>i am not even programmer,  i am a hardware guy.  so still trying to get the Raspberry Pi jessie qemu working.<br>could you please be more specific ?<br><br>Many thanks in advanced!<br><br>leigh

<P> <strong>Posts:</strong> 1 by <strong><a href="https://www.raspberrypi.org/forums/memberlist.php?mode=viewprofile&amp;u=11026">cil8</a></strong> >> Sat Mar 12, 2016 2:32 pm </div>

			

<P> I followed all your instructions and tried all your kernels, but I invariably get a kernel panic as in the screenshot attached.<br><br>I'm running Ubuntu 15.04 and qemu 2.2.0.<br><br>Any hints?<br><br>Thanks!</div>

			
				<dl class="attachbox">
					<dt>Attachments</dt>
<a href="https://www.raspberrypi.org/forums/download/file.php?id=13781"><img 
src="https://www.raspberrypi.org/forums/download/file.php?id=13781"><br>
qemu_raspbian_kernel_panic.png (27.37 KiB) Viewed 3993 times</a>
					
<P> <strong>Posts:</strong> 161 by <strong><a href="https://www.raspberrypi.org/forums/memberlist.php?mode=viewprofile&amp;u=164477">furansa</a></strong> >> Wed Apr 06, 2016 12:42 pm </div>

			

<P> Hi everyone.<br><br>Some of you already tried to run Raspberry Pi with QEmu using the virt manager interface (<!-- w --><a href="http://www.virt-manager.org/">www.virt-manager.org</a><!-- w -->)?<br><br>I've search on the Internet but just found old information.<br><br>My virt-manager (running on Debian 8) have the arm option with some boards like cubieboard but no RPi board.<br><br>I'll appreciate with someone could share some experience.<br><br>Thanks in advance, best regards.</div>

			<div id="sig946915" class="signature">--<br>Fernando Franca<br>http://desconstruindo.eng.br<br> <br>Linux user #263682</div>

		</div>

<a name="EmulatingRaspbianWithQEMU"></a><h3 itemprop="name">Emulating raspbian with QEMU 
<a href="http://raspberrypi.stackexchange.com/questions/32171/emulating-raspbian-with-qemu" class="question-hyperlink">(Source Origin)</a></h3>

<p>I'm trying to emulate raspbian on QEMU and there're plenty of guides available on 
internet. However, every guide points to download qemu-linux kernel from link 
<a href="https://xecdesign.com/downloads/linux-qemu/kernel-qemu" 
target="_b">linux-qemu/kernel-qemu</a> however, this link is dead and I was unable to 
find an alternative link. Is there any alternative link to the kernel or guide how to 
compile kernel from source to use it for emulation?</p>

<P><a href="http://raspberrypi.stackexchange.com/posts/32171/revisions" title="show all 
edits to this post">edited <span title="2015-06-03 08:40:49Z" class="relativetime">Jun 
3 '15 at 8:40</span></a>&nbsp;&nbsp; asked <span title="2015-06-03 05:04:26Z" 
class="relativetime">Jun 3 '15 at 5:04</span>

<P> <span class="comment-copy">I used QEmu from <a href="https://sourceforge.net/projects/rpiqemuwindows/?source=typ_redirect" rel="nofollow">sourceforge.net/projects/rpiqemuwindows/?source=typ_redirect</a></span>
 -&nbsp;<a href="http://raspberrypi.stackexchange.com/users/32351/thomas-weller">Thomas 
Weller</a> <a href="#comment66310_32171">Mar 31 at 22:03</span></a>
                                                                           
                <span class="comment-copy">related <a href="http://raspberrypi.stackexchange.com/questions/165/emulation-on-a-linux-pc/286#286" title="emulation on a linux pc">raspberrypi.stackexchange.com/questions/165/...</a></span>
                    -&nbsp;
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment75037_32171"><span title="2016-06-22 10:44:33Z" class="relativetime-clean">Jun 22 at 10:44</span></a></span>
                                                                         

<h4>3 Answers</h4>

  
<a name="32306"></a>

<p>Here is a link for that file I have uploaded it to dropbox.
<a href="https://www.dropbox.com/s/g8u93xblz1v1ly0/kernel-qemu?dl=0" 
target="_b">kernel-qemu?dl=0</a>  Also, it's been made available on github. Link --> 
<a href="https://github.com/dhruvvyas90/qemu-rpi-kernel">qemu-rpi-kernel</a></p>

<P> <a href="http://raspberrypi.stackexchange.com/posts/32306/revisions">edited Jun 25 
'15 at 17:24</span></a>&nbsp;&nbsp; answered Jun 7 '15 at 4:11</span>

<P> <a href="http://raspberrypi.stackexchange.com/users/31596/s%c3%a1ndor-megyeri">Sandor
 Megyeri</a>

<P>  <span class="comment-copy">Thanks a lot. :)</span>
   -&nbsp;<a href="http://raspberrypi.stackexchange.com/users/14032/dastaan" 
class="comment-user owner">dastaan</a> Jun 7 '15 at 5:29</span>
 
<P> <span class="comment-copy">That particular build seems to be lacking cgroups and 
therefore can't be used to boot Jessie: (-&nbsp;Nathan Osman Nov 17 '15 at 3:15)
                                                                        
<P> cant boot with jessie as well.. tested both kernel versions.. all gives me "Kernel 
panic - not syncing : Attempted to kill init", tested with image 
2016-02-09-raspbian-jessie.img
                    -&nbsp;mariomolFeb 14 at 12:50</span></a></span>

<P> Please don't like to random files on dropbox. No one knows who you are, nor should 
they automatically trust you enough to run some random binary you uploaded to dropbox.
   -&nbsp; CerinApr 11 at 17:22
                
<a name="32173"></a>

<p>The above link does appear dead, however 
<a href="https://github.com/raspberrypi/linux.git">this raspberrypi/linux one</a> is 
good.</p>

<P> answered Jun 3 '15 at 7:36

<p>The answer seems to be pretty late but may help other people. About compiling the 
kernel from source for qemu, this 
<a href="https://github.com/cantora/qemu-arm-rpi-kernel" target="_b">link</a> has a 
copy of the original xecdesign webpage as a pdf. 
<a href="https://github.com/cantora/qemu-arm-rpi-kernel/blob/master/xecdesign-compiling-kernel.pdf">Compiling Kernel Pdf</a> Found it at last!!</p>

<P> answered Sep 30 '15 at 17:17


<P> Whilst this may theoretically answer the question, <a target="_b" 
href="http://meta.stackoverflow.com/q/8259">it would be preferable</a> to include the 
essential parts of the answer here, and provide the link for reference.</span>
                    -&nbsp;Steve Robillard Oct 5 '15 at 0:46


<a name="build-kernel-qemu"></a>    <h3 class="public ">
  polaco1782/<a href="https://github.com/polaco1782/raspberry-qemu" 
data-pjax="#js-repo-pjax-container">raspberry-qemu</a></strong>&nbsp;&nbsp; 
<a href="https://github.com/polaco1782/raspberry-qemu/blob/master/build-kernel-qemu" 
target="_b">(Source Origin)</a>

</h3>


<P><a href="https://github.com/polaco1782/raspberry-qemu/blob/master/build-kernel-qemu" 
data-name="master">build-kernel-qemu</a> &nbsp;&nbsp;executable file&nbsp;&nbsp;
</span>47 lines (42 sloc)&nbsp;&nbsp;1.09 KB

<PRE>
#!/bin/bash
#
# Build ARM kernel 4.1.7 for QEMU Raspberry Pi Emulation
#
#######################################################


TOOLCHAIN=)/tools/arm-bcm2708/gcc-linaro-arm-linux-gnueabihf-raspbian/bin/arm-linux-gnueabihf


git clone https://github.com/raspberrypi/linux.git
git clone https://github.com/raspberrypi/tools.git
cd linux
git checkout 77798915750db46f10bb449e1625d6368ea42e25
patch -p1 &lt; ../linux-arm.patch


make ARCH=arm versatile_defconfig
cat &lt;&lt; EOF
CONFIG_CROSS_COMPILE="
CONFIG_CPU_V6=y
CONFIG_ARM_ERRATA_411920=y
CONFIG_ARM_ERRATA_364296=y
CONFIG_AEABI=y
CONFIG_OABI_COMPAT=y
CONFIG_PCI=y
CONFIG_SCSI=y
CONFIG_SCSI_SYM53C8XX_2=y
CONFIG_BLK_DEV_SD=y
CONFIG_BLK_DEV_SR=y
CONFIG_DEVTMPFS=y
CONFIG_DEVTMPFS_MOUNT=y
CONFIG_TMPFS=y
CONFIG_INPUT_EVDEV=y
CONFIG_EXT3_FS=y
CONFIG_EXT4_FS=y
CONFIG_VFAT_FS=y
CONFIG_NLS_CODEPAGE_437=y
CONFIG_NLS_ISO8859_1=y
CONFIG_FONT_8x16=y
CONFIG_LOGO=y
CONFIG_VFP=y
CONFIG_CGROUPS=y
EOF


make -j 8 -k ARCH=arm CROSS_COMPILE=${TOOLCHAIN}- menuconfig
make -j 8 -k ARCH=arm CROSS_COMPILE=${TOOLCHAIN}-
cd ..
cp linux/arch/arm/boot/zImage kernel-qemu
</PRE>

<P> More References:

<OL>
  <LI><a href="https://github.com/dhruvvyas90/qemu-rpi-kernel" 
      target="_b">dhruvvyas90/qemu-rpi-kernel</a>
  <LI><a href="" 
      target="_b"></a>
</OL>

<a name="BuildRpiLinuxQemu"></a>  <h3>Build Raspberry Pi Linux Kernel For QEMU 
<a href="http://theo.cc/blog/2015/10/14/Build-Raspberry-Pi-Linux-Kernel-for-QEMU/" 
target="_b">(Source Origin)</a></h3>

  <h4>Try the next procedure first</h4>      

<P><a target="_b" 
href="http://tiriboy.blogspot.tw/2015/04/compiling-arm1176-for-qemu-raspberry-pi.html">(Source Origin)</a></P>

<h3>3. Configure the Kernel</h3>

<div>
Then we need to configure the kernel accordingly:</div>

<PRE>
 $ cd linux 
 $ make ARCH=arm versatile_defconfig 
 $ make ARCH=arm menuconfig 	
</PRE>


<h4>Specify the cross-compiler:</h4>

<PRE>
General Setup ---&gt;</div>
&nbsp; &nbsp; Cross-compiler tool prefix</div>
&nbsp; &nbsp; &nbsp; &nbsp; (arm-linux-gnueabihf-)</div>
</PRE>

<P>
<b>Note: Do not forget the '-' at the end of this string.</b></div>
<div class="p1">
<b>Note: When you select an option make sure you don't see 'M', but '*' (you may need to press space twice).</b></div>
</P>

<h4>Select the right CPU options:</h4>

<PRE>
System Type ---&gt;</div>
&nbsp; &nbsp; [*] Support ARM V6 processor</div>
&nbsp; &nbsp;&nbsp;[*] ARM errata: Invalidation of the Instruction Cache operation can fail</div>
&nbsp; &nbsp;&nbsp;[*] ARM errata: Possible cache data corruption with hit-under-miss enabled</div>
</PRE>

<h4>Enable support for hard-float binaries:</h4>

<PRE>
Floating point emulation &nbsp;---&gt;</div>
&nbsp; &nbsp;&nbsp;[*] VFP-format floating point maths</div>
</PRE>

<h4>Enable ARM EABI:</h4>

<PRE>
Kernel Features ---&gt;</div>
&nbsp; &nbsp;&nbsp;[*] Use ARM EABI to compile the kernel</div>
&nbsp; &nbsp;&nbsp;[*] Allow old ABI binaries to run with this kernel</div>
</PRE>

<h4>Enable QEMU's disk support:</h4>

<PRE>
Bus Support ---&gt;</div>
&nbsp; &nbsp;&nbsp;[*] PCI Support</div>
Device Drivers ---&gt;</div>
&nbsp; &nbsp;&nbsp;SCSI Device Support ---&gt;</div>
&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;[*] SCSI Device Support</div>
&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;[*] SCSI Disk Support</div>
&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;[*] SCSI CDROM support</div>
&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;[*] SCSI low-lever drivers ---&gt;</div>
&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;[*] SYM53C8XX &nbsp;Version 2 SCSI support</div>
</PRE>

<h4>Enable devtmpfs:</h4>

<PRE>
&nbsp; &nbsp;&nbsp;Device Drivers ---&gt;</div>
&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;Generic Driver Options---&gt;</div>
&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[*] Maintain a devtmpfs filesystem to mount at /dev</div>
&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;[*] Automount devtmpfs at /dev, after the kernel mounted the root</div>
</PRE>

<h4>Enable the important file systems:</h4>

<PRE>
&nbsp; &nbsp;&nbsp;File systems --&gt;</div>
&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&lt;*&gt; Ext3 journalling file system support</div>
&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&lt;*&gt; The Extended 4 (ext4) filesystem</div>
</PRE>

<h4>Enable tmpfs:</h4>

<PRE>
File systems ---&gt;</div>
&nbsp; &nbsp;&nbsp;Pseudo filesystems---&gt;</div>
&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;[*] Virtual memory file system support (former shm fs)</div>
</PRE>

<h4>Enable the event interface:</h4>

<PRE>
Device Drivers ---&gt;</div>
&nbsp; &nbsp;&nbsp;Input device support---&gt;</div>
&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;[*] Event interface
</PRE>

<h4>Adding RaspberryPi Logo into Kernel:</h4>

<PRE>
Device Drivers ---&gt;
&nbsp; &nbsp;&nbsp;Graphics Support ---&gt;
&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;Console display driver support ---&gt;
&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ ] Select compiled-in fonts
&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;[*] Bootup logo (optional)
</PRE>

Exit, saving the configuration.


<h3>4. Compiling the Kernel</h3>

<PRE>
 $ make ARCH=arm 
 $ mkdir ../modules 
 $ make ARCH=arm INSTALL_MOD_PATH=../modules modules_install 
</PRE>

<h4><span class="s1">Troubleshooting</span></h4>

<div>
<u>Error 1:</u></div>
<div>
<span class="s1"><b>scripts/mod/modpost.c:1465:7: </b></span><span class="s2"><b>error: </b></span><span class="s1"><b>use of undeclared identifier 'R_386_32'</b></span></div>

<PRE>
&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;case R_386_32: 
</PRE>

<P> Create a new file elf.h and paste <a href="http://www.opensource.apple.com/source/dtrace/dtrace-78/sys/elf.h?txt" target="_blank">this</a> code 
from the opensource.apple.com.

<PRE> 
 $ nano /usr/local/include/elf.h
</PRE>

<P> In the same file&nbsp;</span>append these...</div>

<PRE> 
#define R_386_NONE 0
#define R_386_32 1
#define R_386_PC32 2
#define R_ARM_NONE 0
#define R_ARM_PC24 1
#define R_ARM_ABS32 2
#define R_MIPS_NONE 0
#define R_MIPS_16 1
#define R_MIPS_32 2
#define R_MIPS_REL32 3
#define R_MIPS_26 4
#define R_MIPS_HI16 5
#define R_MIPS_LO16 6
</PRE>
<br>
<u>Error2:</u><br>

<PRE>
/usr/local/include/elf.h:45:10: fatal error: 'elftypes.h' file not found
#include "elftypes.h" /* In lieu of Solaris &lt;sys/elftypes.h&gt; */
</PRE>

<P> create a new file elftypes.h and paste <a href="http://www.opensource.apple.com/source/dtrace/dtrace-48/sys/elftypes.h?txt" target="_blank">this</a> code from&nbsp;</span>&nbsp;the opensource.apple.com.

<PRE>
 $ nano /usr/local/include/elftypes.h
</PRE>


<br>
<u>Error 3:</u></div>

<PRE>
xargs: illegal option -- r</div>
</PRE>

<pre>
This is because BSD xargs doesn't have the same options as GNU xargs. Install 
GNU xargs from macports (It should show up earlier in your search path)
</pre>

<P> Install GNU `find`, `locate`, `updatedb`, and `xargs`, g-prefixed

<PRE>
 $ brew install findutils
</PRE>

<P> Replace all files using 'xargs' to 'gxargs'. (Use a sublime or any texteditor). 

<h3>5. Copy compiled Kernel</h3>

<P> Copy the compiled kernel to your working directory:</div>

<PRE>
 $ cp arch/arm/boot/zImage ../
</PRE>

Done! You should now have a QEMU-bootable linux kernel and modules in your work 
directory.

  <h4 id="Compile_the_Kernel">Compile the Kernel</h4>

<p>Make a working directory:</p>


<PRE>
 mkdir /tmp/rpi-linux
 cd /tmp/rpi-linux
</PRE>

<p>Get the RPI tools and kernel:</p>


<PRE>
 git clone https://github.com/raspberrypi/tools
 git clone https://github.com/raspberrypi/linux
</PRE>

<p>Point to the cross compiler (N.B. there's a dash "-" at the end!):</p>


<PRE>
 export CCPREFIX=/tmp/rpi-linux/tools/arm-bcm2708/gcc-linaro-arm-linux-gnueabihf-raspbian/bin/arm-linux-gnueabihf-
</PRE>

<p>Save the following patch as <code>linux-rpi-qemu.patch</code>:</p>

<pre>
 diff --git a/arch/arm/mach-versatile/Kconfig b/arch/arm/mach-versatile/Kconfig
 index 1dba368..82fa543 100644
 --- a/arch/arm/mach-versatile/Kconfig
 +++ b/arch/arm/mach-versatile/Kconfig
 @@ -4,7 +4,6 @@ menu "Versatile platform type"
  config ARCH_VERSATILE_PB
  	bool "Support Versatile Platform Baseboard for ARM926EJ-S"
  	default y
 -	select CPU_ARM926T
  	select MIGHT_HAVE_PCI
  	help
  	  Include support for the ARM(R) Versatile Platform Baseboard
 @@ -12,7 +11,6 @@ config ARCH_VERSATILE_PB
  
  config MACH_VERSATILE_AB
  	bool "Support Versatile Application Baseboard for ARM926EJ-S"
 -	select CPU_ARM926T
  	help
  	  Include support for the ARM(R) Versatile Application Baseboard
  	  for the ARM926EJ-S.
 diff --git a/arch/arm/mm/Kconfig b/arch/arm/mm/Kconfig
 index bb263d8..f1fbc63 100644
 --- a/arch/arm/mm/Kconfig
 +++ b/arch/arm/mm/Kconfig
 @@ -71,7 +71,7 @@ config CPU_ARM9TDMI
  
  # ARM920T
  config CPU_ARM920T
 -	bool "Support ARM920T processor" if (ARCH_MULTI_V4T &amp;&amp; ARCH_INTEGRATOR)
 +	bool "Support ARM920T processor" if (ARCH_MULTI_V4T &amp;&amp; ARCH_INTEGRATOR) || ARCH_VERSATILE_PB || ARCH_VERSATILE_AB
  	select CPU_32v4T
  	select CPU_ABRT_EV4T
  	select CPU_CACHE_V4WT
 @@ -89,7 +89,7 @@ config CPU_ARM920T
  
  # ARM922T
  config CPU_ARM922T
 -	bool "Support ARM922T processor" if (ARCH_MULTI_V4T &amp;&amp; ARCH_INTEGRATOR)
 +	bool "Support ARM922T processor" if (ARCH_MULTI_V4T &amp;&amp; ARCH_INTEGRATOR) || ARCH_VERSATILE_PB || ARCH_VERSATILE_AB
  	select CPU_32v4T
  	select CPU_ABRT_EV4T
  	select CPU_CACHE_V4WT
 @@ -127,7 +127,7 @@ config CPU_ARM925T
  
  # ARM926T
  config CPU_ARM926T
 -	bool "Support ARM926T processor" if (!ARCH_MULTIPLATFORM || ARCH_MULTI_V5) &amp;&amp; (ARCH_INTEGRATOR || MACH_REALVIEW_EB)
 +	bool "Support ARM926T processor" if ((!ARCH_MULTIPLATFORM || ARCH_MULTI_V5) &amp;&amp; (ARCH_INTEGRATOR || MACH_REALVIEW_EB)) || ARCH_VERSATILE_PB || ARCH_VERSATILE_AB
  	select CPU_32v5
  	select CPU_ABRT_EV5TJ
  	select CPU_CACHE_VIVT
 @@ -135,6 +135,7 @@ config CPU_ARM926T
  	select CPU_CP15_MMU
  	select CPU_PABRT_LEGACY
  	select CPU_TLB_V4WBI if MMU
 +	depends on !CPU_V6 &amp;&amp; !CPU_V7
  	help
  	  This is a variant of the ARM920.  It has slightly different
  	  instruction sequences for cache and TLB operations.  Curiously,
 @@ -358,7 +359,7 @@ config CPU_PJ4B
  
  # ARMv6
  config CPU_V6
 -	bool "Support ARM V6 processor" if (!ARCH_MULTIPLATFORM || ARCH_MULTI_V6) &amp;&amp; (ARCH_INTEGRATOR || MACH_REALVIEW_EB || MACH_REALVIEW_PBX || MACH_BCM2708)
 +	bool "Support ARM V6 processor" if ((!ARCH_MULTIPLATFORM || ARCH_MULTI_V6) &amp;&amp; (ARCH_INTEGRATOR || MACH_REALVIEW_EB || MACH_REALVIEW_PBX || MACH_BCM2708)) || ARCH_VERSATILE_PB || ARCH_VERSATILE_AB
  	select CPU_32v6
  	select CPU_ABRT_EV6
  	select CPU_CACHE_V6
 diff --git a/drivers/mmc/host/Kconfig b/drivers/mmc/host/Kconfig
 index 1af139a..fd51e26 100644
 --- a/drivers/mmc/host/Kconfig
 +++ b/drivers/mmc/host/Kconfig
 @@ -6,7 +6,7 @@ comment "MMC/SD/SDIO Host Controller Drivers"
  
  config MMC_BCM2835
  	tristate "MMC support on BCM2835"
 -	depends on MACH_BCM2708 || MACH_BCM2709 || ARCH_BCM2835
 +	depends on MACH_BCM2708 || MACH_BCM2709 || ARCH_BCM2835 || ARCH_VERSATILE_PB || ARCH_VERSATILE_AB
  	help
  	  This selects the MMC Interface on BCM2835.
</PRE>

<p>And apply it to the kernel:</p>

<pre>
 cd linux/
 patch -p1 &lt; ../linux-rpi-qemu.patch
</PRE>

<p>Now we're ready to configure the kernel:</p>


<PRE>
 make ARCH=arm CROSS_COMPILE=${CCPREFIX} versatile_defconfig
 make ARCH=arm CROSS_COMPILE=${CCPREFIX} menuconfig
</PRE>

<p>In the menu config, select the following options. Make sure they are starred 
<code>[*]</code> so that they are <i>not</i> built as modules <code>[m]</code>.</p>

<pre>
 System type--->
   [*] Support ARM V6 processor
   [*] ARM errata: Invalidation of the Instruction Cache operation can fail
   [*] ARM errata: Possible cache data corruption with hit-under-miss enabled
 
 Floating point emulation  --->
   [*] VFP-format floating point maths
 
 Kernel Features  --->
   [*] Use the ARM EABI to compile the kernel
   [*]   Allow old ABI binaries to run with this kernel (EXPERIMENTAL)
   
 Bus support  --->
   [*] PCI support  
 
 Device Drivers  --->
   SCSI device support  ---> 
     &lt;*> SCSI device support
     &lt;*> SCSI disk support
     &lt;*> SCSI CDROM support
     [*] SCSI low-level drivers (NEW)  --->
     &lt;*>   SYM53C8XX Version 2 SCSI support
 
 Device Drivers  --->
   &lt;*> MMC/SD/SDIO card support  --->
     &lt;*>   MMC support on BCM2835
 
 Device Drivers  --->
   Generic Driver Options  --->
     [*] Maintain a devtmpfs filesystem to mount at /dev
     [*]   Automount devtmpfs at /dev, after the kernel mounted the rootfs
 
 File systems  --->
   &lt;*> Ext3 journalling file system support
   &lt;*> The Extended 4 (ext4) filesystem
 
 File systems  --->
   Pseudo filesystems  --->
     [*] Tmpfs virtual memory file system support (former shm fs)
</PRE>

<p>Build the kernel:</p>


<PRE>
 make ARCH=arm CROSS_COMPILE=${CCPREFIX} -j4
</PRE>

<h4 id="Compile_BusyBox">Compile BusyBox</h4>
<p>Now let's build BusyBox so that we have something once we are booted:</p>


<PRE>
 cd ..
 wget http://busybox.net/downloads/busybox-1.23.2.tar.bz2
 tar xf busybox-1.23.2.tar.bz2
 cd busybox-1.23.2/
 make CROSS_COMPILE=${CCPREFIX} defconfig
 make CROSS_COMPILE=${CCPREFIX} menuconfig
</PRE>

<p>We want to build BusyBox statically, so select this option:</p>

<pre>
 Busybox Settings  --->
   Build Options  --->
     [*] Build BusyBox as a static binary (no shared libs)
</PRE>

<p>Compile BusyBox:</p>


<PRE>
make CROSS_COMPILE=${CCPREFIX} -j4
 make CROSS_COMPILE=${CCPREFIX} install
</PRE>

<p>We can now make our initramfs containing BusyBox:</p>


<PRE>
 mkdir ../initramfs
 cd ../linux
 make ARCH=arm CROSS_COMPILE=${CCPREFIX} INSTALL_MOD_PATH=../initramfs modules_install
 cd ../initramfs
 mkdir -pv {bin,sbin,etc,proc,sys,usr/{bin,sbin}}
 cp -a ../busybox-1.23.2/_install/* .
 cat &lt;&lt; EOF > init
 #!/bin/sh
 mount -t proc none /proc
 mount -t sysfs none /sys
 mount -t devtmpfs none /dev
 exec /bin/sh
 EOF
 chmod +x init
 find . -print0 | cpio --null -ov --format=newc | gzip > ../initramfs.gz
</PRE>

<h4 id="Emulating_with_QEMU">Emulating with QEMU</h4>
<p>The kernel and the initramfs are now built, so it's time to boot with QEMU:</p>


<PRE>
 cd ..
 qemu-system-arm -M versatilepb -cpu arm1176 -kernel linux/arch/arm/boot/zImage -initrd initramfs.gz -append "console=ttyAMA0" -nographic
</PRE>

<h4 id="References">References</h4>

<OL>
  <LI><a href="https://www.raspberrypi.org/documentation/linux/kernel/building.md" 
      target="_blank">https://www.raspberrypi.org/documentation/linux/kernel/building.md</a>
  <LI><a href="http://elinux.org/Raspberry_Pi_Kernel_Compilation" 
      target="_blank" rel="external">http://elinux.org/Raspberry_Pi_Kernel_Compilation</a>
  <LI><a href="https://github.com/cantora/qemu-arm-rpi-kernel" 
      target="_blank" rel="external">https://github.com/cantora/qemu-arm-rpi-kernel</a>
  <LI><a href="http://tiriboy.blogspot.com/2015/04/compiling-arm1176-for-qemu-raspberry-pi.html" 
      target="_blank" rel="external">http://tiriboy.blogspot.com/2015/04/compiling-arm1176-for-qemu-raspberry-pi.html</a>
  <LI><a href="http://mgalgs.github.io/2015/05/16/how-to-build-a-custom-linux-kernel-for-qemu-2015-edition.html" 
      target="_blank" rel="external">http://mgalgs.github.io/2015/05/16/how-to-build-a-custom-linux-kernel-for-qemu-2015-edition.html</a>
  <LI><a href="https://balau82.wordpress.com/2012/03/31/compile-linux-kernel-3-2-for-arm-and-emulate-with-qemu/" 
      target="_blank" rel="external">https://balau82.wordpress.com/2012/03/31/compile-linux-kernel-3-2-for-arm-and-emulate-with-qemu/</a></p>
</OL>

      
<a name="EnablingKVMvirtualizationForRPi2"></a><h3 class="entry-title ">Enabling KVM 
virtualization for Raspberry Pi 2 
<a href="http://blog.flexvdi.es/2015/03/17/enabling-kvm-virtualization-on-the-raspberry-pi-2/">(Source Origin)</a></h3>

<div class="entry-meta">17 March, 2015&nbsp;&nbsp;Sergio L. Pascual&nbsp;&nbsp;Guias
</div>

<p>As I wrote on my previous post, <a target="_b" 
href="/src3/Xvisor/HTML/XvisorOnRaspberryPi2.html#EnablingHYPRpi2">Enabling HYP mode on 
the Raspberry Pi 2</a>, the newest machine from the Raspberry Pi Foundation features a 
Cortex-A7 with Virtualization Extensions, but it isn't possible to make use of such 
feature out of the box.</p>

<p>In that article I showed that it was possible to start the kernel in HYP mode. Now, 
I'll cover the rest of steps needed for enabling KVM virtualization and running your 
first guest OS.</p>

<p><b>Isolating a core</b></p>

<p>With KVM on ARM, interrupts are dealt in a very particular way. If a hardware 
interrupt is received when a core in running in guest mode, the execution is 
interrupted, a full world switch takes place returning to the kernel in host mode, 
then interrupts are reenabled and the core traps again, this time following the usual 
route.</p>

<p>Apparently, the BCM2836 (the core of the RPi2) doesn't like the behavior, and if you 
try to run a guest on a core that can receive physical interrupts, you'll find your RPi2 
hangs within a few seconds.  Without a JTAG of a full development board, debugging this 
problem is very, very hard.</p>

<p>Luckily, there's a pretty simple workaround. Using the kernel option 
<code>isolcpus</code> when can isolate a core, so Linux doesn't assign any tasks 
(including IRQ lines) to it. </p>

<p>In our case, we're going to isolate the core number 3 (starting from zero). This is 
pretty straightforward, just edit <code>/boot/cmdline.txt</code> and add 
<code>isolcpus=3</code> at end of the file.<br>
&nbsp;</p>

<p><b>A kernel with VGIC emulation for the RPi2</b></p>

<p>On my previous article about RPi2 emulation, I wrote about the BCM2836 and its lack 
of a GIC, which makes emulation a bit harder. To work around this issue, I've 
implemented VGIC emulation inside the Linux kernel.</p>

<p>To be able to use both the customized bootloader and this modified version of the 
kernel, we need to generate a bundle with both components, and the dtb concatenated at 
end.</p>

<p><b>The easy way. Using a prebuilt image</b></p>

<p>I've uploaded a <a href="https://drive.google.com/file/d/0B1QBSii9IJ1NSzhHVlpOak52MDA/view?usp=sharing">prebuilt image here</a> (md5sum: 356788d260e1a93376c5b8acbb63da13), 
which contains the bootloader, some padding (to put the <code>zImage</code> at 
<code>0x8000</code>), the kernel and the dtb. Simply replace your kernel with it (save 
a copy first!):</p>

<pre>
mv /boot/kernel7.img /boot/kernel7.img.bak
cp kernel7.img /boot
</pre>

<p>Then you'll need to add the <code>kernel_old=1</code> option to your 
<code>config.txt</code>:</p>

<pre>
echo "kernel_old=1" >> /boot/config.txt
</pre>

<p>That's it! On the next boot, Linux should say something like this:</p>

<pre>
[    0.154131] CPU: All CPU(s) started in HYP mode.
[    0.154158] CPU: Virtualization extensions available.
</pre>

<p><b>Building it yourself (Part I: the bootloader)</b></p>

<p>If you want to build the image by yourself, you'll need to <strong>grab an ARM cross 
toolchain</strong>. I'm using the one from the <a target="_b" 
href="https://launchpad.net/gcc-arm-embedded">GCC ARM Embedded project</a>, which works 
just fine. Then add it to your <code>$PATH</code>, grab the code for <a target="_b" 
href="https://github.com/slp/rpi2-hyp-boot">my  repo</a>, and build it:</p>

<pre>
export PATH=$PATH:/home/slp/sources/gcc-arm-none-eabi-4_9-2014q4/bin
git clone https://github.com/slp/rpi2-hyp-boot.git
cd rpi2-hyp-boot
make
</pre>

<p>That should produce a <code>bootblk.bin</code>, with contains the boot code and 
<code>32k</code> of padding.</p>

<p><b>Building it yourself (Part II: kernel and dtb)</b></p>

<p>You can find a complete guide for building the kernel on a variety of host systems 
here <a href="http://elinux.org/Raspberry_Pi_Kernel_Compilation">Raspberry Pi Kernel 
Compilation</a>. Read that and the grab the sources from <a target="_b"  
href="https://github.com/slp/linux">my repo</a> and make sure the following options 
are enabled:</p>

<ul>
  <li><code>Patch physical to virtual translations at runtime</code></li>
  <li><code>General setup -> Control Group support</code></li>
  <li><code>System Type -> Support for Large Physical Address Extension</code></li>
  <li><code>Boot options -> Use appended device tree blob to zImage 
      (EXPERIMENTAL)</code></li>
  <li><code>Boot options -> Supplement the appended DTB with traditional ATAG 
      information</code></li>
  <li><code>Device Drivers -> Block devices -> Loopback device support</code></li>
  <li><code>Virtualization</code></li>
  <li><code>Virtualization -> Kernel-based Virtual Machine (KVM) support 
      (NEW)</code></li>
  <li><strong>DISABLE</strong> <code>Virtualization -> KVM support for Virtual 
      GIC</code></li>
  <li><strong>ENABLE</strong> <code>Virtualization -> KVM support for Emulated 
      GIC</code></li>
</ul>

<p>Now build both kernel and dtb:</p>

<pre>
make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- zImage dtbs
</pre>

<p><b>Building it yourself (Part III: bundling all pieces)</b></p>

<p>This is the easy part, just concatenate them:</p>

<pre>
cat rpi2-hyp-boot/bootblk.bin linux/arch/arm/boot/zImage linux/arch/arm/boot/dts/bcm2709-rpi-2-b.dtb > kernel7.img
</pre>

<p>Now you can use it in the same way as the prebuilt image provided above.</p>

<p><strong>Patched QEMU installation</strong></p>

<p>To be able to launch our first Guest, we need a recent and patched (to ensure the 
guest is running in the isolated core) QEMU. The one that comes with Raspbian is quite 
old, so you have to build a newer one:</p>

<p>Download the build dependencies:</p>

<pre>
pi@raspberrypi:~$ sudo apt-get build-dep qemu
pi@raspberrypi:~$ sudo apt-get install libpixman-1-dev
</pre>

<p>Then, create a directory for the sources, download QEMU 2.2 and uncompress it:</p>

<pre>
pi@raspberrypi:~$ mkdir srcs
pi@raspberrypi:~$ cd srcs
pi@raspberrypi:~/srcs$ wget http://wiki.qemu-project.org/download/qemu-2.2.0.tar.bz2
pi@raspberrypi:~/srcs$ tar xf qemu-2.2.0.tar.bz2
</pre>

<p>We need to apply <a href="https://drive.google.com/file/d/0B1QBSii9IJ1NRE10YlZZUEk3OXM/view?usp=sharing">this 
patch</a> to make sure the QEMU runs our guest in the core we isolated with option 
<code>isolcpus</code>:</p>

<pre>
pi@raspberrypi:~/srcs$ cd qemu-2.2.0/
pi@raspberrypi:~/srcs/qemu-2.2.0$ patch -p1 &lt; ~/qemu-cpu-affinity.patch
</pre>

<p>Now run the <code>configure</code> script with options for enabling KVM (it is 
enabled automatically if supported, but this way we ensure we get warned if it's not 
going to be build with it) and for building the ARM emulation target only:</p>

<pre>
pi@raspberrypi:~/srcs/qemu-2.2.0$ ./configure --enable-kvm --target-list=arm-softmmu
</pre>

<p>Finally, build and install it (by default, the new binaries will reside in 
<code>/usr/local/bin</code>):</p>

<pre>
pi@raspberrypi:~/srcs/qemu-2.2.0$ make
pi@raspberrypi:~/srcs/qemu-2.2.0$ sudo make install
</pre>

<p><strong>A kernel for the Guest</strong></p>

<p>When running QEMU with KVM, the hardware emulated is a Versatile Express A15, one the 
reference platforms provided by ARM Holdings. So, for our Guest we need a kernel which 
supports this board, and the corresponding dtb.</p>

<p>I've uploaded prebuilt binaries for both <a href="https://drive.google.com/file/d/0B1QBSii9IJ1NOEFJLW1sd2pZQVU/view?usp=sharing">kernel</a> 
(md5sum: 7c4831e852d6dda2145dd04fe3c2b464) and 
<a href="https://drive.google.com/file/d/0B1QBSii9IJ1NWjFIbkU3ZlA4elE/view?usp=sharing">dtb</a> 
(md5sum: 249885543f0fcca2ce7a011ef5157e7d).</p>

<p>If you want to build the kernel yourself, you'll need a vanilla kernel (the one from 
RPi2's repo wouldn't build). In case of doubt, just grab the lastest stable from <a 
href="http://kernel.org/">kernel.org</a>. Use the default configuration for Vestatile 
Express A15 (<code>make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- 
vexpress_defconfig</code>) and make sure you enable these options:</p>

<ul>
  <li><code>General setup -> Configure standard kernel features (expert 
      users)</code></li>
  <li><code>General setup -> open by fhandle syscalls</code></li>
  <li><code>Enable the block layer -> Support for large (2TB+) block devices and 
      files</code></li>
</ul>

<p>Then build both kernel and dtb:</p>

<pre>
make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- zImage dtbs
</pre>

<p>This will generate <code>linux/arch/arm/boot/zImage</code> and 
<code>linux/arch/arm/boot/dts/vexpress-v2p-ca15-tc1.dtb</code>. Copy both files to your 
Raspberry.</p>

<p><strong>Running our first Guest</strong></p>

<p>In addition to the kernel, we also need a root filesystem with the distribution we 
want to use for our userland. As we're going to virtualize an ARMv7 CPU, the best option 
is using a earmv7hf distribution. In this guide, we're going to use a minimal OpenSuSE 
image (JeOS), but you can choose the one of your preference.</p>

<p>Create a directory with the files needed by the Guest:</p>

<pre>
pi@raspberrypi:~$ mkdir -p ~/kvm-arm/opensuse
pi@raspberrypi:~$ cd ~/kvm-arm/opensuse
pi@raspberrypi:~/kvm-arm/opensuse$
</pre>

<p>Now we create a raw image with OpenSuSE's userland:</p>

<pre>
pi@raspberrypi:~/kvm-arm/opensuse$ wget http://download.opensuse.org/ports/armv7hl/factory/images/openSUSE-Factory-ARM-JeOS.armv7-rootfs.armv7l-Current.tbz
pi@raspberrypi:~/kvm-arm/opensuse$ qemu-img create -f raw opensuse-factory.img 1G
Formatting 'opensuse-factory.img', fmt=raw size=1073741824
pi@raspberrypi:~/kvm-arm/opensuse$ sudo losetup /dev/loop0 opensuse-factory.img
pi@raspberrypi:~/kvm-arm/opensuse$ sudo mkfs.ext4 /dev/loop0
mke2fs 1.42.5 (29-Jul-2012)
Discarding device blocks: done                            
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
65536 inodes, 262144 blocks
13107 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=268435456
8 block groups
32768 blocks per group, 32768 fragments per group
8192 inodes per group
Superblock backups stored on blocks: 
	32768, 98304, 163840, 229376

Allocating group tables: done                            
Writing inode tables: done                            
Creating journal (8192 blocks): done
Writing superblocks and filesystem accounting information: done

pi@raspberrypi:~/kvm-arm/opensuse$ sudo mount /dev/loop0 /mnt
pi@raspberrypi:~/kvm-arm/opensuse$ sudo tar xf openSUSE-Factory-ARM-JeOS.armv7-rootfs.armv7l-Current.tbz -C /mnt
pi@raspberrypi:~/kvm-arm/opensuse$ sudo umount /mnt
pi@raspberrypi:~/kvm-arm/opensuse$ sudo losetup -d /dev/loop0
</pre>

<p>And finally, launch your first Guest:</p>

<pre>
pi@raspberrypi:~/kvm-arm/opensuse$ sudo qemu-system-arm -enable-kvm -smp 1 -m 256 -M vexpress-a15 -cpu host -kernel /home/pi/vexpress-zImage -dtb /home/pi/vexpress-v2p-ca15-tc1.dtb -append "root=/dev/vda console=ttyAMA0 rootwait" -drive if=none,file=/home/pi/opensuse-factory.img,id=factory -device virtio-blk-device,drive=factory -net nic,macaddr=02:fd:01:de:ad:34 -net tap -monitor null -serial stdio -nographic
audio: Could not init `oss' audio driver
Booting Linux on physical CPU 0x0
Initializing cgroup subsys cpuset
Linux version 3.19.1 (slp@linux-ni2o) (gcc version 4.5.3 (GCC) ) #1 SMP Wed Mar 18 10:52:22 CET 2015
CPU: ARMv7 Processor [410fc075] revision 5 (ARMv7), cr=10c5387d
CPU: PIPT / VIPT nonaliasing data cache, VIPT aliasing instruction cache
Machine model: V2P-CA15
Memory policy: Data cache writealloc
PERCPU: Embedded 9 pages/cpu @8fddd000 s7232 r8192 d21440 u36864
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 65024
Kernel command line: root=/dev/vda console=ttyAMA0 rootwait
PID hash table entries: 1024 (order: 0, 4096 bytes)
Dentry cache hash table entries: 32768 (order: 5, 131072 bytes)
Inode-cache hash table entries: 16384 (order: 4, 65536 bytes)
Memory: 252936K/262144K available (4839K kernel code, 184K rwdata, 1324K rodata, 256K init, 147K bss, 9208K reserved, 0K cma-reserved)
...
[  OK  ] Reached target Multi-User System.
[  OK  ] Reached target Graphical Interface.
         Starting Update UTMP about System Runlevel Changes...
[  OK  ] Started Update UTMP about System Runlevel Changes.

Welcome to openSUSE Factory "Tumbleweed" - Kernel 3.19.1 (ttyAMA0).


linux login:
</pre>

<p>Now we can start playing with this Guest. The default credentials are 
<code>root/linux</code>:</p>

<pre>
linux login: root
Password: 
Last login: Tue Mar 17 18:01:41 on ttyAMA0
Have a lot of fun...
linux:~ # cat /proc/cpuinfo
processor	: 0
model name	: ARMv7 Processor rev 5 (v7l)
BogoMIPS	: 38.40
Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm 
CPU implementer	: 0x41
CPU architecture: 7
CPU variant	: 0x0
CPU part	: 0xc07
CPU revision	: 5

Hardware	: ARM-Versatile Express
Revision	: 0000
Serial		: 0000000000000000

</pre>

<p><strong>The end</strong><br>
And that's it, now you can extract the full potential of your Raspberry Pi 2!</p>

<p>Speaking for myself, I'm going to work on getting MMIO support on NetBSD (without 
this, the performance is really awful), and then I'll be able to build an hybrid 
Linux/NetBSD SD card image, which was my initial motivation for all this work.</p>
	
</article><!-- #post-## -->

			
<div id="comments" class="comments-area">

	
<h4 class="comments-title">30 thoughts on "<span>Enabling KVM virtualization for 
Raspberry Pi 2</span>"		</h4>

		
<ol class="comment-list">
  <li id="comment-226" class="comment even thread-even depth-1 parent">
    <article id="div-comment-226"><b><a href="http://www.macdecal.de/">mkoryak</a></b> 
     says: 18 March, 2015 at 2:02 pm

		<div class="comment-content">
<p>Last line of the article is "And that's it, now you can extract the full potential 
of your Raspberry Pi 2!"<br>
Can someone explain this to me? I know almost nothing about virtualization, but isn't 
it be definition slower than straight up OS install?</p>
		</div><!-- .comment-content -->

<div>Reply</div>			</article><!-- .comment-body -->
  <ol class="children">
    <li id="comment-359">
      <article id="div-comment-359"><b>Wonseok</b> says: 9 August, 2015 at 3:14 pm

		<div class="comment-content">
<p>I think that "full potential" means he enable hardware-assited virtualization feature 
(ARM VE) and porting KVM/ARM on raspberry Pi2. You know, when you got any ARM boards, 
vendor always hide the hardware-assited virtualization feature because in normal 
development processes (i.e., linux, RTOS and android), you don't need to use the 
feature. Therefore, they always provide BSP (board support package) for normal 
development. If you want to use hardware-assisted virtualization feature for ARM Board, 
you must modify firmware or bootloader to enable HYP mode. Do you want to know how the 
board boot with HYP mode, you need to study about ARM boot procedure.</p>

<p>Anyway, as you know, virtualization give us some benefits e.g. supporting multiple 
os onto single platform but give us some drawbacks e.g. performacen degradation. This is 
the fact and it make us to use virtualizaion uncomfortably way in terms of performace. 
Sometimes, however, system have to work long time without downtime, for example, 
factory automation. Those kind of system, they don't consider performance of system, 
they only  consider how long can system work or reducing downtime without human 
intervention (It's unpredictable behavior). In this case, virtualization offers many 
benefits.</p>
		</div><!-- .comment-content -->	</article><!-- .comment-body --></li>
  </ol><!-- .children --></li><!-- #comment-## -->
  <li id="comment-227" class="comment even thread-odd thread-alt depth-1 parent">
    <article id="div-comment-227"><b><a href="http://www.nico-maas.de/">Nico Maas</a></b>
     says: 18 March, 2015 at 2:30 pm	

		<div class="comment-content">
<p>I have not tested it myself, but this is some remarkable job! Thanks for your awesome 
   work :)!</p>
		</div><!-- .comment-content -->	

<div>Reply</div></article><!-- .comment-body -->
    <ol class="children">
      <li id="comment-229">
	<article id="div-comment-229">
	<b>Sergio L. Pascual</b> says: 18 March, 2015 at 5:06 pm

		<div class="comment-content">
<p>Thanks!</p>
		</div><!-- .comment-content --></article><!-- .comment-body --></li>
    </ol><!-- .children --></li><!-- #comment-## -->
  <li id="comment-228" class="comment even thread-even depth-1 parent">
    <article id="div-comment-228"><b>Matthias Cramer</b> says:	18 March, 2015 at 2:42 pm

		<div class="comment-content">
<p>Thats a great article, thanks. Would it be possible to do the opposite in cpu 
isolation that you did and dedicate 1 core to the native kernel and interropts and 
have 3 cores for virtualisation? This way it would be feasable to have more that one VM 
running...</p>
		</div><!-- .comment-content -->

		<div>Reply</div></article><!-- .comment-body -->
  <ol class="children">
    <li id="comment-230">
      <article id="div-comment-230"><b>Sergio L. Pascual</b> says: 18 March, 2015 at 
                                       5:09 pm	

		<div class="comment-content">
<p>Sure, you can use something like <code>isolcpus=1,2,3</code> on your 
<code>/boot/cmdline.txt</code>. You'll need to tweak QEMU a little too, to be able to 
specify which core you want to use from the command line (in my patch, the core number 
is hardcoded).</p>
		</div><!-- .comment-content -->

	<div>Reply</div>	</article><!-- .comment-body -->
    <ol class="children">
      <li id="comment-356" class="comment even depth-3">
	<article id="div-comment-356"><b>Dada</b> says: 8 August, 2015 at 2:10 pm	

		<div class="comment-content">
<p>Hi,<br>
Ok to use multi core for several VM instance. But how to allow a single VM to use 
several cores. Even if I specify several cores with the smp option when qemu is 
launching, only one core is used by the VM !<br>
Thanks</p>
		</div><!-- .comment-content -->

	</article><!-- .comment-body --></li><!-- #comment-## -->
    </ol><!-- .children --></li><!-- #comment-## -->
  </ol><!-- .children --></li><!-- #comment-## -->
  <li id="comment-231" class="comment odd alt thread-odd thread-alt depth-1">
    <article id="div-comment-231"><b>Alex Ellis</b> says: 18 March, 2015 at 5:22 pm

		<div class="comment-content">
<p>Ninja mastery at play.  Great article and good examples. What next?</p>
		</div><!-- .comment-content -->

	</article><!-- .comment-body --></li><!-- #comment-## -->
  <li id="comment-232" class="comment even thread-even depth-1">
    <article id="div-comment-232"><b>MY123</b> says: 19 March, 2015 at 6:51 pm	

		<div class="comment-content">
<p>The RPi2 has ARM JTAG on the GPIOs.</p>
		</div><!-- .comment-content -->

	</article><!-- .comment-body --></li><!-- #comment-## -->

  <li id="comment-280" class="comment odd alt thread-odd thread-alt depth-1 parent">
    <article id="div-comment-280"><b>Mihai</b> says: 1 June, 2015 at 3:21 pm	

		<div class="comment-content">
<p>Awesome tutorial. I failed initially to configure networking, but with some qemu net 
nic,tap hacks it finally worked, following all your steps.</p>
		</div><!-- .comment-content -->

		<div>Reply</div>	</article><!-- .comment-body -->
  <ol class="children">
    <li id="comment-395" class="comment even depth-2">
      <article id="div-comment-395"><b>Garrett</b> says: 20 November, 2015 at 6:51 pm 

		<div class="comment-content">
<p>Would you have the details on how you got the networking working on the 
   QEMU image?</p>
		</div><!-- .comment-content -->

	</article><!-- .comment-body --></li><!-- #comment-## -->
  </ol><!-- .children --></li><!-- #comment-## -->
  <li id="comment-307">
    <article id="div-comment-307"><b>nik</b> says: 2 July, 2015 at 4:49 am 

		<div class="comment-content">
<p>I got opensuse to boot but without the -net tap option. When i use the -net tap 
option, I get the following error: 

<PRE>
qemu-system-arm: -net tap: Device 'tap' could not be initialized.
</PRE>

Could you suggest how you fixed this error and enabled networking?</p>
		</div><!-- .comment-content -->

	</article><!-- .comment-body --></li><!-- #comment-## -->
  <li id="comment-320" class="comment even thread-odd thread-alt depth-1 parent">
    <article id="div-comment-320"><b>Icey590</b> says: 15 July, 2015 at 1:22 pm 

		<div class="comment-content">
<p>For your premade kernel, could you upload the modules?</p>
		</div><!-- .comment-content -->

		<div>Reply</div>	</article><!-- .comment-body -->
  <ol class="children">
    <li id="comment-360">
      <article id="div-comment-360"><b>Wonseok</b> says: 9 August, 2015 at 3:20 pm

		<div class="comment-content">
<p>In many normal cases, you could not insert the modules into prebuilt kernel.<br>
However, If prebuilt kernel has configuration for your module, you can insert your 
module.</p>

<p>Answer is that depends on your prebuilt kernel.</p>
				</div><!-- .comment-content -->

	</article><!-- .comment-body --></li><!-- #comment-## -->
  </ol><!-- .children --></li><!-- #comment-## -->
  <li id="comment-324" class="comment even thread-even depth-1">
    <article id="div-comment-324"><b>Fab</b> says: 16 July, 2015 at 5:25 pm 

		<div class="comment-content">
<p>Great tutorial. I have managed to run the guest (Linaro) on top of the Raspbian by 
following your tutorial. Now I am trying to install wiringPi library on the guest and 
trying to control the GPIO of the raspberryPi. The library is successfully installed 
but when I use the command "gpio readall" I get the message <code>"I see Hardware: 
ARM-Versatile Express - expecting BCM2708 or BCM2709"</code>. I have checked the list 
of available machines for the qemu-system-arm (qemu-system-arm -M help) but BCM2708 or 
BCM2709 are not listed. How can I access the GPIO of the raspberryPi from the guest 
(Linaro) ? Any suggestion or help will be highly appreciated. Thanks in advance.</p>
		</div><!-- .comment-content -->

	</article><!-- .comment-body --></li><!-- #comment-## -->
  <li id="comment-330" class="comment odd alt thread-odd thread-alt depth-1 parent">
    <article id="div-comment-330"><b>Kinnefix</b> says: 21 July, 2015 at 3:11 pm 

		<div class="comment-content">
<p>Hi, is it possible to compile the kernel from your repo for rpi2 with kernel version 
   4.0?</p>
		</div><!-- .comment-content -->

		<div>Reply</div>	</article><!-- .comment-body -->
  <ol class="children">
    <li id="comment-339">
      <article id="div-comment-339"><b>Sergio L. Pascual</b> says: 27 July, 2015 at 
                                       9:00 am

`		<div class="comment-content">
<p>That would require some effort to port the code to 4.x, but shouldn't be hard.</p>
		</div><!-- .comment-content -->

	</article><!-- .comment-body --></li><!-- #comment-## -->
  </ol><!-- .children --></li><!-- #comment-## -->
  <li id="comment-352">
    <article id="div-comment-352"><b>Stefan</b> says: 5 August, 2015 at 9:13 pm	

		<div class="comment-content">
<p>Hello, I followed the steps and everything was compiled sucessfully on RPi2. During 
boot I get:

<PRE>
...
[    0.000000] Kernel command line: ... isolcpus=3
...
[    0.154274] CPU: All CPU(s) started in HYP mode.
[    0.154301] CPU: Virtualization extensions available.
...
[    0.972826] kvm [1]: timer IRQ99
[    0.976111] kvm [1]: Hyp mode initialized successfully
...
</PRE>

<p>But when trying to start Qemu (Patched 2.2.1) I get the following:

<PRE>
MiniPi ~ # qemu-system-i386 -enable-kvm -cpu n270 -drive \
file=/root/HS-debian.qcow,if=ide,index=0,media=disk -net nic -net \
tap,ifname=tap0,script=no,downscript=no -m 512M -usb -vnc :1 -daemonize
</PRE>

<PRE>
"kvm" accelerator not found.
No accelerator found!
</PRE>


<p>Is KVM not supported for i386 on RPi2?</p>

<p>No way to accellerate? Read some threads emulating WinXP-Machines that where 
referring this post.</p>

<p>Thanks and best regards,<br>
Stefan</p>
		</div><!-- .comment-content -->

		<div>Reply</div>			</article><!-- .comment-body -->
  <ol class="children">
    <li id="comment-377">
      <article id="div-comment-377"><b>Sergio L. Pascual</b> says: 17 August, 2015 at 
                                       9:43 am	

		<div class="comment-content">
<p>Nope, by its own nature, virtualization only works when both Guest and Host use the 
same architecture. Otherwise, it would be emulation.</p>
		</div><!-- .comment-content -->

	</article><!-- .comment-body --></li><!-- #comment-## -->
  </ol><!-- .children --></li><!-- #comment-## -->
  <li id="comment-386" class="comment odd alt thread-odd thread-alt depth-1">
    <article id="div-comment-386"><b>chisight</b> says: 16 September, 2015 at 10:15 pm 
	
	<div class="comment-content">
<p>Might taskset work rather than patching qemu?</p>

<p>for using core 2 and 3 config.txt would have:

<PRE>
isolcpus=2,3
</PRE>

the command line would become:

<PRE>
taskset 0x0000000C qemu-system-arm -enable-kvm -smp 2 -m 256 -M vexpress-a15 -cpu \
host -kernel /home/pi/vexpress-zImage -dtb /home/pi/vexpress-v2p-ca15-tc1.dtb \
-append "root=/dev/vda console=ttyAMA0 rootwait" -drive if=none,file=/home/pi/opensuse-factory.img,id=factory \
-device virtio-blk-device,drive=factory -net nic,macaddr=02:fd:01:de:ad:34 -net \
tap -monitor null -serial stdio -nographic</p>

<pre>
		</div><!-- .comment-content -->

	</article><!-- .comment-body --></li><!-- #comment-## -->
  <li id="comment-390" class="comment even thread-even depth-1">
    <article id="div-comment-390"><b>Sebastjan</b> says: 18 October, 2015 at 1:44 am 

		<div class="comment-content">
<p>Is it possible for i386 emu instead of arm with your guide ? Well done sir!</p>
		</div><!-- .comment-content -->

	</article><!-- .comment-body --></li><!-- #comment-## -->
  <li id="comment-391" class="comment odd alt thread-odd thread-alt depth-1">
    <article id="div-comment-391"><b>Mallapuram Phanirajkiran</b> says: 26 October, 
                                     2015 at 7:46 pm 

		<div class="comment-content">
<p>Nice Article. YUP. Done it!!</p>
		</div><!-- .comment-content -->

	</article><!-- .comment-body --></li><!-- #comment-## -->
  <li id="comment-392" class="comment even thread-even depth-1">
    <article id="div-comment-392"><b>Vincent</b> says: 30 October, 2015 at 4:00 pm 

		<div class="comment-content">
<p>Hi, I've tried your guide and it works very well. I was wondering, have you tried 
with newer version of the Kernel something like 4.0+?</p>
		</div><!-- .comment-content -->

	</article><!-- .comment-body --></li><!-- #comment-## -->
  <li id="comment-393">
		<div>
	Pingback: <a href="https://www.quora.com/How-can-I-build-Cloud-Computing-Infrastructure-on-top-of-my-Raspberry-Pi#ans17095744">Quora</a> 
                </div></li><!-- #comment-## -->
  <li id="comment-394" class="comment even thread-even depth-1 parent">
    <article id="div-comment-394"><b>Garrett</b> says: 18 November, 2015 at 12:25 pm 

		<div class="comment-content">
<p>Great blog by the way! Just wondering if anybody managed to get the networking 
enabled on their OpenSUSE VM?  I have the VM up and running but I'm getting a few 
errors on start-up, most of which are in relation to networking. Any suggestions 
welcome!</p>
		</div><!-- .comment-content --> </article><!-- .comment-body -->
  <ol class="children">
    <li id="comment-402">
      <article id="div-comment-402"><b>Christian</b> says: 29 February, 2016 at 11:31 pm 

		<div class="comment-content">
<p>I used

<PRE>
-netdev user,id=net0 -device virtio-net-device,netdev=net0,mac=00:11:22:33:44:55
</PRE>

for network.</p>

<p>With tap network a bridge has to be set up an configured beforhand.<br>

<PRE>
-netdev tap,id=net0,script=/etc/qemu-ifup -device virtio-net-device,netdev=net0,mac=00:11:22:33:44:55
</PRE>

<p>/etc/network/interfaces:

<PRE>
auto lo br0
[other stuff]
# Bridge setup
iface br0 inet dhcp
    bridge_ports eth0
</PRE>

<p>/etc/qemu-ifup:

<PRE>
#!/bin/sh
set -x

switch=br0

if [ -n "$1" ];then
    tunctl -u `whoami` -t $1
    ip link set $1 up
    sleep 0.5s
    brctl addif $switch $1
    exit 0
else
    echo "Error: no interface specified"
    exit 1
fi
</PRE>

				</div><!-- .comment-content -->

	</article><!-- .comment-body --></li><!-- #comment-## -->
  </ol><!-- .children --></li><!-- #comment-## -->
  <li id="comment-396">
    <article id="div-comment-396"><b><a href="http://www.odin.com/products/virtuozzo/">Travis M</a></b> says: 5 December, 2015 at 6:32 am		

		<div class="comment-content">
<p>Excellent tutorial!  I am a Sr Engineer with Virtuozzo and we have been making 
Container / VM Virtualization for 15yrs but this makes me wonder how small I could make 
a cluster.  What I would love to know is if you could load our bare metal Virtuozzo 
load, Linux based, on 5x Pi's and then cluster the SD's together from the 5x using our 
software defined storage option built into Virtuozzo giving you fail over between the 
5 Pi's...  I have done it with 5x Lenovo Notebooks but it would be way cool done on 
some Raspberry's. Any thoughts on this or any desire in playing with some copies of our 
solution to see if it would work?  Just an awesome walk through either way.  Thanks for 
sharing and email me directly if you want to work on this project with me...</p>
		</div><!-- .comment-content -->

	</article><!-- .comment-body --></li><!-- #comment-## -->
  <li id="comment-401">
    <article id="div-comment-401"><b><a href="http://www.suxingyu.com/">su xing 
                                     yu</a></b> says: 17 February, 2016 at 3:48 am 

		<div class="comment-content">
<p>i am trying to run  car diagnosis software( vw vcds and toyota MiniVCI), which only 
support windows, on my raspberry pi2 .  this is very helpful</p>
		</div><!-- .comment-content -->

	</article><!-- .comment-body --></li><!-- #comment-## -->
  <li id="comment-403">
	<div>Pingback: <a href="http://bestbusinessappsandroid.com/virtualization-blog/">Virtualization Blog |</a></div></li><!-- #comment-## -->
  <li id="comment-406">
    <article id="div-comment-406"><b><a href="http://www.w3it.com/">Ian</a></b> says: 
                                     7 May, 2016 at 9:44 pm

		<div class="comment-content">
<p>Found your article and I am interested to know if you have done this with the 
Raspberry Pi 3? Are there any differences?</p>
		</div><!-- .comment-content -->

	</article><!-- .comment-body --></li><!-- #comment-## -->
</ol><!-- .comment-list -->

<A name="FifthItem"></a><h3>QEMU - Emulating Raspberry Pi the easy way 
<a href="https://web.archive.org/web/20131210001526/http://xecdesign.com/qemu-emulating-raspberry-pi-the-easy-way/">(Source Origin)</a>
</h3>

<h5>Important Notes:</h5>

<OL>
  <li>Root Image: <a href="https://web.archive.org/web/20140208070652/http://raspbian.org/RaspbianImages" target="_b">Pisces Images</a>
  <li>Kernel: <a href="https://web.archive.org/web/20131209235612/http://www.xecdesign.com/downloads/linux-qemu/kernel-qemu" 
target="_b">kernel-qemu</a>.  Save and "chmod 755 kernel-qemu"
     
     <P><a href="https://github.com/dhruvvyas90/qemu-rpi-kernel" target="_b">Qemu kernel 
        for emulating Rpi on QEMU</a> From the webpage, download the zip file from it. 
        These kernels are meant to be the kernels for pi, pi2. Pi3, too?  Hence, 
        <code>-M versatilepb</code> and <code>-cpu arm1176</code>
  <li>Username: raspbian
  <li>Passwd: raspbian
  <li> <code>cat Rpi-boot.sh</code>

<PRE>
#! /bin/bash 

qemu-system-arm -M versatilepb -m 256 -cpu arm1176 -kernel kernel-qemu \
     -hda rpi_pisces_r3.img \
     -append "rw earlyprintk loglevel=8 dwc_otg.lpm_enable=0 console=ttyAMA0,115200 console=tty1 root=/dev/sda3 rootfstype=ext4 elevator=deadline fsck.repair=yes rootwait" \
     -serial stdio
</PRE>
</OL>

<h5>The usual routine</h5>

<OL>
  <LI>Download the Rpi2 image zip file.
  <LI>Unzip the image .zip file to get *.img file
  <LI>sudo fdisk -lu *.img 

     <P> Usually we get two partitions.  The first one is fat32, the second is ext4.
  <LI>Offset=$((starting-sector * 512))

     <UL>
        <LI>Creating *-boot directory
        <LI>Mount the first partition via 

<PRE>
 $ sudo mount -o loop,offset=$Offset *.img /mnt/tmp 
 $ ls -l /mnt/tmp 
 $ cp /mnt/tmp/kernel7.img /mnt/tmp/bcm2079-rpi-2-b.dtb *-boot 
 $ sudo umount /mnt/tmp 
</PRE>
     </UL>
  <LI> Copy a working *Rpi2*boot.sh and edit the file accordingly. 
  <LI> Boot the image.  If fails with "kernel panic" message, 
  <LI> Mount the second partition, check the /mnt/tmp/etc/ld.so.preload file

    <P> If this file exists, comment its (usual) only line.

<PRE>
$ diff /mnt/tmp/etc/ld.so.preload /mnt/tmp/etc/ld.so.preload.orig
1c1
< # /usr/lib/arm-linux-gnueabihf/libarmmem.so
---
> /usr/lib/arm-linux-gnueabihf/libarmmem.so
<PRE>
  <LI> Boot the image again.  If still failed, move the *-boot/*dtd file to somewhere 
       else.  <code>cp 2015-11-21-raspbian-boot/bcm2709-rpi-2-b.dtb 
       *-boot/bcm2709-rpi-2-b.dtb-2015-11-21</code> and then  <code>ln -s 
       *-boot/bcm2709-rpi-2-b.dtb-2015-11-21 *-boot/bcm2709-rpi-2-b.dtb</code>

    <P> Usually, the later dtb can be sucessfully repalced by 2015-11-21 dtb.  But, 
        for Rpi2 4.4.*, we are out of luck.
  <LI> We then call in qemu-kernel and simulate the Rpi2 booting by the two 
 <code>"-M versatilepb"</code> and <code>"-cpu arm1176"</code> command line arguments.
</OL>

<p>This page will shows how to emulate an&nbsp;<a href="https://web.archive.org/web/20131210001526/http://infocenter.arm.com/help/topic/com.arm.doc.ddi0301h/DDI0301H_arm1176jzfs_r0p7_trm.pdf">ARM1176JZF-S</a>&nbsp;system the quick and easy way.</p>

<h4>Assumptions</h4>

<p>You have:</p>

<ul style="z-index: 40;">
  <li>QEMU -&nbsp;<a title="QEMU - Compiling for ARM (1176) emulation" href="https://web.archive.org/web/20131210001526/http://xecdesign.com/compiling-qemu/" target="_blank">Linux</a>&nbsp;or&nbsp;<a title="QEMU download for windows" href="https://web.archive.org/web/20131210001526/http://qemu.weilnetz.de/">Windows</a>. Make sure you have a suitable version (see 'Quick note on QEMU and ARM1176').</li>
  <li><a title="Raspberry Pi downloads page" href="https://web.archive.org/web/20131210001526/http://www.raspberrypi.org/downloads">A disk image for your distro of choice</a>

<ul style="z-index: 30;">
  <li>Raspian and Debian should work out of the box, however Arch Linux 
requires a few tweaks to work. These will not be explored in this 
article, as they can only be done in Linux.</li>
</ul>
</li>
  <li>Ability to&nbsp;<strong>read and follow</strong>&nbsp;instructions&nbsp;<strong>carefully</strong></li>
</ul>

<p><span id="more-45"></span></p>

<h4>Preparing the environment</h4>

<ol>
  <li>Create and enter the work directory.</li>
  <li>Download the linux kernel:

<ul style="z-index: 20;">
  <li><code>wget&nbsp;<a href="https://web.archive.org/web/20131210001526/http://xecdesign.com/downloads/linux-qemu/kernel-qemu">http://xecdesign.com/downloads/linux-qemu/kernel-qemu</a></code></li>
</ul>
</li>
  <li>&nbsp;Download and extract the disk image .img file to the working directory.</li>
  <li>All of the instructions will be carried out in this directory.</li>
</ol>

<h4>Check that you have everything</h4>

<ol>
  <li>Make sure you have <strong>kernel-qemu</strong> and your <strong>disk image</strong> files.</li>
  <li><code>qemu-system-arm -cpu ?</code>

<ul style="z-index: 10;">
  <li>The output should contain '<strong>arm1176</strong>'. If not, make sure you follow the <a title="QEMU - Compiling for ARM (1176) emulation" href="https://web.archive.org/web/20131210001526/http://xecdesign.com/compiling-qemu/" target="_blank">QEMU build tutorial</a>&nbsp;(linux)&nbsp;&nbsp;or <a title="QEMU binaries for windows" href="https://web.archive.org/web/20131210001526/http://lassauge.free.fr/qemu/">download the correct binaries</a>&nbsp;(windows).</li>
</ul>
</li>
</ol>
<p>If everything looks right, you should be ready to go.</p>

<h4>First boot</h4>

<ol>
  <li><code>qemu-system-arm -kernel kernel-qemu -cpu arm1176 -m 256 -M 
versatilepb -no-reboot -serial stdio -append "root=/dev/sda3 panic=1 
rootfstype=ext4 rw init=/bin/bash" -hda rpi_pisces_r3.img<br>
</code><p></p>

<ul style="z-index: 0;">
  <li>Windows users should use&nbsp;<strong>qemu-system-armw.exe</strong> instead of&nbsp;qemu-system-arm.</li>
  <li>Make sure you replace 'rpi_pisces_r3.img' with the name of your disc image.</li>
  <li>Do not try to use more than 256 MB of RAM, the value is hard-coded in and QEMU will not work correctly.</li>
  <li>You should be presented with a minimal shell. From here, you will need to make some modifications before you can boot properly.</li>
</ul>
</li>
  <li><code>nano /etc/ld.so.preload</code></li>
  <li>Put a # in front of the first line so that it looks like this:<br>
<blockquote><p><code>#/usr/lib/arm-linux-gnueabihf/libcofi_rpi.so</code></p></blockquote></li>
  <li>Press ctrl-x then y then enter to save and exit.</li>
  <li><strong>(Optional)</strong> Use steps 2 to 4 above to create a file&nbsp;/etc/udev/rules.d/90-qemu.rules with the following content:<br>
<blockquote><p><code>KERNEL=="sda", SYMLINK+="mmcblk0"<br>
KERNEL=="sda?", SYMLINK+="mmcblk0p%n",</code></p></blockquote>

<ul style="z-index: -10;">
  <li>The kernel sees the disk as /dev/sda, while a real pi sees 
/dev/mmcblk0. This will create symlinks to be more consistent with the 
real pi.</li>
</ul>
</li>
  <li><code>halt</code></li>
</ol>
<div>

<h4>First (proper) boot</h4>

<ol>
  <li><code>qemu-system-arm -kernel kernel-qemu -cpu arm1176 -m 256 -M 
versatilepb -no-reboot -serial stdio -append "root=/dev/sda3 panic=1 
rootfstype=ext4 rw" -hda rpi_pisces_r3.img</code>

<ul style="z-index: -20;">
  <li>This is the same command as before, but without <code>init=/bin/bash</code>.</li>
  <li>This will take a while, but will be much quicker on subsequent boots.</li>
</ul>
</li>
</ol>
</div>
<div><a href="https://web.archive.org/web/20131210001526/http://xecdesign.com/wp-content/uploads/2012/04/Screenshot-QEMU.png"><img class="aligncenter size-full wp-image-103" title="QEMU running raspbian" alt="QEMU running raspbian" src="https://web.archive.org/web/20140605111305im_/http://xecdesign.com/wp-content/uploads/2012/04/Screenshot-QEMU.png" height="521" width="660"></a></div>
<div>That's it, you should see the system starting to boot.</div>

<h4>Things to keep in mind</h4>

<ul style="z-index: -30;">
  <li>The&nbsp;disc image will only contain about 200MB of free space (if 
any at all) for you to play with, so don't expect to be able to install a
 full system. You can use DD to expand the image and then resize 
manually, but that is not within the scope of this tutorial.</li>
  <li>You may see a few steps failing while the image boots. That's 
normal, since QEMU cannot emulate ALL of the hardware exactly. Double 
check that all the important steps are fine, but in general, this isn't 
something to worry about.</li>
</ul>


<h4>Acknowledgements</h4>

<p><span style="text-decoration: underline;">kinsa</span> for figuring out the ld.so.preload business. <span style="text-decoration: underline;">Stevie-O</span> for testing. <a title="Raspberry Pi emulation for Windows" href="https://web.archive.org/web/20131210001526/http://xecdesign.com/qemu-emulating-raspberry-pi-the-easy-way/sourceforge.net/projects/rpiqemuwindows/" target="_blank"><span style="text-decoration: underline;">Mjlally</span></a> for finding a QEMU build that actually works on windows. <a href="https://web.archive.org/web/20131210001526/http://www.v13.gr/">v13</a> for a method to fix up ld.so.preload on windows.</p>


<div class="cat_tags clear">
<span class="category">Filed under: <a href="https://web.archive.org/web/20131210001526/http://xecdesign.com/kernel/" title="View all posts in Kernel" rel="category tag">Kernel</a>, <a href="https://web.archive.org/web/20131210001526/http://xecdesign.com/qemu/" title="View all posts in QEMU" rel="category tag">QEMU</a>, <a href="https://web.archive.org/web/20131210001526/http://xecdesign.com/raspberry-pi/" title="View all posts in Raspberry Pi" rel="category tag">Raspberry Pi</a>, <a href="https://web.archive.org/web/20131210001526/http://xecdesign.com/tutorials/" title="View all posts in Tutorials" rel="category tag">Tutorials</a></span>

<P>Leave a comment</a>

<P>Comments (146) Trackbacks (11)

<P><a name="comments"></a>

<div id="comentarii">

<ol class="commentlist">
  <li class="comment even thread-even depth-1" id="li-comment-38"><div id="comment-38">
<strong>Bob</strong> May 9th, 2012 - 00:26</a></div><div class="clear"></div></div>

<p>I can confirm this is working with the latest 64-bit Windows QEMU build using the following command line -<br>
qemu-system-arm -kernel kernel-qemu -cpu arm1176 -m 256 -M versatilepb 
-serial stdio -append "root=/dev/sda3 panic=1" -hda 
debian6-19-04-2012.img -clock dynticks</p>


<P> ( REPLY )

<ul style="z-index: -40;" class="children">
  <li class="comment odd alt depth-2" id="li-comment-39"><div id="comment-39">
<strong>Bob</strong> May 9th, 2012 - 00:28</a></div><div class="clear"></div></div>

<p>NOTE - I grabbed the QEMU binaries from <a href="https://web.archive.org/web/20131210001526/http://qemu.weilnetz.de/">http://xecdesign.com/downloads/linux-qemu/kernel-qemu</a> which worked with the Debian disk image on the RasPi main download site</p>


<P> ( REPLY )

<ul style="z-index: -50;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-3" id="li-comment-42"><div id="comment-42">
<strong>Shift</strong> May 10th, 2012 - 14:26</a></div><div class="clear"></div></div>

<p>Thanks, I have updated the post with the new info.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-100"><div id="comment-100">
<strong>Steve</strong> July 6th, 2012 - 02:40</a></div><div class="clear"></div></div>

<p>I used </p>

<p><a href="https://web.archive.org/web/20131210001526/http://qemu.weilnetz.de/w32/2012-06-28/qemu-system-arm.exe">http://qemu.weilnetz.de/w32/2012-06-28/qemu-system-arm.exe</a></p>

<p>But is complains of missing DLLs. </p>

<p>SDL.dll<br>
libcrypto.dll<br>
libcurl-4.dll<br>
libglib-2.0-0.dll<br>
libssl.dll</p>

<p>Some, but not all of them, can be found here</p>

<p><a href="https://web.archive.org/web/20131210001526/http://qemu.weilnetz.de/w32/mingw/">http://qemu.weilnetz.de/w32/mingw/</a></p>

<p>Cheers, Steve</p></li><!-- #comment-## -->
  <li class="comment even thread-even depth-1" id="li-comment-114"><div id="comment-114">
<div class="comment_content"><div class="comment-meta commentmetadata">
<div class="alignleft" style="padding-top:5px;"><strong>Razvan</strong> July 11th, 2012 - 09:30</a></div><div class="clear"></div></div>

<p>Sorry for asking suck a stupid question.</p>

<p>Is there a way to download all the necessarily qemu files from <a href="https://web.archive.org/web/20131210001526/http://qemu.weilnetz.de/">http://qemu.weilnetz.de</a> without take them one by one ?</p>


<P> ( REPLY )

<ul style="z-index: -60;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor odd alt depth-2" id="li-comment-691"><div id="comment-691">
<strong>Shift</strong> December 2nd, 2012 - 21:11</a></div><div class="clear"></div></div>

<p>AFAIK you don't need all of them. The one I know you need for sure is
 qemu-system-arm.exe. When I tried it just crashed on launch, but Steve 
(in the comment above yours) reports that <a href="https://web.archive.org/web/20131210001526/http://qemu.weilnetz.de/w32/2012-06-28/qemu-system-arm.exe">http://qemu.weilnetz.de/w32/2012-06-28/qemu-system-arm.exe</a> works.</p></li><!-- #comment-## -->
  <li class="comment even depth-2" id="li-comment-3916"><div id="comment-3916">
<div class="comment_content"><div class="comment-meta commentmetadata">
<div class="alignleft" style="padding-top:5px;"><strong>Rogel Garcia</strong> April 6th, 2013 - 07:53</a></div><div class="clear"></div></div>

<p>For Win64 dowload:<br>
/w64/dll/*.dll (all dlls)<br>
/w64/2012-06-28/qemu-system.arm.exe<br>
/w64/2012-06-28/keymaps/en-us</p>

<p>Put the dlls in the same directory of qemu-system.arm.exe and preserve the /keymaps subdirectory.</p>

<p>I could execute it with the following command:<br>
qemu-system-arm -M versatilepb -m 128M -nographic -kernel c:\Temp\arm\test.bin</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-292"><div id="comment-292">
<div class="comment_content"><div class="comment-meta commentmetadata">
<div class="alignleft" style="padding-top:5px;"><strong>Poulpatine</strong> September 11th, 2012 - 01:00</a></div><div class="clear"></div></div>

<p>Actually, you can expand your image file size without having to create a new one.</p>

<p>First, launch following command on host :<br>
dd if=/dev/zero bs=1M count=2048 >> raspbian.img<br>
(In this example, the file raspbian.img is expanded with 2 GB)</p>

<p>Then, launch your qemu, and inside the console, launch this : </p>

<p>PART_START=$(parted /dev/sda -ms unit s p |grep "^2" | cut -f 2 -d:)<br>
echo $PART_START # (to be sure that it's not empty).<br>
fdisk /dev/sda &lt;&lt;EOF<br>
p<br>
d<br>
2<br>
n<br>
p<br>
2<br>
$PART_START</p>

<p>p<br>
w<br>
EOF</p>

<p>Then reboot and launch resize2fs on /dev/root .</p>

<p>And, here you have your freshly expanded FS <img src="EmulatingRaspberryPi-Wheezy_files/icon_smile.gif" alt=":)" class="wp-smiley"> .</p>

<p>Mainly inspired from raspi-config script <img src="EmulatingRaspberryPi-Wheezy_files/icon_wink.gif" alt=";)" class="wp-smiley"> .</p>


<P> ( REPLY )

<ul style="z-index: -70;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-2" id="li-comment-692"><div id="comment-692">
<strong>Shift</strong> December 2nd, 2012 - 21:12</a></div><div class="clear"></div></div>

<p>Excellent tip, thanks.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment odd alt thread-even depth-1" id="li-comment-382"><div id="comment-382">
<strong>Joe Foobar</strong> October 18th, 2012 - 07:27</a></div><div class="clear"></div></div>

<p>Can you walk through how you built the kernel?</p>


<P> ( REPLY )

<ul style="z-index: -80;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-2" id="li-comment-604"><div id="comment-604">
<strong>Shift</strong> November 24th, 2012 - 12:50</a></div><div class="clear"></div></div>

<p>You can reach me on the #raspberrypi irc channel on freenode, I'll be happy to help.<br>
Edit: But also, there's the tutorial I wrote earlier which has the exact steps. =)<br>
<a href="https://web.archive.org/web/20131210001526/http://xecdesign.com/compiling-qemu/" title="QEMU - Compiling for ARM (1176) emulation" rel="nofollow"></a></p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-413"><div id="comment-413">
<div class="comment_content"><div class="comment-meta commentmetadata">
<div class="alignleft" style="padding-top:5px;"><strong>Steve Hobley</strong> October 27th, 2012 - 02:20</a></div><div class="clear"></div></div>

<p>This might be a noob question, but after getting RPi/Qemu running, 
how do I transfer cross-compiled binaries to it for testing? I don't 
seem to have an accessible network connection, or file system.</p>

<p>Is it a closed environment?</p>

<p>Steve</p>


<P> ( REPLY )

<ul style="z-index: -90;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-2" id="li-comment-605"><div id="comment-605">
<strong>Shift</strong> November 24th, 2012 - 12:51</a></div><div class="clear"></div></div>

<p>You should have a limited network access, but you can also mount he disc image from within linux to transfer the files.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment odd alt thread-even depth-1" id="li-comment-429"><div id="comment-429">
<strong>Bill</strong> October 29th, 2012 - 12:56</a></div><div class="clear"></div></div>

<p>Ok, I am using Fedora 17 with the qemu version 1.0.1 that is 
available via the repository.  I downloaded all of the various images 
from the raspberry site (2 wheezy debian and one Arch) and the 
kernel-qemu from your site.  I followed the directions for the 
qemu-system-arm command and it boots initially, but gets a "Kernel panic
 - not syncing: attempted to kill init!" and stops before getting to a 
log in prompt.</p>

<p>I don't know how to grab the boot log so I can't parse it in any 
better detail.  I do see that I get some errors at the command line 
related to pulseaudio, but I don't think that is the problem.  </p>

<p>Can you give any info on how to debug this thing?</p></li><!-- #comment-## -->
  <li class="comment even thread-odd thread-alt depth-1" id="li-comment-430"><div id="comment-430">
<strong>Bill</strong> October 29th, 2012 - 14:36</a></div><div class="clear"></div></div>

<p>A quick follow up... I tried each of the 3 images from the raspberry pi
 site; same result.  I have now moved on to ubuntu 12.04 with 
qemu-system-arm version 1.0.50; same result there.  Note; both of the 
linux distributions have been 64 bit.  I will try a 32 bit ubuntu next 
to see if that helps.</p></li><!-- #comment-## -->
  <li class="comment odd alt thread-even depth-1" id="li-comment-431"><div id="comment-431">
<strong>Bill</strong> October 29th, 2012 - 15:54</a></div><div class="clear"></div></div>

<p>Success.  Ubuntu 12.10 32 bit with qemu-system-arm version 1.2.  
Works fine.  Don't know which of the variables made the difference 
(ubuntu version, qemu version or 32 bit vs 64 bit), but my bet is on 32 
bit.</p>


<P> ( REPLY )

<ul style="z-index: -100;" class="children">
  <li class="comment even depth-2" id="li-comment-956"><div id="comment-956">
<strong>Eduard Gotwig</strong> December 16th, 2012 - 04:08</a></div><div class="clear"></div></div>

<p>I have problems with running Ubuntu 12.10 ARM HF.</p>

<p>I run version 1.3 under Ubuntu 12.04.2 LTS amd64 :</p>

<p>Missing initrd?</p>

<p><a href="https://web.archive.org/web/20131210001526/http://i.imgur.com/vQ0nw.png">http://i.imgur.com/vQ0nw.png</a>:</p>


<P> ( REPLY )

<ul style="z-index: -110;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor odd alt depth-3" id="li-comment-962"><div id="comment-962">
<strong>Shift</strong> December 16th, 2012 - 10:13</a></div><div class="clear"></div></div>

<p>The main problem is that Ubuntu targets ARMv7, whereas the Raspberry 
Pi CPU is ARMv6. Another problem is that in your screenshot, the root 
filesystem seems to be vfat, which wouldn't work anyway.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment even thread-odd thread-alt depth-1" id="li-comment-459"><div id="comment-459">
<strong>Angel Genchev</strong> November 5th, 2012 - 06:20</a></div><div class="clear"></div></div>

<p>Thanks -  works for me with -cpu arm1136-r2.<br>
With arm1176 the kernel crashed soon after starting the boot process. 
It's probably due to my laziness - my QEMU is latest stock, from Ubuntu 
Precise.<br>
I see only 256MB RAM despite i gave it 512 (need to emulate model B).  
Is it limit of the emulated CPU I set or it's configured somewhere in 
the raspbian image ?</p>


<P> ( REPLY )

<ul style="z-index: -120;" class="children">
  <li class="comment odd alt depth-2" id="li-comment-478"><div id="comment-478">
<strong>Angel Genchev</strong> November 8th, 2012 - 11:31</a></div><div class="clear"></div></div>

<p>Self answering: 256MB is hardcoded in the emulated versatile 
platform. If someone needs more memory, he should create a second RAW 
file for the qemu on a tmpfs (RAM disk) and setup there a swap file. 
1-2GB should be possible. Thus the emulated system will  efectively 
extend it's virtual memory.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment even thread-even depth-1" id="li-comment-595"><div id="comment-595">
<strong>MJL</strong> November 23rd, 2012 - 23:56</a></div><div class="clear"></div></div>

<p>I have had reasonable success using the windows binaries from here<br>
<a href="https://web.archive.org/web/20131210001526/http://lassauge.free.fr/qemu/">http://lassauge.free.fr/qemu/</a></p>

<p>On a separate note, this is an excellent site, very clear and useful information.</p></li><!-- #comment-## -->
  <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-911"><div id="comment-911">
<strong>Avaneesh</strong> December 14th, 2012 - 05:19</a></div><div class="clear"></div></div>

<p>Working on my Win XP 32-bit too....... Thanx...</p>


<P> ( REPLY )

<ul style="z-index: -130;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-2" id="li-comment-914"><div id="comment-914">
<strong>Shift</strong> December 14th, 2012 - 06:13</a></div><div class="clear"></div></div>

<p>Excellent, thanks for the feedback.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment odd alt thread-even depth-1" id="li-comment-1007"><div id="comment-1007">
<div class="comment_content"><div class="comment-meta commentmetadata">
<div class="alignleft" style="padding-top:5px;"><strong>xxtunisianoxx</strong> December 21st, 2012 - 10:06</a></div><div class="clear"></div></div>

<p>oss: Could not initialize DAC<br>
oss: Failed to open '/dev/dsp'<br>
oss: Reason: No such file or directory<br>
oss: Could not initialize DAC<br>
oss: Failed to open '/dev/dsp'<br>
oss: Reason: No such file or directory<br>
audio: Failed to create voice 'lm4549.out'<br>
VNC server running on '127.0.0.1:5900'<br>
Uncompressing Linux... done, booting the kernel.<br>
pflash_write: Unimplemented flash cmd sequence (offset 0000000000000000, wcycle 0x0 cmd 0x0 value 0xf000f0)<br>
pflash_write: Unimplemented flash cmd sequence (offset 0000000000000000, wcycle 0x0 cmd 0x0 value 0xf0)</p>


<P> ( REPLY )

<ul style="z-index: -140;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-2" id="li-comment-1008"><div id="comment-1008">
<strong>Shift</strong> December 21st, 2012 - 10:10</a></div><div class="clear"></div></div>

<p>Assuming it continues to boot, that's not something to worry about.</p>


<P> ( REPLY )

<ul style="z-index: -150;" class="children">
  <li class="comment odd alt depth-3" id="li-comment-1009"><div id="comment-1009">
<div class="comment_content"><div class="comment-meta commentmetadata">
<div class="alignleft" style="padding-top:5px;"><strong>xxtunisianoxx</strong> December 21st, 2012 - 12:45</a></div><div class="clear"></div></div>

<p>I moved on to an other Pc and, it works !!<br>
Now am facing an other problem<br>
sulogin: root account is locked, starting shell<br>
root@rasberrypi:~#<br>
(and it's mentioned before that the root filesystem is mounted on read only-mode)</p>

<p>thank you anyway <img src="EmulatingRaspberryPi-Wheezy_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>


<P> ( REPLY )

<ul style="z-index: -160;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-4" id="li-comment-1010"><div id="comment-1010">
<strong>Shift</strong> December 21st, 2012 - 12:48</a></div><div class="clear"></div></div>

<p>If you could give the full log, I could have a look and maybe see what's wrong.</p>


<P> ( REPLY )

<ul style="z-index: -170;" class="children">
  <li class="comment odd alt depth-5" id="li-comment-1011"><div id="comment-1011">
<div class="comment_content"><div class="comment-meta commentmetadata">
<div class="alignleft" style="padding-top:5px;"><strong>xxtunisianoxx</strong> December 21st, 2012 - 12:53</a></div><div class="clear"></div></div>

<p>Sorry it's too long but i copied every thing just because I don't what you are expecting !!!!<br>
(I used -append "root=/dev/sda3 rootwait console=ttyAMA0")<br>
<a href="https://web.archive.org/web/20131210001526/http://pastebin.com/gKfQBd0e">http://pastebin.com/gKfQBd0e</a></p>
<div class="reply"></div>
</div><div class="clear"></div></div></li><!-- #comment-## -->
  <li class="comment byuser comment-author-shift bypostauthor even depth-5" id="li-comment-1012"><div id="comment-1012">
<strong>Shift</strong> December 21st, 2012 - 12:57</a></div><div class="clear"></div></div>

<p>Can you pop into the #raspberrypi IRC channel on freenode?</p>
<div class="reply"></div>
</div><div class="clear"></div></div></li><!-- #comment-## -->
  <li class="comment byuser comment-author-shift bypostauthor odd alt depth-5" id="li-comment-1013"><div id="comment-1013">
<strong>Shift</strong> December 21st, 2012 - 13:13</a></div><div class="clear"></div></div>

<p>Looks like your disk image needs a bit of fixing. When you get that error, run 'fsck /dev/sda2' and let it do its thing.</p>
<div class="reply"></div>
</div><div class="clear"></div></div></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment even thread-odd thread-alt depth-1" id="li-comment-1014"><div id="comment-1014">
<div class="comment_content"><div class="comment-meta commentmetadata">
<div class="alignleft" style="padding-top:5px;"><strong>xxtunisianoxx</strong> December 21st, 2012 - 13:15</a></div><div class="clear"></div></div>

<p>Ok thank you anyway !</p></li><!-- #comment-## -->
  <li class="comment odd alt thread-even depth-1" id="li-comment-1023"><div id="comment-1023">
<strong>Patrick Loemker</strong> December 22nd, 2012 - 00:47</a></div><div class="clear"></div></div>

<p>Can some one please explain in detail how one of the previous posters meant it was possible to gain 512M of ram?</p>


<P> ( REPLY )

<ul style="z-index: -180;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-2" id="li-comment-1032"><div id="comment-1032">
<strong>Shift</strong> December 22nd, 2012 - 09:15</a></div><div class="clear"></div></div>

<p>Use the qemu-img tool to create a file. Add '-hdb yournewfile' to the
 qemu parameters. Onced booted, you can run 'mkswap /dev/sdb' and 
'swapon /dev/sdb' as root to use that file as swap. If you have trouble 
with it, let me know and I'll add a section about it to the article.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1059"><div id="comment-1059">
<strong>LukasH</strong> December 23rd, 2012 - 23:38</a></div><div class="clear"></div></div>

<p>Hello,</p>

<p>Thank you for this great tutorial, however I get no luck with this. I
 was trying it on Windows 7 x64. I've downloaded QEMU for windows x64 
listed here, kernel listed here and official rasbian for RPI.</p>

<p>when I try to run qemu, I get no error, but just blank black screen. Files stderr.txt and stdout.txt are blank.</p>

<p>Any ideas what's wrong?</p>


<P> ( REPLY )

<ul style="z-index: -190;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-2" id="li-comment-1060"><div id="comment-1060">
<strong>Shift</strong> December 23rd, 2012 - 23:41</a></div><div class="clear"></div></div>

<p>It's a bit hard to tell given that there's no output.  Could you try again using this binary?<br>
<a href="https://web.archive.org/web/20131210001526/http://qemu.weilnetz.de/w32/2012-06-28/qemu-system-arm.exe">http://qemu.weilnetz.de/w32/2012-06-28/qemu-system-arm.exe</a></p>


<P> ( REPLY )

<ul style="z-index: -200;" class="children">
  <li class="comment odd alt depth-3" id="li-comment-1127"><div id="comment-1127">
<strong>Matt</strong> December 28th, 2012 - 11:47</a></div><div class="clear"></div></div>

<p>I have the same problem on Win7 with both the QEMU 64bit and 32bit binaries from <a href="https://web.archive.org/web/20131210001526/http://qemu.weilnetz.de/">http://qemu.weilnetz.de/</a>. stdout produces the a Hex output</p>


<P> ( REPLY )

<ul style="z-index: -210;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-4" id="li-comment-1130"><div id="comment-1130">
<strong>Shift</strong> December 28th, 2012 - 19:05</a></div><div class="clear"></div></div>

<p>No idea, but if you figure it out what the problem is, please post back.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment odd alt depth-2" id="li-comment-2055"><div id="comment-2055">
<strong>()blivion</strong> January 23rd, 2013 - 16:49</a></div><div class="clear"></div></div>

<p>Same problem here. System: Win7 ult x64 AMD 7750. Build 7600.16917</p>

<p>Running (with any Pi image) the x86 ARM binary gives me error 
0xc000007b. And x64 binary gives me a black qemu screen. stderr.txt gets
 created, but is deleted when the (blank) qemu window is closed. There 
is nothing in the file while it exists. Stdout.txt gets filled with 24 
lines of garbled text, the first line is longer. All images pass hash 
checks. Clicking inside the blank window removes the mouse pointer from 
the screen and tells me that alt+ctl will "exit mouse grab".</p>

<p>I am using your guide for doing this. My steps are...</p>

<p>(1) Get and run the windows qemu installer from "http://qemu.weilnetz.de/w64/".<br>
(2) Get "qemu-system-arm.exe" from "http://qemu.weilnetz.de/w64/2012-12-04/"<br>
(3) Get all five *.ddl's from "http://qemu.weilnetz.de/w64/dll/"<br>
(4) Move the files from step 2-3 to "C:\Program Files (x86)\qemu" (default install directory.)<br>
(5) Get the RaspberryPi images from "http://www.raspberrypi.org/downloads"<br>
(6) decompress the images to qemu directory.<br>
(7) Run "qemu-system-arm -cpu ?" Confirm that 'arm1176' is in Stdout.txt.<br>
(8) In a command prompt, navigate to the qemu directory, do one of these two commands...</p>

<p>[code]qemu-system-arm -kernel kernel-qemu -cpu arm1176 -m 256 -M 
versatilepb -no-reboot -serial stdio -append "root=/dev/sda3 panic=1" 
-hda .img[/code]</p>

<p>*OR* (Command provided by Bob above)</p>

<p>[code]qemu-system-arm -kernel kernel-qemu -cpu arm1176 -m 256 -M 
versatilepb -serial stdio -append "root=/dev/sda3 panic=1" -hda .img 
-clock dynticks[/code]</p>

<p>Doing "qemu-system-arm -cpu ?" with the x64 binary gives me the 
expected list of sported cpus in Stdout.txt. So it would appear that 
qemu is installed and working correctly. However, I tried a non 
RaspberryPi ARM test image from "http://wiki.qemu.org/Testing" and it 
did the same thing.</p>


<P> ( REPLY )

<ul style="z-index: -220;" class="children">
  <li class="comment even depth-3" id="li-comment-2094"><div id="comment-2094">
<strong>()blivion</strong> January 24th, 2013 - 08:46</a></div><div class="clear"></div></div>

<p>EDIT: The *.img files are of course correct when I run the commands. Not blank as they are above.</p></li><!-- #comment-## -->
  <li class="comment odd alt depth-3" id="li-comment-4333"><div id="comment-4333">
<strong>cmcinroy</strong> May 11th, 2013 - 03:27</a></div><div class="clear"></div></div>

<p>Exact same result for me.</p>

<p>Will continue to work on it, but... I'm stumped for now.</p></li><!-- #comment-## -->
  <li class="comment even depth-3" id="li-comment-5310"><div id="comment-5310">
<strong>BenC</strong> June 17th, 2013 - 19:17</a></div><div class="clear"></div></div>

<p>Hi,<br>
Please refer to the answer to this stack overflow question with references dependency walker:<br>
<a href="https://web.archive.org/web/20131210001526/http://stackoverflow.com/questions/10492037/the-application-was-unable-to-start-correctly-0xc000007b">http://stackoverflow.com/questions/10492037/the-application-was-unable-to-start-correctly-0xc000007b</a></p>

<p>I am using Windows 7 x64<br>
I used dependency walker and found that "libpng14-14.dll" depends on 
"zlib1.dll". A 32 bit version of zlib1.dll was in my path which 
conflicted with the 64 bit qemu I had downloaded and installed. I did a 
search for zlib1.dll across my hard drive and found one in an 
application (Racket) that was in C:\Program Files\ (Which is where all 
the 64 bit apps are installed).<br>
I copied that zlib1.dll into my qemu installation folder and then it worked.</p>

<p>I had a hard time finding a 64 bit version of zlib1.dll on the net.</p>

<p>Hope that helps,<br>
Cheers,<br>
Ben.</p>


<P> ( REPLY )

<ul style="z-index: -230;" class="children">
  <li class="comment odd alt depth-4" id="li-comment-5320"><div id="comment-5320">
<strong>BenC</strong> June 17th, 2013 - 22:04</a></div><div class="clear"></div></div>

<p>Sadly, now I'm just getting a black window like others.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment even thread-even depth-1" id="li-comment-1132"><div id="comment-1132">
<strong>kgas</strong> December 28th, 2012 - 20:20</a></div><div class="clear"></div></div>

<p>Thanks, works nicely with Debian image. For arch linux the booting 
process fails after random seed  (dependency failure for /boot ...)</p>


<P> ( REPLY )

<ul style="z-index: -240;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor odd alt depth-2" id="li-comment-1133"><div id="comment-1133">
<strong>Shift</strong> December 28th, 2012 - 20:24</a></div><div class="clear"></div></div>

<p>To get arch working, you need to edit fstab and change mmcblk0 to 
sda. Also, you need to add the rw parameter to the append string.</p>


<P> ( REPLY )

<ul style="z-index: -250;" class="children">
  <li class="comment even depth-3" id="li-comment-1161"><div id="comment-1161">
<strong>kgas</strong> December 29th, 2012 - 16:58</a></div><div class="clear"></div></div>

<p>Thanks. It requires little work.<br>
- for record<br>
   mount the image(for how to <a href="https://web.archive.org/web/20131210001526/http://unix.stackexchange.com/questions/2661/mounting-a-img-file">http://unix.stackexchange.com/questions/2661/mounting-a-img-file</a>) and edit the fstab as mentioned and change the boot location to sda1.<br>
- remove the symbolic link in /etc/systemd for syslog (If not you can 
not login as the screen flooded with messages related to this) (why this
 required when journalctl takes care of this - I will check in their 
forum)</p>


<P> ( REPLY )

<ul style="z-index: -260;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor odd alt depth-4" id="li-comment-1163"><div id="comment-1163">
<strong>Shift</strong> December 29th, 2012 - 17:24</a></div><div class="clear"></div></div>

<p>I am pretty sure simply adding rw to the append string fixes the 
journald flood. This happens because without rw, the root filesystem is 
mounted as read only, journald can't write to it and fails to start, 
which causes the flood.</p>


<P> ( REPLY )

<ul style="z-index: -270;" class="children">
  <li class="comment even depth-5" id="li-comment-1169"><div id="comment-1169">
<strong>kgas</strong> December 30th, 2012 - 04:43</a></div><div class="clear"></div></div>

<p>shift, thanks. fstab needs to be updated for both /boot and /. the 
default is for /boot only. I need to figure out why the default option 
is not working. I need to go thro' your  qemu article to get 512 MB 
memory.</p>
<div class="reply"></div>
</div><div class="clear"></div></div></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment byuser comment-author-shift bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-1177"><div id="comment-1177">
<strong>Shift</strong> December 30th, 2012 - 15:10</a></div><div class="clear"></div></div>

<p>kgas, you'll need a swap disk/partition or a swap file for that. As 
Angel Genchev mentioned above, 256 is hard-coded into the versatile 
platform. There is work in progress to give qemu a proper raspberry pi 
target though, which looks promising.</p>


<P> ( REPLY )

<ul style="z-index: -280;" class="children">
  <li class="comment even depth-2" id="li-comment-1206"><div id="comment-1206">
<strong>kgas</strong> December 31st, 2012 - 23:51</a></div><div class="clear"></div></div>

<p>Thanks. To start with , I already put a 512 MB swap file. Good articles, keep it up</p>


<P> ( REPLY )

<ul style="z-index: -290;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor odd alt depth-3" id="li-comment-1211"><div id="comment-1211">
<strong>Shift</strong> January 1st, 2013 - 06:03</a></div><div class="clear"></div></div>

<p>Thanks, if you have any ideas for articles throw them at me. I don't have any, so the site is being neglected, heh.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment even thread-even depth-1" id="li-comment-1260"><div id="comment-1260">
<strong>JimD</strong> January 2nd, 2013 - 14:50</a></div><div class="clear"></div></div>

<p>Thanks for all the help.<br>
How to Create a larger image file.<br>
This seems to work on Ubuntu 12.04. I got the qemu source from Linaro and built it using the directions found on this website.</p>

<p>qemu-img create boot.img 4G<br>
sudo mkfs.ext4 boot.img<br>
sudo mount boot.img /mnt/b -t ext4 -o loop<br>
sudo mount -o loop,offset=$(( 512 * 122880)) 2012-10-28-wheezy-raspbian.img  /mnt/img<br>
cd /mnt/b<br>
sudo cp -R -a /mnt/img/* .<br>
cd -<br>
qemu-system-arm -kernel kernel-qemu -cpu arm1176 -m 256 -M versatilepb 
-no-reboot -serial stdio -append "root=/dev/sda panic=1" -hda boot.img</p>

<p>(note /dev/sda)</p>


<P> ( REPLY )

<ul style="z-index: -300;" class="children">
  <li class="comment odd alt depth-2" id="li-comment-1487"><div id="comment-1487">
<strong>kgas</strong> January 9th, 2013 - 01:42</a></div><div class="clear"></div></div>

<p>You need a fat32 partition for booting. To grow the image you need extra work (there are other methods too)<br>
  - create the image size you  need ( 4 GB is enough)<br>
  - Partition the image (first one for /boot fat32 (make this bootable) 
 rest for / - you can get lot of how to from search please)<br>
  - Mount the partitions and copy the files to the respective directory<br>
  - un mount  and boot with the new image ..</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment even thread-odd thread-alt depth-1" id="li-comment-1310"><div id="comment-1310">
<strong>Miguel Risco</strong> January 3rd, 2013 - 17:37</a></div><div class="clear"></div></div>

<p>Windows 7 x64:<br>
QEmu v1.3.0 from <a href="https://web.archive.org/web/20131210001526/http://lassauge.free.fr/qemu/release/Qemu-1.3.0-windows.zip">http://lassauge.free.fr/qemu/release/Qemu-1.3.0-windows.zip</a><br>
Kernel from  <a href="https://web.archive.org/web/20131210001526/http://xecdesign.com/downloads/linux-qemu/kernel-qemu" rel="nofollow">http://xecdesign.com/downloads/linux-qemu/kernel-qemu</a></p>

<p>Start with:<br>
qemu-system-armw.exe -M versatilepb -cpu arm1176 -hda Raspbian.img 
-kernel kernel-qemu -m 256 -serial stdio -append "root=/dev/sda3 
panic=1"</p>

<p>If set memory to any more than 256, then I get only a black screen and corrupted stdout.txt file. </p>

<p>The only issue the low resolution.</p>

<p>Good work, Thanks</p>


<P> ( REPLY )

<ul style="z-index: -310;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor odd alt depth-2" id="li-comment-1311"><div id="comment-1311">
<strong>Shift</strong> January 3rd, 2013 - 17:49</a></div><div class="clear"></div></div>

<p>Thanks for the feedback. I've added a note about the RAM.</p></li><!-- #comment-## -->
  <li class="comment even depth-2" id="li-comment-9527"><div id="comment-9527">
<strong>Mxrtuf</strong> October 14th, 2013 - 12:38</a></div><div class="clear"></div></div>

<p>Thank you very much it solved the black screen.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment odd alt thread-even depth-1" id="li-comment-1459"><div id="comment-1459">
<strong>mark andrus</strong> January 8th, 2013 - 03:15</a></div><div class="clear"></div></div>

<p>It is very nice idea!So interesting I am very thankful for this 
article. It helps me a lot by giving an idea about Raspberry Pi. Now i 
know that it is very useful. Just keep posting great ideas about 
Raspberry Pi.</p></li><!-- #comment-## -->
  <li class="comment even thread-odd thread-alt depth-1" id="li-comment-1684"><div id="comment-1684">
<strong>Raja</strong> January 15th, 2013 - 01:53</a></div><div class="clear"></div></div>

<p>I am successfully able to run the emulator now I want to install java
 on it. Can anyone tell me how to do this. Also how can I view the IP 
address of the emulator?I have started o use linux as well as Raspberry 
just recently.</p>

<p>Thanks in advance.</p></li><!-- #comment-## -->
  <li class="comment odd alt thread-even depth-1" id="li-comment-1905"><div id="comment-1905">
<strong>John Lane</strong> January 19th, 2013 - 08:55</a></div><div class="clear"></div></div>

<p>I just wanted to thank you for this. I've written a few scripts for 
the RPi and this article was very useful. I just came back when trying 
Arch hard-float and had a running system five minutes later. It's a 
shame one has to mount and edit the /etc/fstab but I'd already written a
 rpi_mount utility that made that painless. If anyone needing to modify 
/etc/fstab for Arch Linux would like to make use of what I've done then 
feel free to get it from my site (<a href="https://web.archive.org/web/20131210001526/https://github.com/johnlane/rpi-utils">https://github.com/johnlane/rpi-utils</a>).</p>


<P> ( REPLY )

<ul style="z-index: -320;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-2" id="li-comment-1912"><div id="comment-1912">
<strong>Shift</strong> January 19th, 2013 - 19:51</a></div><div class="clear"></div></div>

<p>Thanks, those scripts look quite handy.</p>


<P> ( REPLY )

<ul style="z-index: -330;" class="children">
  <li class="comment odd alt depth-3" id="li-comment-5053"><div id="comment-5053">
<strong>tribeonenki</strong> June 11th, 2013 - 06:12</a></div><div class="clear"></div></div>

<p>Trending: John Lane <a href="https://web.archive.org/web/20131210001526/https://github.com/johnlane/rpi-utils">https://github.com/johnlane/rpi-utils</a></p>

<p>For making #Archlinux working. QEMU will run that fast BEAST <img src="EmulatingRaspberryPi-Wheezy_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>

<p>(...is this Twiter?)</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment even thread-odd thread-alt depth-1" id="li-comment-2054"><div id="comment-2054">
<div class="comment_content"><div class="comment-meta commentmetadata">
<div class="alignleft" style="padding-top:5px;"><strong>Adi Linden</strong> January 23rd, 2013 - 16:31</a></div><div class="clear"></div></div>

<p>Works flawless on OS X Mountain Lion...</p></li><!-- #comment-## -->
  <li class="comment odd alt thread-even depth-1" id="li-comment-2238"><div id="comment-2238">
<strong>jose</strong> January 28th, 2013 - 01:59</a></div><div class="clear"></div></div>

<p>Great tutorial! I followed the instructions and now I have the Debian
 VBox  with the Raspberry Pi image running. However it seems there is a 
configuration problem with the mouse. After the Raspeberry Pi starts its
 LXDE desktop I can't control the mouse. It works fine in the host LXDE 
(in the Debian virtual machine), but when I click in Pi's windows it 
goes to the upper-left corner or desapears.<br>
Tried to include -usbdevice tablet command in the qemu-system-arm.exe command line, but it didn't make any diffference.</p>


<P> ( REPLY )

<ul style="z-index: -340;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-2" id="li-comment-2253"><div id="comment-2253">
<strong>Shift</strong> January 28th, 2013 - 12:44</a></div><div class="clear"></div></div>

<p>Are you  using something like VirtualBox or VMWare's mouse integration features? They don't play well with a guest running qemu.</p>


<P> ( REPLY )

<ul style="z-index: -350;" class="children">
  <li class="comment odd alt depth-3" id="li-comment-2812"><div id="comment-2812">
<strong>Lorna</strong> February 15th, 2013 - 04:02</a></div><div class="clear"></div></div>

<p>I have vmware server installed so I assume that explains why my mouse
 is all wonky while emulating raspberry in qemu even when I change the 
mouse sensitivity settings.  How would I disable the vmware servers's 
mouse integration?  I can only find how-to's with other vmware products.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment even thread-odd thread-alt depth-1" id="li-comment-2254"><div id="comment-2254">
<strong>jose</strong> January 28th, 2013 - 13:32</a></div><div class="clear"></div></div>

<p>Bingo!<br>
I disabled VirtualBox mouse integration and qemu's Raspberry desktop worked perfectly.<br>
Thanks a lot Shift.</p></li><!-- #comment-## -->
  <li class="comment odd alt thread-even depth-1" id="li-comment-2687"><div id="comment-2687">
<strong>Jordan314</strong> February 9th, 2013 - 10:50</a></div><div class="clear"></div></div>

<p>Hi,<br>
        Thanks for this tutorial. I couldn't get QEMU to work in 
mountain lion so I tried in windows 8 in parallels. When I run 
qemu-system-arm -cpu ? I get a blank line, and when I run the full 
command it complained about DLLS, and then when I installed those now I 
get a blank window that just hangs. Any thoughts?<br>
        I guess I'll go try it in mountain lion again, since Adi says it works.<br>
        Thanks-</p></li><!-- #comment-## -->
  <li class="comment even thread-odd thread-alt depth-1" id="li-comment-2688"><div id="comment-2688">
<strong>Jordan314</strong> February 9th, 2013 - 11:06</a></div><div class="clear"></div></div>

<p>The error I'm getting in Mountain Lion is:<br>
pflash_write: Unimplemented flash cmd sequence (offset 0000000000000000, wcycle 0x0 cmd 0x0 value 0xf000f0)<br>
pflash_write: Unimplemented flash cmd sequence (offset 0000000000000000, wcycle 0x0 cmd 0x0 value 0xf0)<br>
The qemu window launches, but I see:<br>
EXt3-fs (sda2): error: couldn't mount because of unsupported optional features (240)<br>
and then it kernel panics. Thoughts?</p>


<P> ( REPLY )

<ul style="z-index: -360;" class="children">
  <li class="comment odd alt depth-2" id="li-comment-4691"><div id="comment-4691">
<strong>rumbly</strong> May 29th, 2013 - 05:02</a></div><div class="clear"></div></div>

<p>I'm also getting this error as well right after the mouse set up. I'm
 not event seeing the rasbian's rasberri pi logo, just the linux logo. 
I'm running it on Mountain Lion 10.8 and the 2013 build of Rasbian 
Wheezy.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment even thread-even depth-1" id="li-comment-2793"><div id="comment-2793">
<strong>sfan5</strong> February 13th, 2013 - 04:15</a></div><div class="clear"></div></div>

<p>It does not work with 2013-02-09-wheezy-raspbian.img<br>
I downloaded 2012-10-28-wheezy-raspbian.img and it works perfectly, thanks.</p>


<P> ( REPLY )

<ul style="z-index: -370;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor odd alt depth-2" id="li-comment-2799"><div id="comment-2799">
<strong>Shift</strong> February 13th, 2013 - 19:18</a></div><div class="clear"></div></div>

<p>Thanks for letting me know. I don't have the time to look into why 
and find a workaround, but your comment should help others if they run 
into the same problem.</p>


<P> ( REPLY )

<ul style="z-index: -380;" class="children">
  <li class="comment even depth-3" id="li-comment-2826"><div id="comment-2826">
<div class="comment_content"><div class="comment-meta commentmetadata">
<div class="alignleft" style="padding-top:5px;"><strong>mid_kid</strong> February 16th, 2013 - 00:17</a></div><div class="clear"></div></div>

<p>i think it is beacuse the new img includes the raspi-config at first 
boot. It tries to enter the raspi-config but it does not work. If there 
is a way to disable the raspi-config it would be awesome</p>


<P> ( REPLY )

<ul style="z-index: -390;" class="children">
  <li class="comment odd alt depth-4" id="li-comment-2827"><div id="comment-2827">
<div class="comment_content"><div class="comment-meta commentmetadata">
<div class="alignleft" style="padding-top:5px;"><strong>mid_kid</strong> February 16th, 2013 - 00:21</a></div><div class="clear"></div></div>

<p>scratch that, the old image does the same</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment even depth-3" id="li-comment-3025"><div id="comment-3025">
<div class="comment_content"><div class="comment-meta commentmetadata">
<div class="alignleft" style="padding-top:5px;"><strong><a href="https://web.archive.org/web/20131210001526/http://alemartinazzo.blogspot.com/">Alexandre Martinazzo</strong> February 20th, 2013 - 08:16</a></div><div class="clear"></div></div>

<p>I couldn't get the new image to work (2013-02-09-wheezy-raspbian.img). This is the message I get</p>

<p><a href="https://web.archive.org/web/20131210001526/http://i.imgur.com/bOq2Df6.png?1">http://i.imgur.com/bOq2Df6.png?1</a></p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3243"><div id="comment-3243">
<div class="comment_content"><div class="comment-meta commentmetadata">
<div class="alignleft" style="padding-top:5px;"><strong>florent</strong> February 24th, 2013 - 01:53</a></div><div class="clear"></div></div>

<p>@Alexandre It's identical for me <img src="EmulatingRaspberryPi-Wheezy_files/icon_wink.gif" alt=";)" class="wp-smiley">  in waiting a solution THX</p></li><!-- #comment-## -->
  <li class="comment even thread-even depth-1" id="li-comment-3400"><div id="comment-3400">
<div class="comment_content"><div class="comment-meta commentmetadata">
<div class="alignleft" style="padding-top:5px;"><strong>Richard</strong> March 2nd, 2013 - 00:31</a></div><div class="clear"></div></div>

<p>@Alexandre<br>
And the same here.</p></li><!-- #comment-## -->
  <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3560"><div id="comment-3560">
<strong>Alex Thorne</strong> March 8th, 2013 - 01:54</a></div><div class="clear"></div></div>

<p>How did you make your kernel-qemu file? I can successfully boot with 
your kernel, but when I use either of the official kernels (kernel.img 
or kernel_emergency.img) or the cross compiled kernel image I made 
myself, I just get an empty window. What did you have to do to your 
kernel to make it work with qemu? (My kernels do load on the Pi itself.)</p>


<P> ( REPLY )

<ul style="z-index: -400;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-2" id="li-comment-3575"><div id="comment-3575">
<strong>Shift</strong> March 8th, 2013 - 18:11</a></div><div class="clear"></div></div>

<p>Check this blog for the article titled "Compiling an ARM1176 kernel for QEMU"</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment odd alt thread-even depth-1" id="li-comment-3591"><div id="comment-3591">
<strong>kinsa</strong> March 9th, 2013 - 14:30</a></div><div class="clear"></div></div>

<p>In order to run the latest image (2013-02-09-wheezy-raspbian.img) you need to comment out the contents of /etc/ld.so.preload.</p>

<p>Cheers!</p>


<P> ( REPLY )

<ul style="z-index: -410;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-2" id="li-comment-3592"><div id="comment-3592">
<strong>Shift</strong> March 9th, 2013 - 15:00</a></div><div class="clear"></div></div>

<p>Thanks!</p></li><!-- #comment-## -->
  <li class="comment odd alt depth-2" id="li-comment-3601"><div id="comment-3601">
<strong>meir</strong> March 10th, 2013 - 06:45</a></div><div class="clear"></div></div>

<p>I guess you mean one should apply that change to the img itself. How can I do that ? any advisable tool ? (on linux please)</p>


<P> ( REPLY )

<ul style="z-index: -420;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-3" id="li-comment-3609"><div id="comment-3609">
<strong>Shift</strong> March 10th, 2013 - 14:43</a></div><div class="clear"></div></div>

<p>I am a bit lazy, so here is a nutshell version. The only tools you 
need are 'file', 'mount' and a text editor. Use file on the img to find 
the startsector of the root partition. Multiply that number by 512. sudo
 mount whatever.img location -o offset=newnumber. Now you can go to 
wherever you mounted the partition and make the changes you need. When 
you're done, umount and the image should be ready.</p>


<P> ( REPLY )

<ul style="z-index: -430;" class="children">
  <li class="comment odd alt depth-4" id="li-comment-3709"><div id="comment-3709">
<strong>meir</strong> March 16th, 2013 - 20:24</a></div><div class="clear"></div></div>

<p>Thank you very much Shift, it helped me a lot. I eventually managed to get it works as you advised.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment even thread-odd thread-alt depth-1" id="li-comment-3614"><div id="comment-3614">
<strong>aWebpage</strong> March 10th, 2013 - 22:45</a></div><div class="clear"></div></div>

<p>Followed your instructions above and successfully loads to the login,
 but upon login it reports "Raspberry Pi has not been fully configured. 
Please run 'sudo raspi-config'" then throws you back to login to repeat 
the cycle.</p>

<p>This is under Ubuntu 12.4 LTS with RPi 2013-02-09-wheezy-raspbian.iso</p>

<p>Any ideas?</p>


<P> ( REPLY )

<ul style="z-index: -440;" class="children">
  <li class="comment odd alt depth-2" id="li-comment-3710"><div id="comment-3710">
<strong>aWebpage</strong> March 16th, 2013 - 21:17</a></div><div class="clear"></div></div>

<p>Getting a bit closer to getting it up and running. An example of the dd command would be really useful.</p>


<P> ( REPLY )

<ul style="z-index: -450;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-3" id="li-comment-3711"><div id="comment-3711">
<strong>Shift</strong> March 16th, 2013 - 21:19</a></div><div class="clear"></div></div>

<p>What dd command are you referring to?</p></li><!-- #comment-## -->
  <li class="comment odd alt depth-3" id="li-comment-3740"><div id="comment-3740">
<div class="comment_content"><div class="comment-meta commentmetadata">
<div class="alignleft" style="padding-top:5px;"><strong>joaoFigueiredo</strong> March 20th, 2013 - 07:05</a></div><div class="clear"></div></div>

<p>I'm having the exact same problem! Have you managed to solve it??</p>


<P> ( REPLY )

<ul style="z-index: -460;" class="children">
  <li class="comment even depth-4" id="li-comment-3871"><div id="comment-3871">
<strong>Dracs</strong> April 3rd, 2013 - 02:57</a></div><div class="clear"></div></div>

<p>Seems to be some problem with the last version of the image.<br>
With the armel image (2012-08-08), it doesn't occur.<br>
Probably didn't with the older versions of the Raspbian (but I didn't found it).</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment odd alt thread-even depth-1" id="li-comment-3644"><div id="comment-3644">
<strong>Mark L</strong> March 12th, 2013 - 05:52</a></div><div class="clear"></div></div>

<p>Thank you so much for these instructions!</p>

<p>Using a combination of the suggestions in these comments, I was 
finally able to get 2013-02-09-wheezy-raspbian working in Ubuntu 12.10 
64-bit.  I had to comment out /etc/ld.so.preload first as suggested, but
 it took me a while to figure out I had to mount the *second* partition,
 and I mounted it using</p>

<p><a href="https://web.archive.org/web/20131210001526/http://unix.stackexchange.com/questions/2661/mounting-a-img-file">http://unix.stackexchange.com/questions/2661/mounting-a-img-file</a></p>

<p>as suggested.</p>

<p>Then I ran into the file system corruption issue mentioned above and 
fixed it with "fsck /dev/sda2" as suggested.  CTRL+D to reboot.</p>

<p>Finally raspi-config came up, I went through everything there, and 
after another CTRL+D I was presented with a login prompt (a little 
disappointing since I set it to boot to the desktop after login).  
Panicked for a bit when it wouldn't let me in and some Googling showed 
that "pi" is the default login with "raspberry" the password.</p>

<p>Then I remembered I had reset the password using raspi-config, used that as a password, and I was in to a shell.</p>

<p>I started the desktop using "startx" and got the standard LXDE desktop!</p>

<p>Still not sure why I don't get a DE on startup, but anyway.  I might 
experiment around with Openbox as a DE and fbpanel as a panel - that 
combination is extremely efficient and lean!</p>

<p>Next...trying to get Gentoo on it.  :-O</p>

<p>All this is practice before my actual Raspberry Pi arrives...</p></li><!-- #comment-## -->
  <li class="comment even thread-odd thread-alt depth-1" id="li-comment-3687"><div id="comment-3687">
<strong>twig123</strong> March 15th, 2013 - 09:43</a></div><div class="clear"></div></div>

<p>I'm using Windows and trying to get QEMU to work with the latest Pi 
image (2013-02-09-wheezy-raspbian.img), can someone please explain how 
to go about editing the image so that this will work on windows? or 
provide the pre-modified image file?</p>


<P> ( REPLY )

<ul style="z-index: -470;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor odd alt depth-2" id="li-comment-3708"><div id="comment-3708">
<strong>Shift</strong> March 16th, 2013 - 19:30</a></div><div class="clear"></div></div>

<p>Does this patcher work? <a href="https://web.archive.org/web/20131210001526/http://xecdesign.com/downloads/linux-qemu/2013-02-09-wheezy-raspbian-qemu-patch.exe">http://xecdesign.com/downloads/linux-qemu/2013-02-09-wheezy-raspbian-qemu-patch.exe</a></p></li><!-- #comment-## -->
  <li class="comment even depth-2" id="li-comment-4280"><div id="comment-4280">
<strong>Martin Hinner</strong> May 5th, 2013 - 11:40</a></div><div class="clear"></div></div>

<p>add boot option init=/bin/sh to the kernel options.</p>

<p>Then it should boot to shell</p>

<p>mount / -o remount,rw</p>

<p>echo > /etc/ld.so.preload<br>
mount / -o remount,ro<br>
exit</p>

<p>Typing from memory, so I am sorry if something is not 100% accurate.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment odd alt thread-even depth-1" id="li-comment-3700"><div id="comment-3700">
<strong>twag</strong> March 15th, 2013 - 22:32</a></div><div class="clear"></div></div>

<p>i tried it with the last image (2013-02-09-wheezy-raspbian.img)<br>
i commented the context from /etc/ld.so.preload out und chroot works now fine. but i cant build anything.<br>
i get the following errors:</p>

<p>"you need autoconf version 2.59 or newer installed"</p>

<p>if i run /usr/bin/autoconf i get:<br>
This script requires a shell more modern than all the shells that i found on your system.</p>

<p>installed bash version is 4.2.37(1)-release</p>

<p>does anyone else have those problems?</p></li><!-- #comment-## -->
  <li class="comment even thread-odd thread-alt depth-1" id="li-comment-3822"><div id="comment-3822">
<strong>LIBER</strong> March 28th, 2013 - 05:17</a></div><div class="clear"></div></div>

<p>I followed all instructions related to setup of the system but I 
cannot run the game "Storm in a Teacup". Is there any solution ?</p>


<P> ( REPLY )

<ul style="z-index: -480;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor odd alt depth-2" id="li-comment-3825"><div id="comment-3825">
<strong>Shift</strong> March 28th, 2013 - 06:43</a></div><div class="clear"></div></div>

<p>I am going to guess that the game uses opengl es or some other gpu features which qemu doesn't not emulate.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment even thread-even depth-1" id="li-comment-4125"><div id="comment-4125">
<strong>Ryu1000</strong> April 22nd, 2013 - 03:27</a></div><div class="clear"></div></div>

<p>wget <a href="https://web.archive.org/web/20131210001526/http://xecdesign.com/downloads/linux-qemu/kernel-qemu" rel="nofollow">http://xecdesign.com/downloads/linux-qemu/kernel-qemu</a></p>

<p>It returns me ERROR 403</p>


<P> ( REPLY )

<ul style="z-index: -490;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor odd alt depth-2" id="li-comment-4128"><div id="comment-4128">
<strong>Shift</strong> April 22nd, 2013 - 12:05</a></div><div class="clear"></div></div>

<p>Thanks, I'll look into it.</p></li><!-- #comment-## -->
  <li class="comment byuser comment-author-shift bypostauthor even depth-2" id="li-comment-4129"><div id="comment-4129">
<strong>Shift</strong> April 22nd, 2013 - 12:17</a></div><div class="clear"></div></div>

<p>fixed</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-4256"><div id="comment-4256">
<strong>Thomas</strong> May 3rd, 2013 - 06:36</a></div><div class="clear"></div></div>

<p>Windows 8 User.  All directions followed and alot of trouble-shooting
 done.  I can get the QEmu process to start.  The process ramps to about
 18% of my CPU and the QEmu window remains blank.  Does anyone have any 
ideas?</p>


<P> ( REPLY )

<ul style="z-index: -500;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-2" id="li-comment-4262"><div id="comment-4262">
<strong>Shift</strong> May 3rd, 2013 - 14:47</a></div><div class="clear"></div></div>

<p>No idea, sorry. Give a different version of qemu a go. Check the directory for a file called stdout or stderr as well.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment odd alt thread-even depth-1" id="li-comment-4261"><div id="comment-4261">
<strong>DDragon</strong> May 3rd, 2013 - 13:09</a></div><div class="clear"></div></div>

<p>Im trying to emulate 2013-02-09-wheezy-raspbian.img using the settings listed here without any success.<br>
Im using QEMU 1.4.0 with the kernal-qemu version listed here (without any file extension).</p>

<p>All qemu seems to do is lock up wont post or anything site on a blank screen for about 2 mins then just fails to respond. </p>

<p>im running Windows 7 Ent 64 bit. Any help would be great.</p></li><!-- #comment-## -->
  <li class="comment even thread-odd thread-alt depth-1" id="li-comment-4537"><div id="comment-4537">
<div class="comment_content"><div class="comment-meta commentmetadata">
<div class="alignleft" style="padding-top:5px;"><strong>Razvan</strong> May 21st, 2013 - 23:11</a></div><div class="clear"></div></div>

<p>i got an error during booting even with the patch for the img file:</p>

<p>EXT3-fs (sda2): error: couldn't mount because  of unsupported optional features (240)</p>


<P> ( REPLY )

<ul style="z-index: -510;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor odd alt depth-2" id="li-comment-4539"><div id="comment-4539">
<strong>Shift</strong> May 21st, 2013 - 23:13</a></div><div class="clear"></div></div>

<p>It should continue booting without any problems after that message, 
if I recall correctly. If it isn't, there is some other problem.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment even thread-even depth-1" id="li-comment-4831"><div id="comment-4831">
<strong>tyler</strong> June 3rd, 2013 - 12:40</a></div><div class="clear"></div></div>

<p>when I boot it goes into an endless loop of displaying the license over and over.</p>


<P> ( REPLY )

<ul style="z-index: -520;" class="children">
  <li class="comment odd alt depth-2" id="li-comment-5106"><div id="comment-5106">
<strong>krt</strong> June 12th, 2013 - 12:09</a></div><div class="clear"></div></div>

<p>see the update note at the top of this post. either follow the 
instructions (should work for the new version of the raspbian-image too)
 or, if you are on windows, hope that Shift will publish a patcher for 
the new image. <img src="EmulatingRaspberryPi-Wheezy_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment even thread-odd thread-alt depth-1" id="li-comment-4847"><div id="comment-4847">
<strong>Tryph</strong> June 4th, 2013 - 05:20</a></div><div class="clear"></div></div>

<p>hi,</p>

<p>getting "403 forbidden" when trying to download kernel-qemu via wget<br>
my browser is able to download it but I can't do anything with it using tar or gzip...</p>


<P> ( REPLY )

<ul style="z-index: -530;" class="children">
  <li class="comment odd alt depth-2" id="li-comment-4848"><div id="comment-4848">
<strong>Tryph</strong> June 4th, 2013 - 05:43</a></div><div class="clear"></div></div>

<p>hmmm well, I misunderstood something...<br>
forgive the part of my previous post which talks about doing something with kernel-qemu and tar or gzip. <img src="EmulatingRaspberryPi-Wheezy_files/icon_mad.gif" alt=":x" class="wp-smiley"> </p>

<p>but still getting "403 forbidden"</p></li><!-- #comment-## -->
  <li class="comment byuser comment-author-shift bypostauthor even depth-2" id="li-comment-4857"><div id="comment-4857">
<strong>Shift</strong> June 4th, 2013 - 18:16</a></div><div class="clear"></div></div>

<p>Thanks for letting me know, I'll fix that when I get the chance.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment odd alt thread-even depth-1" id="li-comment-5801"><div id="comment-5801">
<div class="comment_content"><div class="comment-meta commentmetadata">
<div class="alignleft" style="padding-top:5px;"><strong>Michal Papis</strong> July 5th, 2013 - 14:08</a></div><div class="clear"></div></div>

<p>Based on this article I have created a Linux tool to create and manage multiple virtual machines <a href="https://web.archive.org/web/20131210001526/https://github.com/mpapis/myarm#readme">https://github.com/mpapis/myarm#readme</a> - thanks a lot for the instructions!</p></li><!-- #comment-## -->
  <li class="comment even thread-odd thread-alt depth-1" id="li-comment-6382"><div id="comment-6382">
<strong>Evan</strong> July 27th, 2013 - 23:43</a></div><div class="clear"></div></div>

<p>anybody know where the compatible img file is</p>


<P> ( REPLY )

<ul style="z-index: -540;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor odd alt depth-2" id="li-comment-6383"><div id="comment-6383">
<strong>Shift</strong> July 27th, 2013 - 23:46</a></div><div class="clear"></div></div>

<p>Check back in a few hours, I'll get a new patcher up.</p>


<P> ( REPLY )

<ul style="z-index: -550;" class="children">
  <li class="comment even depth-3" id="li-comment-6412"><div id="comment-6412">
<strong>M</strong> July 29th, 2013 - 06:33</a></div><div class="clear"></div></div>

<p>hi what does the patch do? can you specify please? just curious <img src="EmulatingRaspberryPi-Wheezy_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>


<P> ( REPLY )

<ul style="z-index: -560;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor odd alt depth-4" id="li-comment-6419"><div id="comment-6419">
<strong>Shift</strong> July 29th, 2013 - 10:58</a></div><div class="clear"></div></div>

<p>It takes the raspbian img file that you download from raspberrypi.org
 and patches it so that it works with qemu. The only changes are in 
/etc/ld.so.preload and /etc/fstab, although the fstab change is not 
really necessary.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment even thread-even depth-1" id="li-comment-6577"><div id="comment-6577">
<strong>Jscott</strong> August 4th, 2013 - 22:30</a></div><div class="clear"></div></div>

<p>I am running on Windows 7 64 bit. Ran qemu with the 
2013-05-25-wheezy-raspbian.img and got the "Please run 'sudo 
raspi-config'" message followed by a return to login to repeat the 
cycle.</p>

<p>Ran the patch. Now it hangs after the 2nd pflash_write message. Looks like I am going backwards.</p>

<p>The message above references a new patcher. Has that been done?</p>


<P> ( REPLY )

<ul style="z-index: -570;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor odd alt depth-2" id="li-comment-6580"><div id="comment-6580">
<strong>Shift</strong> August 4th, 2013 - 23:50</a></div><div class="clear"></div></div>

<p>I did get the patch out, but the pi folks released a new image the next day =(</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment even thread-odd thread-alt depth-1" id="li-comment-6579"><div id="comment-6579">
<strong>Jscott</strong> August 4th, 2013 - 22:32</a></div><div class="clear"></div></div>

<p>Nevermind....it finally came back and I got logged in.</p>

<p>Thanks.</p></li><!-- #comment-## -->
  <li class="comment odd alt thread-even depth-1" id="li-comment-6772"><div id="comment-6772">
<strong>Stavros</strong> August 13th, 2013 - 21:03</a></div><div class="clear"></div></div>

<p>So I know this is kind of noobish but oh well <img src="EmulatingRaspberryPi-Wheezy_files/icon_razz.gif" alt=":P" class="wp-smiley">  I compile a custom OS that was given as a tutorial and I have a now compile kernel.img I run Ubuntu 12.04 and when I run </p>

<p>qemu-system-arm -kernel kernel-qemu -cpu arm1176 -m 256 -M 
versatilepb -no-reboot -serial stdio -append "root=/dev/sda3 panic=1" 
-hda /kernel.img I get the following errors:</p>

<p>oss: Could not initialize DAC<br>
oss: Failed to open '/dev/dsp'<br>
oss: Reason: No such file or directory<br>
oss: Could not initialize DAC<br>
oss: Failed to open '/dev/dsp'<br>
oss: Reason: No such file or directory<br>
audio: Failed to create voice 'lm4549.out'<br>
kernel-qemu: No such file or directory<br>
qemu: could not load kernel 'kernel-qemu'</p>

<p>Any help or directions would be perfect <img src="EmulatingRaspberryPi-Wheezy_files/icon_smile.gif" alt=":)" class="wp-smiley"> \</p>


<P> ( REPLY )

<ul style="z-index: -580;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-2" id="li-comment-6777"><div id="comment-6777">
<strong>Shift</strong> August 14th, 2013 - 04:00</a></div><div class="clear"></div></div>

<p>Make sure kernel-qemu is in the same directory you're running that 
command from. Also, you have a '/' in front of kernel.img, which would 
indicate that it is located in /, which isn't a good idea. If I 
understood what you're trying to do though, it won't work. Is kernel.img
 a kernel or a disk image?</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-7116"><div id="comment-7116">
<strong>eBrain</strong> August 28th, 2013 - 02:25</a></div><div class="clear"></div></div>

<p>I'm trying to run qemu as the tutorial says: qemu-system-arm -kernel 
kernel-qemu -cpu arm1176 -m 256 -M versatilepb -no-reboot -serial stdio 
-append "root=/dev/sda3 panic=1" -hda 2013-07-26-wheezy-raspbian.img</p>

<p>neither with qemu-system-arm or qemu-system-armw does work...</p>

<p>I've downloaded the "kernel-qemu" file from the link the tutorial suggest algo.</p>

<p>Nothing. I'm using Windows 8 Pro 64 bits, I've also checked the file 
zlib (with Dependency Walker [from other post] and it's 64bits)</p>

<p>Would be great to have some help about this</p>


<P> ( REPLY )

<ul style="z-index: -590;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-2" id="li-comment-7131"><div id="comment-7131">
<strong>Shift</strong> August 28th, 2013 - 08:18</a></div><div class="clear"></div></div>

<p>Yup, it's some issue with the windows version of qemu and my 
kernel-qemu. You can find a generic ARM kernel elsewhere and use that. I
 know there is one included here <a href="https://web.archive.org/web/20131210001526/http://sourceforge.net/projects/rpiqemuwindows/files/qemu.zip/download">http://sourceforge.net/projects/rpiqemuwindows/files/qemu.zip/download</a> , but there should be others around.</p></li><!-- #comment-## -->
  <li class="comment byuser comment-author-shift bypostauthor odd alt depth-2" id="li-comment-7143"><div id="comment-7143">
<strong>Shift</strong> August 28th, 2013 - 11:49</a></div><div class="clear"></div></div>

<p>Ignore my last reply. It seems that kernel-qemu isn't the problem, 
just the qemu build. The link I gave you previously contains a qemu 
build that works fine.</p>


<P> ( REPLY )

<ul style="z-index: -600;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-3" id="li-comment-7183"><div id="comment-7183">
<strong>Shift</strong> August 29th, 2013 - 17:36</a></div><div class="clear"></div></div>

<p><a href="https://web.archive.org/web/20131210001526/http://lassauge.free.fr/qemu/">http://lassauge.free.fr/qemu/</a></p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment odd alt thread-even depth-1" id="li-comment-7127"><div id="comment-7127">
<div class="comment_content"><div class="comment-meta commentmetadata">
<div class="alignleft" style="padding-top:5px;"><strong>Arno Willig</strong> August 28th, 2013 - 07:09</a></div><div class="clear"></div></div>

<p>Hey this works on OSX (10.8.4), too!<br>
I compiled qemu and a cross-compiler by using brew.</p>


<P> ( REPLY )

<ul style="z-index: -610;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-2" id="li-comment-7132"><div id="comment-7132">
<strong>Shift</strong> August 28th, 2013 - 08:20</a></div><div class="clear"></div></div>

<p>That's good, but I am a little reluctant to change the title since I 
am not an OSX user myself and would not be able to offer help if people 
run into trouble with it.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-7653"><div id="comment-7653">
<strong>timus</strong> September 10th, 2013 - 14:38</a></div><div class="clear"></div></div>

<p>hey, what does append do: /dev/sda2<br>
What is the use of this option, will it harm my hard-drive partition /dev/sda2</p>


<P> ( REPLY )

<ul style="z-index: -620;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-2" id="li-comment-7767"><div id="comment-7767">
<strong>Shift</strong> September 12th, 2013 - 16:33</a></div><div class="clear"></div></div>

<p>Sorry for the late reply. Append is what determines the kernel 
parameters. Similar to what you would put in GRUB. Since the kernel sees
 the emulated system, /dev/sda2 is equivilent to /dev/mmcblk0p1 or the 
root filesystem on the image.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment odd alt thread-even depth-1" id="li-comment-7837"><div id="comment-7837">
<strong>sciurius</strong> September 13th, 2013 - 21:45</a></div><div class="clear"></div></div>

<p>"You may see a few steps failing while the image boots. That's normal, since QEMU cannot emulate ALL of the hardware exactly."</p>

<p>Given the popularity of the Raspberry PIs, why is there still no better (more complete) emulation?</p>


<P> ( REPLY )

<ul style="z-index: -630;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-2" id="li-comment-7872"><div id="comment-7872">
<strong>Shift</strong> September 14th, 2013 - 10:19</a></div><div class="clear"></div></div>

<p>In a way, there is. Look up Torlus' qemu on github. It's more 
complete, but I wouldn't say it's better. He emulates almost everything,
 but there are some important things missing, like the NIC, which there 
is no qemu emulation driver for yet. I would recommend using that qemu 
version for testing bare metal kernels and such, but I still think the 
method described in the article is what most people are after.</p>


<P> ( REPLY )

<ul style="z-index: -640;" class="children">
  <li class="comment odd alt depth-3" id="li-comment-7953"><div id="comment-7953">
<strong>sciurius</strong> September 15th, 2013 - 23:35</a></div><div class="clear"></div></div>

<p>Thanks for the pointer. It looks a bit rough, still.</p>

<p>Actually, the main things missing (in the standard qemu) are 
/dev/mmc* and 512MB memory. That shouldn't be hard to emulate, I think.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment even thread-odd thread-alt depth-1" id="li-comment-8191"><div id="comment-8191">
<strong>Harshvardhan</strong> September 20th, 2013 - 09:23</a></div><div class="clear"></div></div>

<p>Above wouldn't work with newer versions of Raspbian. Please see- <a href="https://web.archive.org/web/20131210001526/http://www.raspberrypi.org/phpBB3/viewtopic.php?f=29&amp;t=37386">http://www.raspberrypi.org/phpBB3/viewtopic.php?f=29&amp;t=37386</a>
 and update the post. I needed to add  "console=ttyAMA0" to append 
option get it started, don't know if it is necessory for everybody.</p>


<P> ( REPLY )

<ul style="z-index: -650;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor odd alt depth-2" id="li-comment-8192"><div id="comment-8192">
<strong>Shift</strong> September 20th, 2013 - 09:27</a></div><div class="clear"></div></div>

<p>Could you be more specific? I helped write the post you linked to and
 I also link to it in bold text at the very top of the article. Did I 
miss something? =S</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment even thread-even depth-1" id="li-comment-8268"><div id="comment-8268">
<strong>Gene</strong> September 21st, 2013 - 21:26</a></div><div class="clear"></div></div>

<p>does anyone know how to edit /etc/ld.so.preload on OSX? I couldn't 
get mount to work. I'm trying to use the new 2013-09-10 wheezy image.</p></li><!-- #comment-## -->
  <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-9289"><div id="comment-9289">
<div class="comment_content"><div class="comment-meta commentmetadata">
<div class="alignleft" style="padding-top:5px;"><strong>Thomas</strong> October 12th, 2013 - 00:22</a></div><div class="clear"></div></div>

<p>Hello. I've created an image and it's working in QEMU (with -m256) 
but it's not working with "-m 512". I've seen in Your article the note 
about 256M being hardcoded into QEMU, but what can be the reason, that 
the same image is not booting in Rapsberry Pi B (512M)?</p>


<P> ( REPLY )

<ul style="z-index: -660;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-2" id="li-comment-9348"><div id="comment-9348">
<strong>Shift</strong> October 12th, 2013 - 14:28</a></div><div class="clear"></div></div>

<p>Hey, is this a custom image you have made that runs in qemu but not 
on the pi? Could you provide a little more detail? How did you make the 
image? how is it partitioned? what's on the first partition? And so on...</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment odd alt thread-even depth-1" id="li-comment-9752"><div id="comment-9752">
<strong>Anon</strong> October 16th, 2013 - 19:26</a></div><div class="clear"></div></div>

<p>What network card is being emulated by default? I've tried<br>
-netdev user,id=user.0 -device lan9118,netdev=user.0<br>
-netdev user,id=user.0 -device smc91c111,netdev=user.0</p>

<p>but neither resulted in a network device that could be detected by the prebuilt kernel...</p>


<P> ( REPLY )

<ul style="z-index: -670;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-2" id="li-comment-9753"><div id="comment-9753">
<strong>Shift</strong> October 16th, 2013 - 19:34</a></div><div class="clear"></div></div>

<p>Definitely SMC 91c111</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-10385"><div id="comment-10385">
<strong>Oscar</strong> October 27th, 2013 - 07:45</a></div><div class="clear"></div></div>

<p>Hey! This is a really good explanation!! But I have a problem: I want
 to connect a web-cam and an arduino using qemu in my PC. Is this 
possible?? I connect them to my computer and qemu doesn't recognized 
them. If it's possible.. What do I have to do?? I hope you can help me. 
Thank you!</p>


<P> ( REPLY )

<ul style="z-index: -680;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor even depth-2" id="li-comment-10411"><div id="comment-10411">
<strong>Shift</strong> October 28th, 2013 - 00:28</a></div><div class="clear"></div></div>

<p>I am not too familiar with this. There may be some usb forwarding 
wizardy you can do, but qemu's own mechanism for this does not support 
ARM.</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment odd alt thread-even depth-1" id="li-comment-10678"><div id="comment-10678">
<div class="comment_content"><div class="comment-meta commentmetadata">
<div class="alignleft" style="padding-top:5px;"><strong>Todd S.</strong> November 2nd, 2013 - 01:34</a></div><div class="clear"></div></div>

<p>On Windows 7, the following step</p>

<p>nano /etc/ld.so.preload</p>

<p>fails with the following error:</p>

<p>[ Error writing /etc/ld.so.preload: Read-only file system ]</p>

<p>I have checked and made sure that the image file I am using is not read-only.  </p>

<p>Any help will be appreciated, thanks.</p>


<P> ( REPLY )

<ul style="z-index: -690;" class="children">
  <li class="comment even depth-2" id="li-comment-10679"><div id="comment-10679">
<div class="comment_content"><div class="comment-meta commentmetadata">
<div class="alignleft" style="padding-top:5px;"><strong>Todd S.</strong> November 2nd, 2013 - 02:07</a></div><div class="clear"></div></div>

<p>I was able to fix this by adding "rw" to the argument string for -append, like so:</p>

<p>-append "root=/dev/sda3 rw panic=1 rootfstype=ext4 ..."</p>


<P> ( REPLY )

<ul style="z-index: -700;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor odd alt depth-3" id="li-comment-10681"><div id="comment-10681">
<strong>Shift</strong> November 2nd, 2013 - 02:18</a></div><div class="clear"></div></div>

<p>Ah, thanks. Forgot to add the 'rw' when I updated the instructions, sorry.</p>


<P> ( REPLY )

<ul style="z-index: -710;" class="children">
  <li class="comment even depth-4" id="li-comment-10689"><div id="comment-10689">
<div class="comment_content"><div class="comment-meta commentmetadata">
<div class="alignleft" style="padding-top:5px;"><strong>Todd S.</strong> November 2nd, 2013 - 04:13</a></div><div class="clear"></div></div>

<p>Thank you for the confirmation.</p>

<p>BTW, I don't quite understand step #6 under "First boot" heading.  Is
 it an instruction to do a shutdown/restart?  If so, why, since a reboot
 follows anyways, as described in the next section, "First (proper) 
boot"?  Thanks again.</p>


<P> ( REPLY )

<ul style="z-index: -720;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor odd alt depth-5" id="li-comment-10699"><div id="comment-10699">
<strong>Shift</strong> November 2nd, 2013 - 08:39</a></div><div class="clear"></div></div>

<p>Good point. I meant 'reboot' as a command to enter, since the 
-no-reboot option means this will just shut down. I suppose I'll change 
it to something less ambiguous. Thanks again.</p>
<div class="reply"></div>
</div><div class="clear"></div></div></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment even thread-odd thread-alt depth-1" id="li-comment-11413"><div id="comment-11413">
<strong>Jim P.</strong> November 14th, 2013 - 01:15</a></div><div class="clear"></div></div>

<p>Yikes - I can boot, but QEMU seems to be messing with the keyboard.  
How do you get the correct keycodes for QEMU?  I tried "-k en-us", but 
that doesn't help.  It seems QEMU won't read keyboard input correctly.<br>
Also - the 64-bit QEMU doesn't boot up at all on Windows 7.</p>


<P> ( REPLY )

<ul style="z-index: -730;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor odd alt depth-2" id="li-comment-11505"><div id="comment-11505">
<strong>Shift</strong> November 15th, 2013 - 02:42</a></div><div class="clear"></div></div>

<p>Hey, could you give an example? In what way is qemu messing with your keyboard?</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
  <li class="comment even thread-even depth-1" id="li-comment-13119"><div id="comment-13119">
<strong>khaled</strong> November 26th, 2013 - 23:44</a></div><div class="clear"></div></div>

<p>Hi, how can i use a webcam with qemu raspberry ? i tried to add :   
-usb -usbdevice host:041e:4028 ; but that doesn't help . it gave me this
 error : qemu scsi 0.0.0.0 : Device offlined - not ready after error 
recovery<br>
thanks</p>


<P> ( REPLY )

<ul style="z-index: -740;" class="children">
  <li class="comment byuser comment-author-shift bypostauthor odd alt depth-2" id="li-comment-13668"><div id="comment-13668">
<strong>Shift</strong> November 29th, 2013 - 17:17</a></div><div class="clear"></div></div>

<p>I don't think you can</p></li><!-- #comment-## -->
</ul><!-- .children --></li><!-- #comment-## -->
</ol>

</div>

<a name="BuildQemuArmImage"></a><h3 class="entry-title">Build Your ARM Image for QEMU 
<a href="https://medicineyeh.wordpress.com/2016/03/29/buildup-your-arm-image-for-qemu/"
target="_b">(Source Origin)</a></h3>
	
	
  <p> Hello there! I've been using QEMU for a while. Recently, I updated my ARM image
and found that it has some difficulties to make an ARM image and could be an impossible 
job for those who are not familiar with embedded systems. I decided to write a 
comprehensive post to share some knowledge and how to build you own ARM image. This 
post could be very useful for those who want to know how Linux works with minimum 
requirements (root file system, in short <strong>rootfs</strong>). I use 
<strong>Vexpress</strong> as the target board in the tutorial.</p>

<p>This post is separated into three parts. The first part teaches you how a Linux 
works from a programmer's view who wants to port Linux on different platforms, such 
as QEMU. The second part is a tutorial for building a Linux kernel and rootfs running 
on QEMU. The last part is how to run existing kernel and images on QEMU. I believe 
this is very comprehensive for someone who want to learn or start a new project on 
ARM with QEMU or other ARM platforms.</p>

<h3>How Does a Linux Boot</h3>

<p>Many people know boot loader and some 
<a href="http://javigon.com/2012/08/24/from-poweron-to-android-the-boot-sequence/" 
target="_b">Linux boot sequence</a>. You can Google it to find the detail version. 
Here I would like to point out how QEMU boot Linux, which is the most central and 
fundamental part that one should understand!!</p>

<p>QEMU has a command argument called "-kernel". It is a very handy function!! Because 
of this feature, we don't need to bother the complicated boot sequence and problems on 
locating Kernel Image. We could just use "-kernel" to pass kernel image to QEMU. Then, 
QEMU will uncompress the kernel image to a proper memory location and start to run the 
kernel code. This function saves the time to figure out how to boot Kernel on QEMU.</p>

<p>Now, let's talk about how Linux Boot. If you read the paragraph above, then you are 
done!! All you need to do to run a kernel is to specify kernel image with "-kernel" 
argument to QEMU!!  Linux Kernel is a complete program that could be run without other 
shared libraries. So... that's it!! However!!! it is useless to run it that way because 
the only thing you can do is watching it printing messages which end up with "kernel 
panic .... unable to mount rootfs ...". This indicates that kernel could not complete 
"init" procedure. So, next section will teach you how to build a rootfs (root file 
system) to run a Linux Kernel correctly.</p>

<p>Finally, I would like to talk about kernel modules. Of cause, you can build all 
modules in your kernel, so that you don't need to deal with this problem. Since this 
is a tutorial, I want to dive deeper. Kernel modules are mostly drivers, both hardware 
drivers and software drivers.  For example, the Ethernet!  If the driver is a kernel 
module stored in root file system, Linux kernel will not be able to access the Internet 
before mounting the root file system. Another example is <strong>ext3, ext4</strong> 
driver, Linux Kernel must contain these basic file system driver in order to execute 
<strong>init procedure</strong> because the <strong>init files</strong> are located in 
root file system. It's somehow a very common problem which was very popular in early 
years. That's why we have the so-called <strong>initramfs</strong> or 
<strong>rootfs</strong>.  They are minimal file system images containing all kernel 
modules(.ko files), init procedure scripts, and necessary binaries to boot a full 
system. In the following tutorial, we will build the ethernet driver to a separate 
<strong>.ko</strong> file to illustrate the usage of a kernel module on ethernet.</p>

<p>Last part about booting Linux is device tree. A device tree is a tree data structure 
with nodes that describe the physical devices in a system. Linux reads the dtb(device 
tree blob) file to know the underlying hardware information and achieves portability. 
To further understand what information are included in the device tree, you can read the 
following articles.</p>

<ol>
  <li><a href="https://en.wikipedia.org/wiki/Device_tree">Wiki</a></li>
  <li><a href="http://elinux.org/images/a/a3/Elce2013-petazzoni-devicetree-for-dummies.pdf">Device Tree for Dummies</a></li>
  <li><a href="https://www.youtube.com/watch?v=wlXbeqtW0hI">Xilinx Zynq Example</a></li>
</ol>

<h3>How to Build an ARM Image</h3>

<p>To build ARM image running on QEMU. One should prepare the following things. These 
are all the repos we are going to cover in this section. To compile QEMU correctly, you 
might need to install some packages which are not mentioned in this article.</p>

<h4>Git Repos:</h4>

<ul>
  <li>QEMU: <a href="https://github.com/qemu/qemu">https://github.com/qemu/qemu</a></li>
  <li>Linux: <a href="https://github.com/torvalds/linux">https://github.com/torvalds/linux</a></li>
  <li>Busybox: (Deprecated, use the link below)</li>
  <li>Buildroot: git://git.buildroot.net/buildroot</li>
</ul>

<h4>Websites:</h4>

<ul>
  <li>Busybox: <a href="https://busybox.net/downloads/">https://busybox.net/downloads/</a></li>
  <li>Linaro ARM compiler(hard floating): <a href="https://releases.linaro.org/14.11/components/toolchain/binaries/arm-linux-gnueabihf/gcc-linaro-4.9-2014.11-x86_64_arm-linux-gnueabihf.tar.xz">gcc-linaro-4.9-2014.11-x86_64_arm-linux-gnueabihf.tar.xz</a></li>
  <li>Linaro ARM compiler: <a href="https://releases.linaro.org/14.11/components/toolchain/binaries/arm-linux-gnueabi/gcc-linaro-4.9-2014.11-x86_64_arm-linux-gnueabi.tar.xz" target="_blank">gcc-linaro-4.9-2014.11-x86_64_arm-linux-gnueabi.tar.xz</a></li>
</ul>

<h4>Prepare ARM compiler:</h4>

<p>First, download Linaro ARM compiler with "<strong>hf</strong>" (hard floating point 
calling convention) support!! You can download it from the link above. Extract it and 
put it in a proper location. Then, edit your .bashrc file and export an environment 
variable like this. Here I put it to "~/bin/linaro-arm-linux-gnueabihf". You need to 
modify this path to your location.</p>

<p><span style="color:#ff0000;">NOTE</span>: If you are doing this for other platforms 
without hardware floating points supports, use the one without "<strong>hf</strong>" 
instead. The following commands and scripts are written with 
<strong>linaro-arm-linux-gnueabihf</strong> compiler.</p>

<h5>~/.bashrc</h5>

<PRE>
 export PATH=~/bin/linaro-arm-linux-gnueabihf/bin:$PATH
 export PATH=~/bin/linaro-arm-linux-gnueabi/bin:$PATH
</PRE>

<p>Then, reload the file by:</p>

<PRE>
 ~$source ~/.bashrc
</PRE>

<h4>Compiling Linux Kernel:</h4>

<p>Here, I used <strong>Linux 4.4</strong> as my image version. You may or may not need 
some adjustments in newer versions. Download and compile Linux kernel with target board 
default configuration. There are two configurations you need to modify. First is 
"<b>CONFIG_FHANDLE</b>", please refer to 
<a href="https://www.olimex.com/forum/index.php?topic=3260.0">thread1</a>, 
<a href="http://www.gossamer-threads.com/lists/linux/kernel/1392896">thread2</a> for 
more information about why doing this. Second is the ethernet driver SMC91C1xxx.</p>

<p>Enable <strong>CONFIG_FHANDLE</strong> by pressing &lt;Y> key.</p>

<pre>
 General setup --->
[*] open by fhandle syscalls
</pre>

<p>Set <strong>SMC91C1xxx</strong> to loadable kernel module by pressing 
   &lt;M> key.</p>

<p><em>P.S. This  is just for tutorial use. For convenience, you don't need to make 
this change in the real situation. Just leave it included, shown as &lt;*>. If you 
mark it included, you might probably don't do anything with root file system since 
kernel modules are already included in your kernel image. If you mark it loadable, 
you will need to copy the kernel modules into root file system to make it work 
correctly.</em></p>

<pre>
 Device Drivers ---> Network device support ---> Ethernet driver support --->
[*]   SMC (SMSC)/Western Digital devices
&lt;M>     SMC 91C9x/91C1xxx support
&lt; >     SMSC LAN911[5678] support
&lt;M>     SMSC LAN911x/LAN921x families embedded ethernet support
</pre>

<PRE>
# Download linux</span>
~$ git clone <a href="https://github.com/torvalds/linux">https://github.com/torvalds/linux</a>
~$ cd linux
# Switch to version 4.4 (It's not necessary!!!!)
~/linux$ git checkout v4.4
# Load default config for target board
~/linux$ ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- make vexpress_defconfig
# Adjust some settings as mentioned above
~/linux$ ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- make menuconfig
# Compile the kernel
~/linux$ ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- make -j4
</PRE>

<p> </p>

<p>After successfully compiling Linux, the image we need is located in 
"arch/arm/boot/zImage" and device tree file for Vexpress is in 
"arch/arm/boot/dts/vexpress-v2p-ca9.dtb". That's it! You can now run it 
with QEMU to get a first taste by running:</p>

<PRE>
~/linux$ qemu-system-arm \
-M vexpress-a9 \
-dtb ./arch/arm/boot/dts/vexpress-v2p-ca9.dtb \
-kernel ./arch/arm/boot/zImage \
-append "console=ttyAMA0" \
--nographic</div>
</PRE>

<p>You will stop with a kernel panic, but it's fine. We still lack root file system 
for Linux kernel to complete the init procedure. Next, we are going to build a root 
file system for Linux to run.</p>

<pre>
 Please append a correct "root=" boot option; here are the available partitions:
1f00          131072 mtdblock0  (driver?)
1f01           32768 mtdblock1  (driver?)
Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)
CPU: 0 PID: 1 Comm: swapper/0 Not tainted 4.4.0+ #5
Hardware name: ARM-Versatile Express
[&lt;8001640c>] (unwind_backtrace) from [&lt;80012f28>] (show_stack+0x10/0x14)
[&lt;80012f28>] (show_stack) from [&lt;8025978c>] (dump_stack+0x88/0x98)
[&lt;8025978c>] (dump_stack) from [&lt;800a4cd0>] (panic+0xa0/0x204)
[&lt;800a4cd0>] (panic) from [&lt;80646254>] (mount_block_root+0x1c0/0x25c)
[&lt;80646254>] (mount_block_root) from [&lt;8064640c>] (mount_root+0x11c/0x124)
[&lt;8064640c>] (mount_root) from [&lt;8064656c>] (prepare_namespace+0x158/0x19c)
[&lt;8064656c>] (prepare_namespace) from [&lt;80645ef0>] (kernel_init_freeable+0x268/0x278)
[&lt;80645ef0>] (kernel_init_freeable) from [&lt;804b8f44>] (kernel_init+0xc/0xe8)
[&lt;804b8f44>] (kernel_init) from [&lt;8000f538>] (ret_from_fork+0x14/0x3c)
</pre>

<p> </p>

<a name="MakeRootFs"></a><h4>Root File System (rootfs)</h4>

<p>There are two ways to make a root file system, <a href="https://www.busybox.net/" 
target="_b">Busybox</a> and <a href="https://buildroot.org/" target="_b">Buildroot</a>. 
Busybox is a very old way to build a minimal root file system with only basic binaries. 
The user needs to create "/dev" and "/etc" folders with appropriate settings. On the 
other hand, Buildroot, integrating many pieces of stuff, is a very easy way with lots 
of supports of different libraries and binaries to build a root file system under your 
needs. Personally, I prefer Buildroot since build root is more easy to add some extra 
binaries, libraries and system services(systemV, systemd, etc.).</p>

<p>Download Busybox and set the setting as follows:</p>

<pre>
 Busybox Settings ---> Build Options --->
[*] Build BusyBox as a static binary (no shared libs)
</pre>

<p>Instructions:</p>

<PRE>
~$ cd busybox
# Adjust some settings as mentioned above
~/busybox$ ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- make menuconfig
# Compile Busybox
~/busybox$ ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- make -j4
</PRE>

<p>Next, you need to create basic device nodes and init scripts. I prepare the scripts 
to complete this task and make life easier. The origin is from this 
<a href="http://www.cnblogs.com/pengdonglin137/p/5023342.html">post</a>; I'm not the 
person who wrote this script, but I modified it.</p>

<PRE>
#!/bin/bash
#Remove old files
$ sudo rm -rf rootfs
$ rmdir tmpfs
$ rm -f a9rootfs.ext3
#Create new rootfs folder
$ sudo mkdir rootfs
$ sudo cp busybox/_install/* rootfs/ -raf
#Create folders required by Linux convention
$ sudo mkdir -p rootfs/proc/
$ sudo mkdir -p rootfs/sys/
$ sudo mkdir -p rootfs/tmp/
$ sudo mkdir -p rootfs/root/
$ sudo mkdir -p rootfs/var/
$ sudo mkdir -p rootfs/mnt/
#Download sample etc files with init procedure and copy it to rootfs
$ wget http://files.cnblogs.com/files/pengdonglin137/etc.</code>$ tar.gz
$ tar -xf ./etc.</code>$ tar.gz
$ sudo cp etc rootfs/ -arf
#Copy shared libraries to rootfs
$ sudo cp -arf ~/bin/linaro-arm-linux-gnueabihf/libc/usr/lib rootfs/
$ sudo rm rootfs/lib/*.a
$ sudo arm-linux-gnueabihf-strip rootfs/lib/*
#Create basic device nodes
$ sudo mkdir -p rootfs/dev/
$ sudo mknod rootfs/dev/tty1 c 4 1
$ sudo mknod rootfs/dev/tty2 c 4 2
$ sudo mknod rootfs/dev/tty3 c 4 3
$ sudo mknod rootfs/dev/tty4 c 4 4
$ sudo mknod rootfs/dev/console c 5 1
$ sudo mknod rootfs/dev/ttyAMA0 c 204 64
$ sudo mknod rootfs/dev/null c 1 3
#Create ext3 image file
$ dd if=/dev/zero of=a9rootfs.ext3 bs=1M count=$((32))
$ mkfs.ext3 a9rootfs.ext3
#Copy all the files in our rootfs to image
$ mkdir -p tmpfs
$ sudo mount -t ext3 a9rootfs.ext3 tmpfs/ -o loop
$ sudo cp -r rootfs/* tmpfs/
$ sudo umount tmpfs
$ rmdir tmpfs
</PRE>

<p>Now, you can run QEMU with this rootfs.</p>

<PRE>
~/$ qemu-system-arm \
-M vexpress-a9 \
-dtb ./linux/arch/arm/boot/dts/vexpress-v2p-ca9.dtb \
-kernel ./linux/arch/arm/boot/zImage \
-append "root=/dev/mmcblk0 console=ttyAMA0" \
-sd ./a9rootfs.ext3 \
--nographic</div>
</PRE>

<p> </p>

<p>You will see the following messages when you succeed.</p>

<pre>
<strong><span style="color:#339966;">mmc0: new SD card at address 4567
mmcblk0: mmc0:4567 QEMU! 32.0 MiB</strong>
input: AT Raw Set 2 keyboard as /devices/platform/smb/smb:motherboard/smb:motherboard:iofpga@7,00000000/10006000.kmi/serio0/input/input0
aaci-pl041 10004000.aaci: ARM AC'97 Interface PL041 rev0 at 0x10004000, irq 33
aaci-pl041 10004000.aaci: FIFO 512 entries
oprofile: using arm/armv7-ca9
NET: Registered protocol family 17
9pnet: Installing 9P2000 support
Registering SWP/SWPB emulation handler
Key type encrypted registered
rtc-pl031 10017000.rtc: setting system clock to 2016-03-29 08:30:44 UTC (1459240244)
ALSA device list:
#0: ARM AC'97 Interface PL041 rev0 at 0x10004000, irq 33
input: ImExPS/2 Generic Explorer Mouse as /devices/platform/smb/smb:motherboard/smb:motherboard:iofpga@7,00000000/10007000.kmi/serio1/input/input2
EXT4-fs (mmcblk0): mounting ext3 file system using the ext4 subsystem
EXT4-fs (mmcblk0): mounted filesystem with ordered data mode. Opts: (null)
VFS: Mounted root (ext3 filesystem) readonly on device 179:0.
Freeing unused kernel memory: 292K (80645000 - 8068e000)
random: nonblocking pool is initialized
mkdir: can't create directory '/var/lock': Read-only file system
<span style="color:#339966;"><strong>
Please press Enter to activate this console.
</strong>
</pre>

<p>The kernel successfully catches our SD card device with the name "QEMU" and the size 
32MB, mapping at address 4567.  After pressing Enter, you will login single user mode, 
which has only root account to do some maintenance. It is not convenient and sometimes 
causes problems on executing a binary compiled by yourself. It's just a toy that shows 
some functionality of Linux kernel but without user applications. So, I strongly suggest 
using Buildroot to generate a minimal rootfs.</p>

<a name="MakeRootFsViaBuildroot"></a><h4>Buildroot, Making Embedded Linux Easy</h4>

<OL>
  <LI><a href="https://github.com/buildroot/buildroot" target="_b">buildroot Github</a>
  <LI><a href="http://buildroot.org/docs.html" target="_b">Buildroot Online Docs</a>
  <LI><a href="https://buildroot.org/downloads/" target="_b">Buildroot Tarballs 
      Download</a>
  <LI><a href="http://elinux.org/Buildroot" target="_b">Buildroot Wiki</a>
  <LI><a href="" target="_b"></a>
  <LI><a href="" target="_b"></a>
  <LI><a href="" target="_b"></a>
  <LI><a href="https://git.busybox.net/buildroot/tree/board/raspberrypi/readme.txt" 
      target="_b">Build Rpi Image via Buildroot</a>
</OL>

<p>Busybox does not complete the full system we need. In addition, it is very 
complicated for developers to understand the whole Linux root filesystem and init 
procedures. Buildroot is the perfect solution which includes many repositories, 
binaries, libraries from elsewhere. Buildroot is a tool providing a <em>menuconfig</em> 
UI. Developers can quickly pick the system configurations they want and choose 
libraries, binaries to be installed in the rootfs. The only drawback of using buildroot 
is the download and compilation time since all the source codes, and even compilers are 
downloaded by its scripts to ensure the integrity and functionality. Trading the 
compilation time, developers save the time to build the environment and find the source 
codes of those libraries. I think it is very worthy.</p>

<p>To download(clone) and configure buildroot for our needs is super easy.</p>

<PRE>
~$ git clone git://git.buildroot.net/buildroot
~$ cd buildroot
# Please configure the settings listed below
~/buildroot$ make menuconfig
# Don't use -j
~/buildroot$ make
</PRE>

<p>Then, configure the basic, minimal rootfs as the following settings:</p>

<pre>
 #Set to the proper processor if you use different CPU
Target options --->
    Target Architecture (<strong>ARM (little endian)</strong>)
    Target Binary Format (<strong>ELF</strong>)
    Target Architecture Variant (<strong>cortex-A9</strong>)
    Target ABI (<strong>EABI</strong>)
    Floating point strategy (<strong>Soft float</strong>)
    ARM instruction set (<strong>ARM</strong>)
#I prefer this toolchain rather than buildroot's
Toolchain --->
    Toolchain type (<strong>External toolchain</strong>)
    Toolchain (<strong>Sourcery CodeBench ARM 2014.05</strong>)
    Toolchain origin (<strong>Toolchain to be downloaded and installed</strong>)
#This is the minimal setting one could use. 
System configuration --->
    Init system (<strong>BusyBox</strong>)
    [<strong>*</strong>] Enable root login with password
    (<strong>root</strong>) Root password
        /bin/sh (<strong>busybox' default shell</strong>)
#CPIO is more compatible and has readonly property when executing QEMU
Filesystem images --->
    [<strong>*</strong>] cpio the root filesystem (for use as an initial RAM filesystem)
</pre>

<p>Don't forget to set a password for root user here if you choose "Enable root login 
with password" as I do here. This sample setting is the basic setup I prefer to use. 
Actually, one could just set "Target options" to proper ARM CPU and "make". Here, my 
setting is trying to demonstrate some critical rootfs settings one might need to 
choose.<br> If you prefer fancy terminal instead of basic stuff, you can choose 
different init system. Like this:</p>

<pre>
 #This example uses different init system and shell
System configuration --->
    (hello_rootfs) System hostname
    (From Medicine's Blog) System banner
    #You can try <strong>systemd</strong> if you want :P
    Init system (<strong>systemV</strong>)
        #This is the default shell after login.
        /bin/sh (<strong>bash</strong>)
#Here, you can install multiple shells
Target packages ---> Shell and utilities --->
    -<strong>*</strong>- bash
    [<strong>*</strong>] zsh
</pre>

<p>There are many convenient binaries you can install. Ex: sudo, htop, tmux, vim, 
python, PHP, etc. and libraries, such as MySQL, zlib, libfuse, Javascript, x264, x265, 
etc. Exploring how many binaries and libraries we could install are very interesting! 
Take some time to look at all options! You might find something useful. Here I set 
default shell to bash for more powerful and complete functions. You can pick 
<em>zsh</em> or other shells you like as default.</p>

<p>After a successful compilation, your rootfs.cpio file will be located in 
"buildroot/output/images/rootfs.cpio"</p>

<p>You can use the kernel compiled previously with this new image.</p>

<PRE>
~/$ qemu-system-arm \
     -M vexpress-a9 \
     -dtb ./linux/arch/arm/boot/dts/vexpress-v2p-ca9.dtb \
     -kernel ./linux/arch/arm/boot/zImage \
     -append "console=ttyAMA0" \
     -initrd ./buildroot/output/images/rootfs.cpio \
     --nographic
</PRE>

<pre>
INIT: version 2.88 booting
Starting logging: OK
Initializing random number generator...
done.
Starting network...
INIT: Entering runlevel: 3

From Medicine's Blog
hello_rootfs login:
</pre>

<p>This message means you made it!! Now, it's running multi-user mode under systemV 
init procedure. You can log in "root" with password "root". If you fail to login, you 
might forget to set the password for root when configuring Buildroot.</p>

<p>That's it!! Enjoy your easy life with Buildroot.</p>

<h3>Arch Linux (ARM)</h3>

<p>Now, let's move to running a more rich and powerful Linux system on ARM QEMU. First, 
go to <a href="https://archlinuxarm.org/">ArchLinux|ARM</a> website and download latest 
image of Vexpress. In case you can't find it, here's the 
<a href="https://archlinuxarm.org/platforms/armv7/arm/versatile-express">link</a>. 
The commands to extract the file and build a root file system are very simple. 
Basically, what one needs to do is extract it in a folder.  But what we are going to 
do is to build a rootfs image for QEMU, we need to create an empty ext4 image and put 
everything in it.</p>

<PRE>
~/$ mkdir root
~/$ dd if=/dev/zero of=./arch_rootfs.ext4 bs=1M count=$((4 * 1024))
~/$ mkfs.ext4 ./arch_rootfs.ext4
~/$ sudo mount ./arch_rootfs.ext4 ./root
~/$ wget <a href="http://archlinuxarm.org/os/ArchLinuxARM-armv7-latest.tar.gz">http://archlinuxarm.org/os/ArchLinuxARM-armv7-latest.tar.gz</a>
~/$ sudo bsdtar -xpf ArchLinuxARM-armv7-latest.tar.gz -C ./root
~/$ sync
~/$ cp ./root/boot/zImage ./zImage_arch
~/$ cp ./root/boot/dtbs/vexpress-v2p-ca9.dtb ./
~/$ sudo umount ./root</div>
</PRE>

<p>Now, the linux Kernel and Arch rootfs are ready. We don't need boot loader here. You 
can now execute QEMU with the following command:</p>

<PRE>
~/$ qemu-system-arm \
     -M vexpress-a9 \
     -dtb ./vexpress-v2p-ca9.dtb \
     -kernel ./zImage_arch \
     -append "root=/dev/mmcblk0 rw roottype=ext4 console=ttyAMA0" \
     -drive if=sd,driver=raw,cache=writeback,file=./arch_rootfs.ext4 \
     --nographic \
     -snapshot
</PRE>

<p>The message should be like this. You can log in "root" with password "root".</p>

<pre>
 ......
Welcome to <span style="color:#00ccff;">Arch Linux ARM!
[  <span style="color:#99cc00;">OK  ] Reached target Paths.
[    6.270852] systemd[1]: Listening on udev Control Socket.
[  <span style="color:#99cc00;">OK  ] Listening on udev Control Socket.

......
Arch Linux 4.4.3-1-ARCH (ttyAMA0)

vexpress-ARM login:
</pre>

<p>I use "-snapshot" to make all the changes in the image volatile for safety. If I run 
QEMU without "-snapshot", all the changes I made on QEMU VM would be persistent. 
However, if I terminate QEMU with the signal "ctrl+a then press c", some files in the 
ext4 rootfs image might be broken. To prevent this tragedy, I use "-snapshot" to drop 
all the writes and changes. Of course, if one shutdown QEMU with "poweroff" command on 
guest OS, everything will be fine.</p>

<h4>Running Arch Linux With Your Kernel</h4>

<p>While running Arch with precompiled Linux kernel is easy, running Arch your kernel 
might be hard. There are three steps in total. Copy the Linux kernel config file from 
rootfs. Compile Linux with that ".config" file and compile kernel modules. Install your 
kernel modules on rootfs. That's it! It's really easy but a little bit complicated when 
you do it.</p>

<p>For those who are familiar with kernel compile, I prepare a script to do all the jobs 
and make our life easier. If you are familiar with the process of compiling kernel and 
kernel modules, you can do it by yourself as well. It's the same thing when you compile 
your own kernel and kernel modules on your x86 systems. Just don't forget to put kernel 
headers and kernel modules in a correct location in rootfs.</p>

<p>To retrieve the kernel config, you need to launch the image with QEMU. After you 
launch QEMU, all you need to do is zcat.</p>

<PRE>
# In QEMU Guest OS
~$ zcat /proc/config.gz
</PRE>

<p>Now, you can compile your own kernel. There's one thing you must do is removing all 
the external firmware drivers (CONFIG_EXTRA_FIRMWARE=""). They are not open source and 
hard to download. Unless you need to run linux on thoes developement boards, just remove 
them.</p>

<pre>
 # Make sure this field is empty
Device Drivers ---> Generic Driver Options --->
    ()    External firmware blobs to build into the kernel binary
</pre>

<PRE>
# Download linux
~$ git clone <a href="https://github.com/torvalds/linux">https://github.com/torvalds/linux</a>
~$ cd linux
# Switch to the version of your Arch ARM
~/linux$ git checkout v4.4
# Load the external config we extracted from Arch ARM
~/linux$ cp ../arch_arm_config ./.config
# Remove all external firmware drivers which we don't have
# And adjust some settings if you need
~/linux$ ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- make menuconfig
# Compile the kernel
~/linux$ ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- make -j4
# Package the files we need. Need about 5 mins
~/linux$ ../install.sh
# Mount Arch ARM rootfs image
~/linux$ cd ../
~$ sudo mount ./arch_rootfs.ext4 ./root
~$ cd linux
# Copy packed kernel modules and headers
~/linux$ sudo cp -r ./output/usr/lib/modules/* ../root/usr/lib/modules/
# Copy zImage to where you place kernel image
~/linux$ cp ./output/boot/zImage ../zImage_arch
# Un-mount Arch ARM rootfs image
~/linux$ cd ../
~$ sudo umount ./root
</PRE>

<p>Here's the script, please copy paste it manually. The variables from line 4 to 
line 15 are related to kernel version and naming. Just modify the version number to 
your Linux kernel version number. After executing this script, the output files are 
in "./output" folder. Please copy all the files in "./output" to your rootfs and copy 
"./output/boot/zImage" to where you place Linux kernel image.</p>

<h5>install.sh</h5>

<PRE>
#!/bin/bash
buildarch=4
KARCH=arm
pkgbase=linux-armv7
_srcname=linux-4.4
_kernelname=${pkgbase#linux}
_desc="ARMv7 multi-platform"
pkgver=4.4.0
pkgrel='ARCH'
_kernver="${pkgver}-${pkgrel}"
arch='armv7h'
pkgdir=./output
_basekernel=${_kernver%%-*}
_basekernel=${_basekernel%.*}
function generate_headers() {
    install -dm755 "${pkgdir}/usr/lib/modules/${_kernver}"
    install -D -m644 Makefile \
      "${pkgdir}/usr/lib/modules/${_kernver}/build/Makefile"
    install -D -m644 kernel/Makefile \
      "${pkgdir}/usr/lib/modules/${_kernver}/build/kernel/Makefile"
    install -D -m644 .config \
      "${pkgdir}/usr/lib/modules/${_kernver}/build/.config"
    mkdir -p "${pkgdir}/usr/lib/modules/${_kernver}/build/include"
    for i in acpi asm-generic config crypto drm generated keys linux math-emu \
      media net pcmcia scsi sound trace uapi video xen; do
       cp -a include/${i} "${pkgdir}/usr/lib/modules/${_kernver}/build/include/"
    done

    # copy arch includes for external modules
    mkdir -p ${pkgdir}/usr/lib/modules/${_kernver}/build/arch/$KARCH
    cp -a arch/$KARCH/include ${pkgdir}/usr/lib/modules/${_kernver}/build/arch/$KARCH/
    for i in dove exynos mvebu omap2 versatile; do
       mkdir -p ${pkgdir}/usr/lib/modules/${_kernver}/build/arch/$KARCH/mach-${i}
       cp -a arch/$KARCH/mach-${i}/include ${pkgdir}/usr/lib/modules/${_kernver}/build/arch/$KARCH/mach-${i}/
    done
    for i in omap orion samsung versatile; do
       mkdir -p ${pkgdir}/usr/lib/modules/${_kernver}/build/arch/$KARCH/plat-${i}
       cp -a arch/$KARCH/plat-${i}/include ${pkgdir}/usr/lib/modules/${_kernver}/build/arch/$KARCH/plat-${i}/
    done

    # copy files necessary for later builds, like nvidia and vmware
    cp Module.symvers "${pkgdir}/usr/lib/modules/${_kernver}/build"
    cp -a scripts "${pkgdir}/usr/lib/modules/${_kernver}/build"

    # fix permissions on scripts dir
    chmod og-w -R "${pkgdir}/usr/lib/modules/${_kernver}/build/scripts"
    mkdir -p "${pkgdir}/usr/lib/modules/${_kernver}/build/.tmp_versions"
    mkdir -p "${pkgdir}/usr/lib/modules/${_kernver}/build/arch/${KARCH}/kernel"
    cp arch/${KARCH}/Makefile "${pkgdir}/usr/lib/modules/${_kernver}/build/arch/${KARCH}/"
    cp arch/${KARCH}/kernel/asm-offsets.s "${pkgdir}/usr/lib/modules/${_kernver}/build/arch/${KARCH}/kernel/"

    # add docbook makefile
    install -D -m644 Documentation/DocBook/Makefile \
      "${pkgdir}/usr/lib/modules/${_kernver}/build/Documentation/DocBook/Makefile"

    # add dm headers
    mkdir -p "${pkgdir}/usr/lib/modules/${_kernver}/build/drivers/md"
    cp drivers/md/*.h "${pkgdir}/usr/lib/modules/${_kernver}/build/drivers/md"

    # add inotify.h
    mkdir -p "${pkgdir}/usr/lib/modules/${_kernver}/build/include/linux"
    cp include/linux/inotify.h "${pkgdir}/usr/lib/modules/${_kernver}/build/include/linux/"

    # add wireless headers
    mkdir -p "${pkgdir}/usr/lib/modules/${_kernver}/build/net/mac80211/"
    cp net/mac80211/*.h "${pkgdir}/usr/lib/modules/${_kernver}/build/net/mac80211/"

    # add dvb headers for external modules
    # in reference to:
    # <a href="http://bugs.archlinux.org/task/9912">http://bugs.archlinux.org/task/9912</a>
    mkdir -p "${pkgdir}/usr/lib/modules/${_kernver}/build/drivers/media/dvb-core"
    cp drivers/media/dvb-core/*.h "${pkgdir}/usr/lib/modules/${_kernver}/build/drivers/media/dvb-core/"

    # and...
    # <a href="http://bugs.archlinux.org/task/11194">http://bugs.archlinux.org/task/11194</a>
    mkdir -p "${pkgdir}/usr/lib/modules/${_kernver}/build/include/config/dvb/"
    cp include/config/dvb/*.h "${pkgdir}/usr/lib/modules/${_kernver}/build/include/config/dvb/"

    # add dvb headers for <a href="http://mcentral.de/hg/">http://mcentral.de/hg/</a>~mrec/em28xx-new
    # in reference to:
    # <a href="http://bugs.archlinux.org/task/13146">http://bugs.archlinux.org/task/13146</a>
    mkdir -p "${pkgdir}/usr/lib/modules/${_kernver}/build/drivers/media/dvb-frontends/"
    cp drivers/media/dvb-frontends/lgdt330x.h "${pkgdir}/usr/lib/modules/${_kernver}/build/drivers/media/dvb-frontends/"
    mkdir -p "${pkgdir}/usr/lib/modules/${_kernver}/build/drivers/media/i2c/"
    cp drivers/media/i2c/msp3400-driver.h "${pkgdir}/usr/lib/modules/${_kernver}/build/drivers/media/i2c/"

    # add dvb headers
    # in reference to:
    # <a href="http://bugs.archlinux.org/task/20402">http://bugs.archlinux.org/task/20402</a>
    mkdir -p "${pkgdir}/usr/lib/modules/${_kernver}/build/drivers/media/usb/dvb-usb"
    cp drivers/media/usb/dvb-usb/*.h "${pkgdir}/usr/lib/modules/${_kernver}/build/drivers/media/usb/dvb-usb/"
    mkdir -p "${pkgdir}/usr/lib/modules/${_kernver}/build/drivers/media/dvb-frontends"
    cp drivers/media/dvb-frontends/*.h "${pkgdir}/usr/lib/modules/${_kernver}/build/drivers/media/dvb-frontends/"
    mkdir -p "${pkgdir}/usr/lib/modules/${_kernver}/build/drivers/media/tuners"
    cp drivers/media/tuners/*.h "${pkgdir}/usr/lib/modules/${_kernver}/build/drivers/media/tuners/"

    # add xfs and shmem for aufs building
    mkdir -p "${pkgdir}/usr/lib/modules/${_kernver}/build/fs/xfs"
    mkdir -p "${pkgdir}/usr/lib/modules/${_kernver}/build/mm"

    # copy in Kconfig files
    for i in $( find . -name "Kconfig*"); do
       mkdir -p "${pkgdir}"/usr/lib/modules/${_kernver}/build/` echo ${i} |  sed 's|/Kconfig.*||'`
       cp ${i} "${pkgdir}/usr/lib/modules/${_kernver}/build/${i}"
    done
    #chown -R root.root "${pkgdir}/usr/lib/modules/${_kernver}/build"
    find "${pkgdir}/usr/lib/modules/${_kernver}/build" - type d - exec</code> $ chmod 755 {} \;

    # strip scripts directory
    find "${pkgdir}/usr/lib/modules/${_kernver}/build/scripts" - type f -perm -u+w 2>/dev/null | while</code> $ read binary ; do
      case "$(file -bi "${binary}")" in
        *application/x-sharedlib*) # Libraries (.so)
          /usr/bin/strip ${STRIP_SHARED} "${binary}";;
        *application/x-archive*) # Libraries (.a)
          /usr/bin/strip ${STRIP_STATIC} "${binary}";;
        *application/x-executable*) # Binaries
          /usr/bin/strip ${STRIP_BINARIES} "${binary}";;
      esac
    done

    # remove unneeded architectures
    rm -rf "${pkgdir}"/usr/lib/modules/${_kernver}/build/arch/{alpha,arc,arm26,arm64,avr32,blackfin,c6x,cris,frv,h8300,hexagon,ia64,m32r,m68k,m68knommu,metag,mips,microblaze,mn10300,openrisc,parisc,powerpc,ppc,s390,score,sh,sh64,sparc,sparc64,tile,unicore32,um,v850,x86,xtensa}
}
function generate_modules() {
    mkdir -p "${pkgdir}"/{lib/modules,lib/firmware}
    ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf-  make INSTALL_MOD_PATH="${pkgdir}" modules_install
    ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf-  make INSTALL_DTBS_PATH="${pkgdir}/boot/dtbs" dtbs_install
    cp arch/$KARCH/boot/zImage "${pkgdir}/boot/zImage"

    # remove build and source links
    rm -f "${pkgdir}"/lib/modules/${_kernver}/{ source,build}

    # remove the firmware
    rm -rf "${pkgdir}/lib/firmware"

    # gzip -9 all modules to save 100MB of space
    find "${pkgdir}" -name '*.ko' | xargs -P 2 -n 1  gzip -9

    # make room for external modules
    ln -s "../extramodules-${_basekernel}-${_kernelname:-ARCH}" "${pkgdir}/lib/modules/${_kernver}/extramodules"

    # add real version for building modules and running depmod from post_install/upgrade
    mkdir -p "${pkgdir}/lib/modules/extramodules-${_basekernel}-${_kernelname:-ARCH}"
    echo "${_kernver}" > "${pkgdir}/lib/modules/extramodules-${_basekernel}-${_kernelname:-ARCH}/version"

    # Now we call depmod...
    depmod -b "$pkgdir" -F System.map "$_kernver"

    # move module tree /lib -> /usr/lib
    cp -r "$pkgdir/lib" "$pkgdir/usr"
    rm -rf "$pkgdir/lib"
}
generate_headers
generate_modules
</PRE>

<p>At the end, I would like to comment something you need to do for a better experience 
of running Arch ARM on QEMU.</p>

<p>First, you might need to compile Linux kernel and enable "open by fhandle syscalls" 
as mentioned in this tutorial. Otherwise, you might wait for 1'30 for ttyAMA0. 
Reference: <a href="https://www.olimex.com/forum/index.php?topic=3260.0">thread1</a>, <a href="http://www.gossamer-threads.com/lists/linux/kernel/1392896">thread2</a>.</p>

<p>Second, there are many <strong>useless</strong> system services and 
<strong>unworkable</strong> services. You might be interested in 
<a href="http://www.ploxiln.net/arch_systemd_cleanup.html">clean up systemd</a>. 
After launching Arch ARM on QEMU and logging in, you can mask out all the 
unworkable(failed) services in your Arch ARM. After doing this, don't forget to 
gently "poweroff" Arch ARM.</p>

<h3>Choose of Linaro Compiler</h3>

<p>I would like to comment one of the most important things in developing the 
application and the root file system. The Compiler. There are many toolchain providers 
on the web, but there is one very popular and continuously updating their toolchain, 
Linaro. Linaro also provides Linux kernels for ARM. I didn't choose that because I'm 
more familiar with mainline Linux Kernel. However, Linaro's kernel is a good choice 
with security as well.</p>

<p>When you go to the <a href="https://releases.linaro.org/14.11/components/toolchain/binaries/" 
target="_blank">release page</a> of the toolchain, you will see different naming of 
compilers. If you are building a rootfs for ARM processor supporting hardware floating 
point unit, feel free to choose the one with "hf" suffix. If your processor does not 
have a hardware floating point unit, go for the one without "hf", otherwise, your codes 
might not work due to unsupported instructions. So, generally, you can use 
<strong>arm-linux-gnueabi</strong> for your processor.</p>

<p>arm-linux-gnueabi is the cross-toolchain package for the armel architecture. This 
toolchain implies the EABI generated by gcc's -mfloat-abi=softfp options.</p>

<p>arm-linux-gnueabihf is the cross-toolchain package for the armhf architecture. This 
toolchain implies the EABI generated by the gcc -mfloat-abi=hard option.</p>

<p>Specifying "soft" causes GCC to generate output containing library calls for 
floating-point operations. "softfp" allows the generation of code using hardware 
floating-point instructions, but still uses the soft-float calling conventions. "hard" 
allows generation of floating-point instructions and uses FPU-specific calling 
conventions.</p>

<ul>
  <li>arm-linux-gnueabi: The general tool chain with Linux dependency.</li>
  <li>arm-linux-gnueabihf: Utilize hardware floating point registers.</li>
  <li>armeb-linux-gnueabi: Big Endian.</li>
  <li>armeb-linux-gnueabihf: Big Endian. Utilize hardware floating point registers.</li>
  <li>arm-none-eabi: Bare metal. The general tool chain that does not rely on any 
      Linux Kernel.</li>
  <li>armeb-none-eabi: Bare metal. Big Endian.</li>
</ul>

<p>When you are compiling the Busybox and get an error with "libm.a" which is "-lm" in 
the args, just don't use static linking. If that doesn't help, download 
arm-linux-gnueabi<strong>hf</strong>. Because of unknown reason, the toolchain with 
"hf" suffix contains libm.a while the other one does not.</p>

<p>If you want to use Linaro's tool chain compiling Buildroot. You need to set the 
following options:</p>

<pre>
 Toolchain --->
    Toolchain (Custom toolchain)
    Toolchain origin (Pre-installed toolchain)
    (/PATH/TO/TOOL_CHAIN/linaro-arm-linux-gnueabihf) Toolchain path
    ($(ARCH)-linux-gnueabi) Toolchain prefix
        External toolchain gcc version (4.9.x)
        External toolchain kernel headers series (3.17.x)
    [*] Toolchain has C++ support?
</pre>

<p>It seems like Linaro's toolchain does not pass the eabi test of Buildroot, but we 
know it supports. We need to remove/delete two lines of the script in order to 
successfully compile the files. They are two "exit 1" codes at line number 360 and 
367 as shown below. The absolute position might be changed.</p>

<h5>toolchain/helpers.mk</h5>

<PRE>
#
# Check that the Buildroot configuration of the ABI matches the
# configuration of the external toolchain.
#
# $1: cross-gcc path
# $2: cross-readelf path
#
check_arm_abi = \
      __CROSS_CC=$(strip $1) ; \
      __CROSS_READELF=$(strip $2) ; \
      EXT_TOOLCHAIN_TARGET=`LANG=C $${__CROSS_CC} - v 2>&amp;1 |  grep ^Target |  cut -f2 -d ' '` ; \
      if !  echo $${EXT_TOOLCHAIN_TARGET} |  grep -qE 'eabi(hf)?$$' ; then \
           echo "External toolchain uses the unsuported OABI" ; \
<div class="line number360 index13 alt1 highlighted">           exit 1 \
      fi ; \
      if !  echo 'int main(void) {}' | $${__CROSS_CC} -x c -o $(BUILD_DIR)/.br-toolchain- test.tmp - ; then \
          rm -f $(BUILD_DIR)/.br-toolchain- test.tmp*; \
          abistr_$(BR2_ARM_EABI)='EABI'; \
          abistr_$(BR2_ARM_EABIHF)='EABIhf'; \
          echo "Incorrect ABI setting: $${abistr_y} selected, but toolchain is incompatible"; \
          exit 1 \
      fi ; \
      rm -f $(BUILD_DIR)/.br-toolchain- test.tmp*</div></td></tr>
</PRE>

<p>At the end, we need to strip out useless debugging information to reduce the size. 
I choose to keep symbol table for back tracing and function tracing function of my 
personal study. P.S. You can strip out 
all unnecessary things if you choose "strip" instead of "none" here. 
It's the default action.</p>

<PRE>
~/$ arm-linux-gnueabihf-strip --strip-debug --strip-dwo ./rootfs/lib/*
~/$ arm-linux-gnueabihf-strip --strip-debug --strip-dwo ./rootfs/usr/lib/*
</PRE>

<h3>QEMU Arguments</h3>

<p>QEMU has very complicated arguments. Here is an example to wrap up all the arguments 
I used in this tutorial.</p>

<ul>
  <li>-M: Specify the machine type. Use "-M help" to list all the supported boards</li>
  <li>-kernel: Specify the kernel image (bzimage)</li>
  <li>-dtb: Specify the hardware description file (Device Tree Blob)</li>
  <li>--nographic: Run QEMU without GUI. It's much more convenient.</li>
  <li>-append: Specify Linux kernel arguments. Here we set default console
      to ttyAMA0 which is one of QEMU's console when Guest OS/Applications 
      wants to print something on host's terminal.</li>
  <li>-drive: Specify a drive for the image. It can be SD card, flash, 
      etc. It's the lowest level of drive API. We use if(interface) SD card 
      with write back cache policy to save image access time.</li>
  <li>-sd: It is a higher level API to specify a drive. It's equivalent to "-drive 
      if=sd,file="</li>
  <li>-net nic,macaddr=$macaddr: Specify the mac address</li>
  <li>-net tap,vlan=0,ifname=tap0: Use tap device for internet access</li>
  <li>-snapshot: Don't write back to the original disk image.</li>
</ul>

<p>The following example can run QEMU with internet access. Please refer to QEMU's 
<a href="http://wiki.qemu.org/Documentation/Networking/NAT">NAT</a> and Arch's 
<a href="https://wiki.archlinux.org/index.php/QEMU#Creating_bridge_manually">QEMU 
networking</a> for further details.</p>

<PRE>
#!/bin/bash
#export an environment variable with format print
printf - v macaddr "52:54:%02x:%02x:%02x:%02x" $(( $RANDOM &amp; 0xff)) $(( $RANDOM &amp; 0xff )) $(( $RANDOM &amp; 0xff)) $(( $RANDOM &amp; 0xff ))
sudo qemu-system-arm \
      -M vexpress-a9 \
      -kernel ./zImage_arch \
      -dtb ./vexpress-v2p-ca9.dtb \
      --nographic \
      -append &amp;quot;root=/dev/mmcblk0 rw roottype=ext4 console=ttyAMA0&amp;quot; \
      -drive if=sd,driver=raw,cache=writeback, file=./arch_rootfs.ext4 \
      -net nic,macaddr=$macaddr \
      -net tap,vlan=0,ifname=tap0 \
      -snapshot
</PRE>

<p>You can now execute QEMU with the following command to run your kernel:</p>

<PRE>
~/$ qemu-system-arm \
     -M vexpress-a9 \
     -dtb ./vexpress-v2p-ca9.dtb \
     -kernel ./zImage_arch \
     -append "root=/dev/mmcblk0 rw roottype=ext4 console=ttyAMA0" \
     -drive if=sd,driver=raw,cache=writeback,file=./arch_rootfs.ext4 \
     --nographic \
     -snapshot
</PRE>

<p>For Arch Linux user, to set up networking for QEMU, you need to set up 
<a href="https://wiki.archlinux.org/index.php/Bridge_with_netctl">bridge with netctl</a> 
for your computer, then do follows:</p>

<PRE>
# Switch to bridge. qemu_bridge is the netctl config file
~$ netctl switch-to qemu_bridge
# Assign gateway IP for bridge (This enables host to ssh guest)
~$ sudo ip addr add dev br0 192.168.0.254/24
# IPv4 forwarding (This enables guest to connect to global net. -o must be the name of  bridge you used)
~$ sudo iptables -t nat -A POSTROUTING -o br0 -j MASQUERADE
~$ sudo sysctl -w net.ipv4.ip_forward=1
</PRE>

<p>Create/edit the following two files for QEMU's hook.</p>

<h5>/etc/qemu-ifup</h5>

<PRE>
#!/bin/sh
echo "Executing /etc/qemu-ifup"
echo "Bringing up $1 for bridged mode..."
sudo /usr/bin/ip link  set $1 up promisc on
echo "Adding $1 to br0..."
sudo /usr/bin/brctl addif br0 $1
sleep 2</div></td></tr>
</PRE>


<h5>/etc/qemu-ifdown</h5>

<PRE>
#!/bin/sh
echo "Executing /etc/qemu-ifdown"
sudo /usr/bin/ip link  set $1 down
sudo /usr/bin/brctl delif br0 $1
sudo /usr/bin/ip link delete dev $1</div></td></tr>
</PRE>

<p>Then, make them executable by:</p>

<PRE>
~$ sudo chmod +x /etc/qemu-ifup /etc/qemu-ifdown</div>
</PRE>

<p>In Arch ARM, you can enable the network by setting proper IP and correct gateway of 
br0.</p>

<PRE>
# Set IP
~$ ip addr add 192.168.0.2/24 dev eth0
# Set gateway to br0(host)
~$ ip route add default via 192.168.0.254 dev eth0
# Set DNS name server
~$ echo "nameserver 8.8.8.8" >> /etc/resolv.conf
# Use IPv4 mode of ping
~$ ping -4 8.8.8.8</div>
</PRE>

<h4>2 thoughts on "<span>Build Your ARM Image for QEMU</span>"</h4>

		
<ol class="comment-list">
  <li id="comment-53" class="comment even thread-even depth-1 parent highlander-comment">
	<article id="div-comment-53" class="comment-body">
	<footer class="comment-meta">
	<div class="comment-author vcard">
	<b class="fn"><a href="http://joakimbech.com/">Joakim Bech</a></b> <span class="says">says:</span></div><!-- .comment-author -->
	<div class="comment-metadata">
	<a href="https://medicineyeh.wordpress.com/2016/03/29/buildup-your-arm-image-for-qemu/#comment-53">
	<time datetime="2016-04-18T19:55:03+00:00">April 18, 2016 at 7:55 pm</time>
						</a>
	</div><!-- .comment-metadata -->

	</footer><!-- .comment-meta -->

	<div class="comment-content">
<p>Excellent tutorial! I followed this with joy. I'm very familiar with cpio based root 
fs (the first in your tutorial), but I was searching the net for a buildroot tutorial 
(since I never used it) and I found your page.</p>

<p>I think I spotted two minor issues. Firstly, under the Arch Linux section the line:<br>
bsdtar -xpf ArchLinuxARM-armv7-latest.tar.gz -C ./root</p>

<p>That must also be called with sudo rights, otherwise you're not allowed to untar to 
the ./root folder. Secondly, you use different naming in the "install.sh" script 
compared to the text. In the install.sh script pkgdir is "build", but in the text, above 
you instead tell the reader that built files are in the "output" folder. If you ensure 
that you have the correct paths, then everything works fine. But, for a newbie, new to 
all this, there is a risk they get stuck here. So I'd suggest that you update one of 
them.</p>

<p>Again, thanks for a well written tutorial!</p>

<p>P.S. I'm working at Linaro ... with security,  not with toolchains etc, but when I 
find some time I'll have chat with a toolchain engineer, eventually they know why the 
buildroot test fails in the Linaro toolchain.</p>

<p>// Cheers<br>Joakim</p>
		</div><!-- .comment-content -->

	<div class="reply"><a href="https://medicineyeh.wordpress.com/2016/03/29/buildup-your-arm-image-for-qemu/?replytocom=53#respond">Reply</a></div>			
</article><!-- .comment-body -->

<ol class="children">
  <li id="comment-60" class="comment byuser comment-author-medicinehy-2 bypostauthor odd alt depth-2 highlander-comment">
  <article id="div-comment-60" class="comment-body">
	<footer class="comment-meta">
	<div class="comment-author vcard">
	<b class="fn"><a href="https://medicineyeh.wordpress.com/">Medicine</a></b> 
        <span class="says">says:</span></div><!-- .comment-author -->

	<div class="comment-metadata">
  <a href="https://medicineyeh.wordpress.com/2016/03/29/buildup-your-arm-image-for-qemu/#comment-60"><time datetime="2016-05-02T12:32:40+00:00">May 2, 2016 at 12:32 pm</time></a>
	</div><!-- .comment-metadata -->
	</footer><!-- .comment-meta -->

	<div class="comment-content">
<p>Thanks!! I've updated the content of "install.sh". I forgot to change the folder name 
when typing this post. Also, I added "sudo" on the command "bsdtar ...".<br>
I'm really happy that this post did help someone. It's really not that easy for a newbie,
especially the network part. QEMU support user level NAC on x86, which allows guest OS 
access the internet without root privilege on manipulating network devices. However, 
QEMU does not provide the same function on emulating ARM platform due to some 
issues/difficulties.<br>
P.S. I didn't mention how to port a Linaro image on QEMU because there's already an 
image on your web page.</p>
</OL>

<a name="dhruvvyas90-qemu-rpi-kernel"></a><h3 class="public ">
  
<a href="https://github.com/dhruvvyas90">dhruvvyas90</a>&nbsp;&nbsp;
<a href="https://github.com/dhruvvyas90/qemu-rpi-kernel">qemu-rpi-kernel</a></strong>

<a href="https://github.com/dhruvvyas90/qemu-rpi-kernel" target="_b">(Source Origin)</a>
</h3>

<a href="https://github.com/dhruvvyas90/qemu-rpi-kernel/archive/master.zip" class="btn btn-outline get-repo-btn
" rel="nofollow" data-ga-click="Repository, download zip, location:repo overview">
  Download ZIP
</a>



  <div class="commit-tease js-details-container">
    <span class="right">
      Latest commit
      <a class="commit-tease-sha" href="https://github.com/dhruvvyas90/qemu-rpi-kernel/commit/36ede073f4ccb64f60200ede36c231afe9502070" data-pjax="">
        36ede07</a>&nbsp;&nbsp;
      <span itemprop="dateModified"><relative-time title="Jul 2, 2016, 11:21 PM GMT+8" datetime="2016-07-02T15:21:35Z">2 days ago</relative-time></span>
    </span>


<P><a href="https://github.com/dhruvvyas90" class="user-mention" rel="author">dhruvvyas90</a>


<P><a href="https://github.com/dhruvvyas90/qemu-rpi-kernel/commit/36ede073f4ccb64f60200ede36c231afe9502070" class="message" data-pjax="true" title="Fixed issue #17 by renaming the kernel 4.4.11">Fixed issue</a> <a href="https://github.com/dhruvvyas90/qemu-rpi-kernel/issues/17" class="issue-link js-issue-link" data-url="https://github.com/dhruvvyas90/qemu-rpi-kernel/issues/17" data-id="160292612" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#17</a> <a href="https://github.com/dhruvvyas90/qemu-rpi-kernel/commit/36ede073f4ccb64f60200ede36c231afe9502070" class="message" data-pjax="true" title="Fixed issue #17 by renaming the kernel 4.4.11">by renaming the kernel 4.4.11</a>
    

<TABLE>
    <tbody>
   <TR>
       <td class="content">
<a href="https://github.com/dhruvvyas90/qemu-rpi-kernel/tree/master/tools" class="js-navigation-open" id="4a931512ce65bdc9ca6808adf92d8783-931248d2e96c653abf3854f9d905953cc418bb6c" title="tools">tools</a>&nbsp;&nbsp;
       </td>
       <td class="message">

<a href="https://github.com/dhruvvyas90/qemu-rpi-kernel/commit/162fbe91a1d1b11e34a3af9326e06816aac67e1f" class="message" data-pjax="true" title="fixes for Linux 4.1.18">fixes for Linux 4.1.18</a>&nbsp;&nbsp;
       </td>
       <td class="age">
<time-ago title="Mar 6, 2016, 2:44 AM GMT+8" datetime="2016-03-05T18:44:12Z">4 months ago</time-ago></span>
          </td>
   </tr>
   <tr class="js-navigation-item">
          <td class="content">
<a href="https://github.com/dhruvvyas90/qemu-rpi-kernel/blob/master/README.md" class="js-navigation-open" id="04c6e90faac2675aa89e2176d2eec7d8-4bddb0e56653e29c4a25ba5d93fe8ec82b73f191" title="README.md">README.md</a></span>&nbsp;&nbsp;
          </td>
          <td class="message">

                  <a href="https://github.com/dhruvvyas90/qemu-rpi-kernel/commit/2ab8a0e5a72d57e31beb0468f5c18ce31c9883d0" class="message" data-pjax="true" title="Update README.md">Update README.md</a>&nbsp;&nbsp;
            </span>
          </td>
          <td class="age">
<time-ago title="Jun 7, 2016, 11:05 PM GMT+8" datetime="2016-06-07T15:05:40Z">27 days ago</time-ago></span>
          </td>
        </tr>
        <tr class="js-navigation-item navigation-focus">
          <td class="content">
<a href="https://github.com/dhruvvyas90/qemu-rpi-kernel/blob/master/kernel-qemu-4.1.13-jessie" class="js-navigation-open" id="9d6b4a77c3144077f1290ee5ad7778f5-4bb24f79290ff4af4a2b0508d62be5b0bd0a7c14" title="kernel-qemu-4.1.13-jessie">kernel-qemu-4.1.13-jessie</a></span>&nbsp;&nbsp;
          </td>
          <td class="message">

                  <a href="https://github.com/dhruvvyas90/qemu-rpi-kernel/commit/be4c566789a79910129e761b95ada437e05b4043" class="message" data-pjax="true" title="Added 4.1.13+ kernel">Added 4.1.13+ kernel</a>&nbsp;&nbsp;
            </span>
          </td>
          <td class="age">
<time-ago title="Jan 31, 2016, 1:48 PM GMT+8" datetime="2016-01-31T05:48:16Z">5 months ago</time-ago></span>
          </td>
        </tr>
        <tr class="js-navigation-item">
          <td class="content">
<a href="https://github.com/dhruvvyas90/qemu-rpi-kernel/blob/master/kernel-qemu-4.1.7-jessie" class="js-navigation-open" id="ccaba2bdce490cde859528d6d3a509d4-29656d197d698e970400707a8dd43bc09a30a953" title="kernel-qemu-4.1.7-jessie">kernel-qemu-4.1.7-jessie</a></span>&nbsp;&nbsp;
          </td>
          <td class="message">

                  <a href="https://github.com/dhruvvyas90/qemu-rpi-kernel/commit/9fdabc1699510d26912917b1ed3ef63259ff95d3" class="message" data-pjax="true" title="Added jessie 4.1.7 kernel, tools for building kernel and modified README.md">Added jessie 4.1.7 kernel, tools for building kernel and ...</a>&nbsp;&nbsp;
            </span>
          </td>
          <td class="age">
<time-ago title="Nov 19, 2015, 1:48 PM GMT+8" datetime="2015-11-19T05:48:20Z">8 months ago</time-ago></span>
          </td>
        </tr>
        <tr class="js-navigation-item">
          <td class="content">
<a href="https://github.com/dhruvvyas90/qemu-rpi-kernel/blob/master/kernel-qemu-4.4.12-jessie" class="js-navigation-open" id="5c2131a7d84f7aa107496cfa99973967-afbbe7aaecc9b72af37ec3c49183045542b01710" title="kernel-qemu-4.4.12-jessie">kernel-qemu-4.4.12-jessie</a></span>&nbsp;&nbsp;
          </td>
          <td class="message">

                  <a href="https://github.com/dhruvvyas90/qemu-rpi-kernel/commit/36ede073f4ccb64f60200ede36c231afe9502070" class="message" data-pjax="true" title="Fixed issue #17 by renaming the kernel 4.4.11">Fixed issue</a> <a href="https://github.com/dhruvvyas90/qemu-rpi-kernel/issues/17" class="issue-link js-issue-link" data-url="https://github.com/dhruvvyas90/qemu-rpi-kernel/issues/17" data-id="160292612" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#17</a> <a href="https://github.com/dhruvvyas90/qemu-rpi-kernel/commit/36ede073f4ccb64f60200ede36c231afe9502070" class="message" data-pjax="true" title="Fixed issue #17 by renaming the kernel 4.4.11">by renaming the kernel 4.4.11</a>&nbsp;&nbsp;
            </span>
          </td>
          <td class="age">
<time-ago title="Jul 2, 2016, 11:21 PM GMT+8" datetime="2016-07-02T15:21:35Z">2 days ago</time-ago></span>
          </td>
        </tr>
    </tbody>
  </table>

</div>




<h4>README.md</h4>

      <article class="markdown-body entry-content" itemprop="text">

<h5>qemu-rpi-kernel</h5>

<p>Qemu kernel for emulating Rpi on QEMU</p>

<p>While I was searching the internet about emulating QEMU, most of the guides pointed to link <a href="https://xecdesign.com/downloads/linux-qemu/kernel-qemu">https://xecdesign.com/downloads/linux-qemu/kernel-qemu</a> which is dead as of now.
So making it available on github for someone who would like to use it.
Hope it helps.</p>

<p>This repo contains two types of kernels.</p>

<p>kernel-qemu-3.10.25-wheezy, which is the original kernel from link <a href="https://xecdesign.com/downloads/linux-qemu/kernel-qemu">https://xecdesign.com/downloads/linux-qemu/kernel-qemu</a> - Works fine with any wheezy image with changes mentioned in wiki.</p>

<p>kernel-qemu-4.x.xx-jessie, are newer kernels compiled compatible with
 jessie as well as they work well with older wheezy images. </p>

<p>Build scripts are kept in tools folder for reference.</p>

<p>Go through wiki page for step by step guide how to emulate Raspberry Pi on Qemu on any platform (Win, linux or Mac OS)</p>
</article>
  </div>

<a name="KVMOnRaspberryPi2"></a><h3 class="entry-title">KVM on the Raspberry Pi2 
<a href="https://blog.night-shade.org.uk/2015/05/kvm-on-the-raspberry-pi2/" 
target="_b">(Source Origin)</a></h3>	</header><!-- .entry-header -->

	<div class="entry-content">

<p>In my <a href="https://blog.night-shade.org.uk/2015/05/booting-a-raspberry-pi2-with-u-boot-and-hyp-enabled/">last post</a>
 I wrote about to getting my Pi2 to boot with HYP enabled on all 4 CPUs.
 The next stage is to get a kernel with KVM enabled and get a VM up and 
running. Once again most of this method is taken from a <a href="http://blog.flexvdi.es/2015/03/17/enabling-kvm-virtualization-on-the-raspberry-pi-2/">blog post</a> by <a class="twitter-atreply pretty-link" href="https://twitter.com/sergiolpascual"><s>@</s>sergiolpascual</a> I have tidied it up and refined the method of using a single CPU core without patching QEMU.</p>

<h4>Building a KVM enabled kernel for the Pi</h4>

<p>First of all you need to get a KVM enabled kernel for the Pi2 host. 
These commands checkout the current 3.18 version of the Raspberry Pi 
foundation's kernel tree and apply a <a href="https://github.com/raspberrypi/linux/pull/902">pull request</a> on top of it to enable GIC emulation.</p>

<pre>
git clone https://github.com/raspberrypi/linux
cd linux
git checkout rpi-3.18.y
git fetch origin pull/902/head:VGIC-emu
git checkout VGIC-emu
</pre>

<p>I started off with the same base config as the kernel on my Pi 2. 
There is a file /proc/config.gz that stores the config the running 
kernel was built with. Copy this file to your build host, uncompress it 
and rename it to /working/rpi2/.config that way you will only need to 
make a few minor changes to the config.</p>

<pre>
# If you don't see any output from command "$ ls -l /proc/conf*"
# $ find /lib/modules -name "configs*"
/lib/modules/4.1.13-v7+/kernel/kernel/configs.ko
/lib/modules/4.1.13+/kernel/kernel/configs.ko
# $ sudo  modprobe configs
# $ ls -l /proc/conf*
-r--r--r-- 1 root root 29603 Nov 21 23:24 /proc/config.gz
scp user@pi:/proc/config.gz /tmp/config.gz
mkdir -p /working/rpi2
zcat /tmp/config.gz > /working/rpi2/.config
</pre>

<p>Now we need to setup a cross compile environment again and start the kernel config system.</p>

<pre>
export ARCH=arm
export CROSS_COMPILE=arm-linux-gnueabihf-
make O=/working/rpi2 menuconfig
</pre>

<P><b>Note: (06/13/2016)</b> While compiling linux kernel to be run as a kvm guest, 
it seems, we need to add the following options to the generated <b>.config</b> file:  
<a href="http://lxr.free-electrons.com/source/arch/x86/configs/kvm_guest.config" 
target="_b">kvm (guest) config</a>.  Probably, not the "CONFIG_IP_PNP_DHCP=y" option, 
since DHCP is not very reliable.

<PRE>
CONFIG_NET=y
CONFIG_NET_CORE=y
CONFIG_NETDEVICES=y
CONFIG_BLOCK=y
CONFIG_BLK_DEV=y
CONFIG_NETWORK_FILESYSTEMS=y
CONFIG_INET=y
CONFIG_TTY=y
CONFIG_SERIAL_8250=y
CONFIG_SERIAL_8250_CONSOLE=y
CONFIG_IP_PNP=y
# CONFIG_IP_PNP_DHCP=y
CONFIG_BINFMT_ELF=y
CONFIG_PCI=y
CONFIG_PCI_MSI=y
CONFIG_DEBUG_KERNEL=y
CONFIG_VIRTUALIZATION=y
CONFIG_HYPERVISOR_GUEST=y
CONFIG_PARAVIRT=y
CONFIG_KVM_GUEST=y
CONFIG_VIRTIO=y
CONFIG_VIRTIO_PCI=y
CONFIG_VIRTIO_BLK=y
CONFIG_VIRTIO_CONSOLE=y
CONFIG_VIRTIO_NET=y
CONFIG_9P_FS=y
CONFIG_NET_9P=y
CONFIG_NET_9P_VIRTIO=y
CONFIG_SCSI_LOWLEVEL=y
CONFIG_SCSI_VIRTIO=y
CONFIG_VIRTIO_INPUT=y
</PRE>

<p>I've listed the options that need to be changed to enable KVM support in the kernel, 
these notes are copied from sergiolpascual's post. I have uploaded my <a 
href="#CONFIG">KVM enabled config</a>, (source origin: <a 
href="https://blog.night-shade.org.uk/wp-content/uploads/2015/05/config.gz" 
target="_b">config.gz</a>), with these options set already.</p>

<p>Note the O= option this sets the directory where compiled parts of 
the kernel are put, it means that your source tree stay clean.</p>

<ul>
  <li><code>Patch physical to virtual translations at runtime</code></li>
  <li><code>General setup -> Control Group support</code></li>
  <li><code>System Type -> Support for Large Physical Address Extension</code></li>
  <li><code>Boot options -> Use appended device tree blob to zImage (EXPERIMENTAL)</code></li>
  <li><code>Boot options -> Supplement the appended DTB with traditional ATAG information</code></li>
  <li><code>Virtualization -> Kernel-based Virtual Machine (KVM) support (NEW)</code>
  <ul>
  <li><strong>DISABLE</strong> <code>Virtualization -> KVM support for Virtual GIC</code></li>
  <li><strong>ENABLE</strong> <code>Virtualization -> KVM support for Emulated GIC</code></li>
  </ul>
</li>
</ul>
<p>Now you just need to build the kernel and install the modules</p>

<pre>
make O=/working/rpi2 all -j 4
export INSTALL_MOD_PATH=/tmp/rpi-kernel
make O=/working/rpi2 modules_install
</pre>

<p>To build the Pi2 boot image, glue the kernel and DTB file together thus</p>

<pre>
cat /working/rpi2/arch/arm/boot/zImage /working/rpi2/arch/arm/boot/dts/bcm2709-rpi-2-b.dtb > /tmp/rpi-kernel/kernel7.img
</pre>

<p>Copy the directory /tmp/rpi-kernel to the Pi2, replace 
/boot/firmware/kernel7.img (take a backup first) with our new kernel and
 move the new 3.18.x modules directory to /lib/modules/.</p>

<p>You will need to adjust the Pi's kernel command line to add 
"isolcpus=3" to work round a bug. To do this via u-boot run these 
commands from the u-boot command line:</p>

<pre>
setenv "${bootargs}&nbsp;isolcpus=3"
saveenv
</pre>

<p>A final reboot and you should get this in dmesg</p>

<pre>
dmesg | grep kvm
kvm [1]: timer IRQ99
kvm [1]: Hyp mode initialized successfully
</pre>


<h4>Booting your first Virtual Machine</h4>

<p>So long as you are running Debian / Raspbian Jessie then you can just run</p>

<pre>
apt-get install qemu-system
</pre>

<p>Adding the boot option isolcpus=3 works round an oddity of the Raspberry Pi's CPU, discussed in more detail in the <a href="http://blog.flexvdi.es/2015/03/17/enabling-kvm-virtualization-on-the-raspberry-pi-2/">original blog post</a>.
 We need to ensure that QEMU only runs on this isolated CPU. In the 
original post this was done by patching QEMU but there is a much easier 
way, taskset. Taskset allows us to restrict QEMU to only CPU 3 with the 
"-c 3-3" option.</p>

<p>This is my basic run script to boot an ARM VM on the Raspberry Pi2. I
 used the Linaro prebuilt ARM kernels and root images to test with and 
have included the URLs in the script.</p>

<pre>
#!/bin/sh

# Disable the QEMU sound driver
export QEMU_AUDIO_DRV=none

# Basic system setup an ARM vexpress with 1 CPU, 256M of RAM
smp=1
cpu=host
ram=256
machine=vexpress-a15
# Where are the kernel and root images stored
dir=/root/linaro

# Source: <a href="https://snapshots.linaro.org/ubuntu/images/kvm/latest/zImage-armv7">https://snapshots.linaro.org/ubuntu/images/kvm/latest/zImage-armv7</a> 
kernel=$dir/zImage-armv7
# Source: <a href="https://snapshots.linaro.org/ubuntu/images/kvm/latest/vexpress-v2p-ca15-tc1.dtb">https://snapshots.linaro.org/ubuntu/images/kvm/latest/vexpress-v2p-ca15-tc1.dtb</a> 
dtb=$dir/vexpress-v2p-ca15-tc1.dtb
# Source: <a href="http://snapshots.linaro.org/ubuntu/images/kvm-guest/36/armhf/kvm-armhf.qcow2.xz">http://snapshots.linaro.org/ubuntu/images/kvm-guest/36/armhf/kvm-armhf.qcow2.xz</a>
rootfs=$dir/kvm-armhf.qcow2
# Virtual machine Linux command line
cmdline="root=/dev/vda2 rw mem=${ram}M console=ttyAMA0 rootwait 
rootfstype=ext4"

# Use taskset to ensure that QEMU only runs on cpu 3
taskset -c 3-3 qemu-system-arm -enable-kvm -smp $smp -m $ram -M $machine
 -cpu host -kernel $kernel -dtb $dtb -append "$cmdline" -drive 
if=none,id=rootfs,file=$rootfs -device virtio-blk-device,drive=rootfs 
-netdev user,id=user0 -device virtio-net-device,netdev=user0 -nographic
</pre>

<a name="CONFIG"></a><h5>config</h5>
<pre>
#
# Automatically generated file; DO NOT EDIT.
# Linux/arm 3.18.8 Kernel Configuration
#
CONFIG_ARM=y
CONFIG_SYS_SUPPORTS_APM_EMULATION=y
CONFIG_HAVE_PROC_CPU=y
CONFIG_STACKTRACE_SUPPORT=y
CONFIG_LOCKDEP_SUPPORT=y
CONFIG_TRACE_IRQFLAGS_SUPPORT=y
CONFIG_RWSEM_XCHGADD_ALGORITHM=y
CONFIG_GENERIC_HWEIGHT=y
CONFIG_GENERIC_CALIBRATE_DELAY=y
CONFIG_NEED_DMA_MAP_STATE=y
CONFIG_ARCH_SUPPORTS_UPROBES=y
CONFIG_FIQ=y
CONFIG_VECTORS_BASE=0xffff0000
CONFIG_ARM_PATCH_PHYS_VIRT=y
CONFIG_NEED_MACH_IO_H=y
CONFIG_NEED_MACH_MEMORY_H=y
CONFIG_GENERIC_BUG=y
CONFIG_DEFCONFIG_LIST="/lib/modules/$UNAME_RELEASE/.config"
CONFIG_IRQ_WORK=y
CONFIG_BUILDTIME_EXTABLE_SORT=y

#
# General setup
#
CONFIG_INIT_ENV_ARG_LIMIT=32
CONFIG_CROSS_COMPILE=""
# CONFIG_COMPILE_TEST is not set
CONFIG_LOCALVERSION="-v7"
# CONFIG_LOCALVERSION_AUTO is not set
CONFIG_HAVE_KERNEL_GZIP=y
CONFIG_HAVE_KERNEL_LZMA=y
CONFIG_HAVE_KERNEL_XZ=y
CONFIG_HAVE_KERNEL_LZO=y
CONFIG_HAVE_KERNEL_LZ4=y
# CONFIG_KERNEL_GZIP is not set
# CONFIG_KERNEL_LZMA is not set
CONFIG_KERNEL_XZ=y
# CONFIG_KERNEL_LZO is not set
# CONFIG_KERNEL_LZ4 is not set
CONFIG_DEFAULT_HOSTNAME="(none)"
CONFIG_SWAP=y
CONFIG_SYSVIPC=y
CONFIG_SYSVIPC_SYSCTL=y
CONFIG_POSIX_MQUEUE=y
CONFIG_POSIX_MQUEUE_SYSCTL=y
CONFIG_CROSS_MEMORY_ATTACH=y
CONFIG_FHANDLE=y
# CONFIG_USELIB is not set
CONFIG_AUDIT=y
CONFIG_HAVE_ARCH_AUDITSYSCALL=y
CONFIG_AUDITSYSCALL=y
CONFIG_AUDIT_WATCH=y
CONFIG_AUDIT_TREE=y

#
# IRQ subsystem
#
CONFIG_GENERIC_IRQ_PROBE=y
CONFIG_GENERIC_IRQ_SHOW=y
CONFIG_HARDIRQS_SW_RESEND=y
CONFIG_IRQ_DOMAIN=y
CONFIG_HANDLE_DOMAIN_IRQ=y
# CONFIG_IRQ_DOMAIN_DEBUG is not set
CONFIG_IRQ_FORCED_THREADING=y
CONFIG_GENERIC_CLOCKEVENTS=y
CONFIG_GENERIC_CLOCKEVENTS_BUILD=y
CONFIG_ARCH_HAS_TICK_BROADCAST=y
CONFIG_GENERIC_CLOCKEVENTS_BROADCAST=y

#
# Timers subsystem
#
CONFIG_TICK_ONESHOT=y
CONFIG_NO_HZ_COMMON=y
# CONFIG_HZ_PERIODIC is not set
CONFIG_NO_HZ_IDLE=y
# CONFIG_NO_HZ_FULL is not set
CONFIG_NO_HZ=y
CONFIG_HIGH_RES_TIMERS=y

#
# CPU/Task time and stats accounting
#
CONFIG_TICK_CPU_ACCOUNTING=y
# CONFIG_VIRT_CPU_ACCOUNTING_GEN is not set
# CONFIG_IRQ_TIME_ACCOUNTING is not set
CONFIG_BSD_PROCESS_ACCT=y
CONFIG_BSD_PROCESS_ACCT_V3=y
CONFIG_TASKSTATS=y
CONFIG_TASK_DELAY_ACCT=y
CONFIG_TASK_XACCT=y
CONFIG_TASK_IO_ACCOUNTING=y

#
# RCU Subsystem
#
CONFIG_TREE_PREEMPT_RCU=y
CONFIG_PREEMPT_RCU=y
# CONFIG_TASKS_RCU is not set
CONFIG_RCU_STALL_COMMON=y
# CONFIG_RCU_USER_QS is not set
CONFIG_RCU_FANOUT=32
CONFIG_RCU_FANOUT_LEAF=16
# CONFIG_RCU_FANOUT_EXACT is not set
CONFIG_RCU_FAST_NO_HZ=y
# CONFIG_TREE_RCU_TRACE is not set
# CONFIG_RCU_BOOST is not set
# CONFIG_RCU_NOCB_CPU is not set
CONFIG_BUILD_BIN2C=y
CONFIG_IKCONFIG=y
CONFIG_IKCONFIG_PROC=y
CONFIG_LOG_BUF_SHIFT=17
CONFIG_LOG_CPU_MAX_BUF_SHIFT=12
CONFIG_GENERIC_SCHED_CLOCK=y
CONFIG_CGROUPS=y
# CONFIG_CGROUP_DEBUG is not set
CONFIG_CGROUP_FREEZER=y
CONFIG_CGROUP_DEVICE=y
CONFIG_CPUSETS=y
CONFIG_PROC_PID_CPUSET=y
CONFIG_CGROUP_CPUACCT=y
CONFIG_RESOURCE_COUNTERS=y
CONFIG_MEMCG=y
CONFIG_MEMCG_SWAP=y
# CONFIG_MEMCG_SWAP_ENABLED is not set
# CONFIG_MEMCG_KMEM is not set
CONFIG_CGROUP_PERF=y
CONFIG_CGROUP_SCHED=y
CONFIG_FAIR_GROUP_SCHED=y
# CONFIG_CFS_BANDWIDTH is not set
# CONFIG_RT_GROUP_SCHED is not set
CONFIG_BLK_CGROUP=y
# CONFIG_DEBUG_BLK_CGROUP is not set
CONFIG_CHECKPOINT_RESTORE=y
CONFIG_NAMESPACES=y
CONFIG_UTS_NS=y
CONFIG_IPC_NS=y
CONFIG_USER_NS=y
CONFIG_PID_NS=y
CONFIG_NET_NS=y
CONFIG_SCHED_AUTOGROUP=y
# CONFIG_SYSFS_DEPRECATED is not set
CONFIG_RELAY=y
CONFIG_BLK_DEV_INITRD=y
CONFIG_INITRAMFS_SOURCE=""
CONFIG_RD_GZIP=y
CONFIG_RD_BZIP2=y
CONFIG_RD_LZMA=y
CONFIG_RD_XZ=y
CONFIG_RD_LZO=y
CONFIG_RD_LZ4=y
# CONFIG_CC_OPTIMIZE_FOR_SIZE is not set
CONFIG_SYSCTL=y
CONFIG_ANON_INODES=y
CONFIG_HAVE_UID16=y
CONFIG_BPF=y
CONFIG_EXPERT=y
CONFIG_UID16=y
# CONFIG_SGETMASK_SYSCALL is not set
# CONFIG_SYSFS_SYSCALL is not set
# CONFIG_SYSCTL_SYSCALL is not set
CONFIG_KALLSYMS=y
# CONFIG_KALLSYMS_ALL is not set
CONFIG_PRINTK=y
CONFIG_BUG=y
CONFIG_ELF_CORE=y
CONFIG_BASE_FULL=y
CONFIG_FUTEX=y
CONFIG_EPOLL=y
CONFIG_SIGNALFD=y
CONFIG_TIMERFD=y
CONFIG_EVENTFD=y
# CONFIG_BPF_SYSCALL is not set
CONFIG_SHMEM=y
CONFIG_AIO=y
CONFIG_ADVISE_SYSCALLS=y
CONFIG_EMBEDDED=y
CONFIG_HAVE_PERF_EVENTS=y
CONFIG_PERF_USE_VMALLOC=y

#
# Kernel Performance Events And Counters
#
CONFIG_PERF_EVENTS=y
# CONFIG_DEBUG_PERF_USE_VMALLOC is not set
CONFIG_VM_EVENT_COUNTERS=y
# CONFIG_COMPAT_BRK is not set
CONFIG_SLAB=y
# CONFIG_SLUB is not set
# CONFIG_SLOB is not set
# CONFIG_SYSTEM_TRUSTED_KEYRING is not set
CONFIG_PROFILING=y
CONFIG_TRACEPOINTS=y
CONFIG_OPROFILE=m
CONFIG_HAVE_OPROFILE=y
CONFIG_KPROBES=y
CONFIG_JUMP_LABEL=y
CONFIG_UPROBES=y
# CONFIG_HAVE_64BIT_ALIGNED_ACCESS is not set
CONFIG_HAVE_EFFICIENT_UNALIGNED_ACCESS=y
CONFIG_ARCH_USE_BUILTIN_BSWAP=y
CONFIG_KRETPROBES=y
CONFIG_HAVE_KPROBES=y
CONFIG_HAVE_KRETPROBES=y
CONFIG_HAVE_ARCH_TRACEHOOK=y
CONFIG_HAVE_DMA_ATTRS=y
CONFIG_HAVE_DMA_CONTIGUOUS=y
CONFIG_GENERIC_SMP_IDLE_THREAD=y
CONFIG_GENERIC_IDLE_POLL_SETUP=y
CONFIG_HAVE_REGS_AND_STACK_ACCESS_API=y
CONFIG_HAVE_CLK=y
CONFIG_HAVE_DMA_API_DEBUG=y
CONFIG_HAVE_HW_BREAKPOINT=y
CONFIG_HAVE_PERF_REGS=y
CONFIG_HAVE_PERF_USER_STACK_DUMP=y
CONFIG_HAVE_ARCH_JUMP_LABEL=y
CONFIG_HAVE_RCU_TABLE_FREE=y
CONFIG_ARCH_WANT_IPC_PARSE_VERSION=y
CONFIG_HAVE_ARCH_SECCOMP_FILTER=y
CONFIG_SECCOMP_FILTER=y
CONFIG_HAVE_CC_STACKPROTECTOR=y
CONFIG_CC_STACKPROTECTOR=y
# CONFIG_CC_STACKPROTECTOR_NONE is not set
CONFIG_CC_STACKPROTECTOR_REGULAR=y
# CONFIG_CC_STACKPROTECTOR_STRONG is not set
CONFIG_HAVE_CONTEXT_TRACKING=y
CONFIG_HAVE_VIRT_CPU_ACCOUNTING_GEN=y
CONFIG_HAVE_IRQ_TIME_ACCOUNTING=y
CONFIG_HAVE_ARCH_TRANSPARENT_HUGEPAGE=y
CONFIG_HAVE_MOD_ARCH_SPECIFIC=y
CONFIG_MODULES_USE_ELF_REL=y
CONFIG_CLONE_BACKWARDS=y
CONFIG_OLD_SIGSUSPEND3=y
CONFIG_OLD_SIGACTION=y

#
# GCOV-based kernel profiling
#
# CONFIG_GCOV_KERNEL is not set
CONFIG_HAVE_GENERIC_DMA_COHERENT=y
CONFIG_SLABINFO=y
CONFIG_RT_MUTEXES=y
CONFIG_BASE_SMALL=0
CONFIG_MODULES=y
CONFIG_MODULE_FORCE_LOAD=y
CONFIG_MODULE_UNLOAD=y
CONFIG_MODULE_FORCE_UNLOAD=y
CONFIG_MODVERSIONS=y
CONFIG_MODULE_SRCVERSION_ALL=y
# CONFIG_MODULE_SIG is not set
# CONFIG_MODULE_COMPRESS is not set
CONFIG_STOP_MACHINE=y
CONFIG_BLOCK=y
CONFIG_LBDAF=y
CONFIG_BLK_DEV_BSG=y
CONFIG_BLK_DEV_BSGLIB=y
CONFIG_BLK_DEV_INTEGRITY=y
CONFIG_BLK_DEV_THROTTLING=y
# CONFIG_BLK_CMDLINE_PARSER is not set

#
# Partition Types
#
CONFIG_PARTITION_ADVANCED=y
# CONFIG_ACORN_PARTITION is not set
# CONFIG_AIX_PARTITION is not set
# CONFIG_OSF_PARTITION is not set
# CONFIG_AMIGA_PARTITION is not set
# CONFIG_ATARI_PARTITION is not set
CONFIG_MAC_PARTITION=y
CONFIG_MSDOS_PARTITION=y
# CONFIG_BSD_DISKLABEL is not set
# CONFIG_MINIX_SUBPARTITION is not set
# CONFIG_SOLARIS_X86_PARTITION is not set
# CONFIG_UNIXWARE_DISKLABEL is not set
# CONFIG_LDM_PARTITION is not set
# CONFIG_SGI_PARTITION is not set
# CONFIG_ULTRIX_PARTITION is not set
# CONFIG_SUN_PARTITION is not set
CONFIG_KARMA_PARTITION=y
CONFIG_EFI_PARTITION=y
# CONFIG_SYSV68_PARTITION is not set
# CONFIG_CMDLINE_PARTITION is not set

#
# IO Schedulers
#
CONFIG_IOSCHED_NOOP=y
CONFIG_IOSCHED_DEADLINE=y
CONFIG_IOSCHED_CFQ=y
CONFIG_CFQ_GROUP_IOSCHED=y
# CONFIG_DEFAULT_DEADLINE is not set
CONFIG_DEFAULT_CFQ=y
# CONFIG_DEFAULT_NOOP is not set
CONFIG_DEFAULT_IOSCHED="cfq"
CONFIG_PREEMPT_NOTIFIERS=y
CONFIG_PADATA=y
CONFIG_UNINLINE_SPIN_UNLOCK=y
CONFIG_ARCH_SUPPORTS_ATOMIC_RMW=y
CONFIG_MUTEX_SPIN_ON_OWNER=y
CONFIG_RWSEM_SPIN_ON_OWNER=y
CONFIG_FREEZER=y

#
# System Type
#
CONFIG_MMU=y
# CONFIG_ARCH_MULTIPLATFORM is not set
# CONFIG_ARCH_INTEGRATOR is not set
# CONFIG_ARCH_REALVIEW is not set
# CONFIG_ARCH_VERSATILE is not set
# CONFIG_ARCH_AT91 is not set
# CONFIG_ARCH_BCM2708 is not set
# CONFIG_ARCH_CLPS711X is not set
# CONFIG_ARCH_GEMINI is not set
# CONFIG_ARCH_EBSA110 is not set
# CONFIG_ARCH_EP93XX is not set
# CONFIG_ARCH_FOOTBRIDGE is not set
# CONFIG_ARCH_NETX is not set
# CONFIG_ARCH_IOP13XX is not set
# CONFIG_ARCH_IOP32X is not set
# CONFIG_ARCH_IOP33X is not set
# CONFIG_ARCH_IXP4XX is not set
# CONFIG_ARCH_DOVE is not set
# CONFIG_ARCH_MV78XX0 is not set
# CONFIG_ARCH_ORION5X is not set
# CONFIG_ARCH_MMP is not set
# CONFIG_ARCH_KS8695 is not set
# CONFIG_ARCH_W90X900 is not set
# CONFIG_ARCH_LPC32XX is not set
# CONFIG_ARCH_PXA is not set
# CONFIG_ARCH_MSM is not set
# CONFIG_ARCH_SHMOBILE_LEGACY is not set
# CONFIG_ARCH_RPC is not set
# CONFIG_ARCH_SA1100 is not set
# CONFIG_ARCH_S3C24XX is not set
# CONFIG_ARCH_S3C64XX is not set
# CONFIG_ARCH_DAVINCI is not set
# CONFIG_ARCH_OMAP1 is not set
CONFIG_ARCH_BCM2709=y
CONFIG_BCM2708_GPIO=y
CONFIG_BCM2708_VCMEM=y
CONFIG_BCM2708_NOL2CACHE=y
CONFIG_BCM2708_SPIDEV=y

#
# Broadcom BCM2709 Implementations
#
CONFIG_MACH_BCM2709=y
CONFIG_BCM2709_DT=y

#
# Processor Type
#
CONFIG_CPU_V7=y
CONFIG_CPU_32v6K=y
CONFIG_CPU_32v7=y
CONFIG_CPU_ABRT_EV7=y
CONFIG_CPU_PABRT_V7=y
CONFIG_CPU_CACHE_V7=y
CONFIG_CPU_CACHE_VIPT=y
CONFIG_CPU_COPY_V6=y
CONFIG_CPU_TLB_V7=y
CONFIG_CPU_HAS_ASID=y
CONFIG_CPU_CP15=y
CONFIG_CPU_CP15_MMU=y

#
# Processor Features
#
CONFIG_ARM_LPAE=y
CONFIG_ARCH_PHYS_ADDR_T_64BIT=y
CONFIG_ARM_THUMB=y
# CONFIG_ARM_THUMBEE is not set
CONFIG_ARM_VIRT_EXT=y
CONFIG_SWP_EMULATE=y
# CONFIG_CPU_ICACHE_DISABLE is not set
# CONFIG_CPU_DCACHE_DISABLE is not set
# CONFIG_CPU_BPREDICT_DISABLE is not set
CONFIG_KUSER_HELPERS=y
CONFIG_MIGHT_HAVE_CACHE_L2X0=y
# CONFIG_CACHE_L2X0 is not set
CONFIG_ARM_L1_CACHE_SHIFT_6=y
CONFIG_ARM_L1_CACHE_SHIFT=6
CONFIG_ARM_DMA_MEM_BUFFERABLE=y
CONFIG_ARCH_HAS_BARRIERS=y
# CONFIG_ARM_ERRATA_430973 is not set
# CONFIG_ARM_ERRATA_458693 is not set
# CONFIG_ARM_ERRATA_460075 is not set
# CONFIG_ARM_ERRATA_742230 is not set
# CONFIG_ARM_ERRATA_742231 is not set
# CONFIG_ARM_ERRATA_643719 is not set
# CONFIG_ARM_ERRATA_720789 is not set
# CONFIG_ARM_ERRATA_743622 is not set
# CONFIG_ARM_ERRATA_751472 is not set
# CONFIG_ARM_ERRATA_754322 is not set
# CONFIG_ARM_ERRATA_754327 is not set
# CONFIG_ARM_ERRATA_764369 is not set
# CONFIG_ARM_ERRATA_775420 is not set
# CONFIG_ARM_ERRATA_798181 is not set
# CONFIG_ARM_ERRATA_773022 is not set

#
# Bus support
#
CONFIG_ARM_AMBA=y
# CONFIG_PCI_SYSCALL is not set
# CONFIG_PCCARD is not set

#
# Kernel Features
#
CONFIG_HAVE_SMP=y
CONFIG_SMP=y
CONFIG_SMP_ON_UP=y
CONFIG_ARM_CPU_TOPOLOGY=y
# CONFIG_SCHED_MC is not set
# CONFIG_SCHED_SMT is not set
CONFIG_HAVE_ARM_ARCH_TIMER=y
# CONFIG_MCPM is not set
# CONFIG_BIG_LITTLE is not set
# CONFIG_VMSPLIT_3G is not set
CONFIG_VMSPLIT_2G=y
# CONFIG_VMSPLIT_1G is not set
CONFIG_PAGE_OFFSET=0x80000000
CONFIG_NR_CPUS=4
CONFIG_HOTPLUG_CPU=y
# CONFIG_ARM_PSCI is not set
CONFIG_ARCH_NR_GPIO=0
# CONFIG_PREEMPT_NONE is not set
# CONFIG_PREEMPT_VOLUNTARY is not set
CONFIG_PREEMPT=y
CONFIG_PREEMPT_COUNT=y
CONFIG_HZ_FIXED=0
# CONFIG_HZ_100 is not set
# CONFIG_HZ_200 is not set
CONFIG_HZ_250=y
# CONFIG_HZ_300 is not set
# CONFIG_HZ_500 is not set
# CONFIG_HZ_1000 is not set
CONFIG_HZ=250
CONFIG_SCHED_HRTICK=y
# CONFIG_THUMB2_KERNEL is not set
CONFIG_AEABI=y
# CONFIG_OABI_COMPAT is not set
# CONFIG_ARCH_SPARSEMEM_DEFAULT is not set
# CONFIG_ARCH_SELECT_MEMORY_MODEL is not set
CONFIG_HAVE_ARCH_PFN_VALID=y
CONFIG_HAVE_GENERIC_RCU_GUP=y
# CONFIG_HIGHMEM is not set
CONFIG_HW_PERF_EVENTS=y
CONFIG_SYS_SUPPORTS_HUGETLBFS=y
CONFIG_ARCH_WANT_GENERAL_HUGETLB=y
CONFIG_FLATMEM=y
CONFIG_FLAT_NODE_MEM_MAP=y
CONFIG_HAVE_MEMBLOCK=y
CONFIG_NO_BOOTMEM=y
CONFIG_MEMORY_ISOLATION=y
# CONFIG_HAVE_BOOTMEM_INFO_NODE is not set
CONFIG_PAGEFLAGS_EXTENDED=y
CONFIG_SPLIT_PTLOCK_CPUS=4
CONFIG_COMPACTION=y
CONFIG_MIGRATION=y
CONFIG_PHYS_ADDR_T_64BIT=y
CONFIG_ZONE_DMA_FLAG=0
CONFIG_MMU_NOTIFIER=y
CONFIG_KSM=y
CONFIG_DEFAULT_MMAP_MIN_ADDR=4096
# CONFIG_TRANSPARENT_HUGEPAGE is not set
CONFIG_CLEANCACHE=y
CONFIG_FRONTSWAP=y
CONFIG_CMA=y
# CONFIG_CMA_DEBUG is not set
CONFIG_CMA_AREAS=7
CONFIG_ZSWAP=y
CONFIG_ZPOOL=y
# CONFIG_ZBUD is not set
CONFIG_ZSMALLOC=y
# CONFIG_PGTABLE_MAPPING is not set
CONFIG_FORCE_MAX_ZONEORDER=11
CONFIG_ALIGNMENT_TRAP=y
CONFIG_UACCESS_WITH_MEMCPY=y
CONFIG_SECCOMP=y
CONFIG_SWIOTLB=y
CONFIG_IOMMU_HELPER=y
# CONFIG_XEN is not set

#
# Boot options
#
CONFIG_USE_OF=y
CONFIG_ATAGS=y
# CONFIG_DEPRECATED_PARAM_STRUCT is not set
CONFIG_ZBOOT_ROM_TEXT=0x0
CONFIG_ZBOOT_ROM_BSS=0x0
CONFIG_ARM_APPENDED_DTB=y
CONFIG_ARM_ATAG_DTB_COMPAT=y
CONFIG_ARM_ATAG_DTB_COMPAT_CMDLINE_FROM_BOOTLOADER=y
# CONFIG_ARM_ATAG_DTB_COMPAT_CMDLINE_EXTEND is not set
CONFIG_CMDLINE="console=ttyAMA0,115200 kgdboc=ttyAMA0,115200 root=/dev/mmcblk0p2 rootfstype=ext4 rootwait"
CONFIG_CMDLINE_FROM_BOOTLOADER=y
# CONFIG_CMDLINE_EXTEND is not set
# CONFIG_CMDLINE_FORCE is not set
CONFIG_KEXEC=y
CONFIG_ATAGS_PROC=y
# CONFIG_CRASH_DUMP is not set
# CONFIG_AUTO_ZRELADDR is not set

#
# CPU Power Management
#

#
# CPU Frequency scaling
#
CONFIG_CPU_FREQ=y
CONFIG_CPU_FREQ_GOV_COMMON=y
CONFIG_CPU_FREQ_STAT=m
CONFIG_CPU_FREQ_STAT_DETAILS=y
# CONFIG_CPU_FREQ_DEFAULT_GOV_PERFORMANCE is not set
CONFIG_CPU_FREQ_DEFAULT_GOV_POWERSAVE=y
# CONFIG_CPU_FREQ_DEFAULT_GOV_USERSPACE is not set
# CONFIG_CPU_FREQ_DEFAULT_GOV_ONDEMAND is not set
# CONFIG_CPU_FREQ_DEFAULT_GOV_CONSERVATIVE is not set
CONFIG_CPU_FREQ_GOV_PERFORMANCE=y
CONFIG_CPU_FREQ_GOV_POWERSAVE=y
CONFIG_CPU_FREQ_GOV_USERSPACE=y
CONFIG_CPU_FREQ_GOV_ONDEMAND=y
CONFIG_CPU_FREQ_GOV_CONSERVATIVE=y
# CONFIG_CPUFREQ_DT is not set

#
# ARM CPU frequency scaling drivers
#
# CONFIG_ARM_KIRKWOOD_CPUFREQ is not set
CONFIG_ARM_BCM2835_CPUFREQ=y

#
# CPU Idle
#
CONFIG_CPU_IDLE=y
CONFIG_CPU_IDLE_GOV_LADDER=y
CONFIG_CPU_IDLE_GOV_MENU=y

#
# ARM CPU Idle Drivers
#
# CONFIG_ARCH_NEEDS_CPU_IDLE_COUPLED is not set

#
# Floating point emulation
#

#
# At least one emulation must be selected
#
CONFIG_VFP=y
CONFIG_VFPv3=y
CONFIG_NEON=y
CONFIG_KERNEL_MODE_NEON=y

#
# Userspace binary formats
#
CONFIG_BINFMT_ELF=y
CONFIG_ARCH_BINFMT_ELF_RANDOMIZE_PIE=y
CONFIG_CORE_DUMP_DEFAULT_ELF_HEADERS=y
CONFIG_BINFMT_SCRIPT=y
# CONFIG_HAVE_AOUT is not set
CONFIG_BINFMT_MISC=m
CONFIG_COREDUMP=y

#
# Power management options
#
CONFIG_SUSPEND=y
CONFIG_SUSPEND_FREEZER=y
CONFIG_HIBERNATE_CALLBACKS=y
CONFIG_HIBERNATION=y
CONFIG_PM_STD_PARTITION=""
CONFIG_PM_SLEEP=y
CONFIG_PM_SLEEP_SMP=y
# CONFIG_PM_AUTOSLEEP is not set
# CONFIG_PM_WAKELOCKS is not set
CONFIG_PM_RUNTIME=y
CONFIG_PM=y
CONFIG_PM_DEBUG=y
CONFIG_PM_ADVANCED_DEBUG=y
# CONFIG_PM_TEST_SUSPEND is not set
CONFIG_PM_SLEEP_DEBUG=y
# CONFIG_APM_EMULATION is not set
CONFIG_PM_CLK=y
# CONFIG_WQ_POWER_EFFICIENT_DEFAULT is not set
CONFIG_CPU_PM=y
CONFIG_ARCH_SUSPEND_POSSIBLE=y
CONFIG_ARM_CPU_SUSPEND=y
CONFIG_ARCH_HIBERNATION_POSSIBLE=y
CONFIG_NET=y

#
# Networking options
#
CONFIG_PACKET=y
CONFIG_PACKET_DIAG=m
CONFIG_UNIX=y
CONFIG_UNIX_DIAG=m
CONFIG_XFRM=y
CONFIG_XFRM_ALGO=y
CONFIG_XFRM_USER=y
CONFIG_XFRM_SUB_POLICY=y
CONFIG_XFRM_MIGRATE=y
# CONFIG_XFRM_STATISTICS is not set
CONFIG_XFRM_IPCOMP=m
CONFIG_NET_KEY=m
CONFIG_NET_KEY_MIGRATE=y
CONFIG_INET=y
CONFIG_IP_MULTICAST=y
CONFIG_IP_ADVANCED_ROUTER=y
CONFIG_IP_FIB_TRIE_STATS=y
CONFIG_IP_MULTIPLE_TABLES=y
CONFIG_IP_ROUTE_MULTIPATH=y
CONFIG_IP_ROUTE_VERBOSE=y
CONFIG_IP_ROUTE_CLASSID=y
CONFIG_IP_PNP=y
CONFIG_IP_PNP_DHCP=y
# CONFIG_IP_PNP_BOOTP is not set
CONFIG_IP_PNP_RARP=y
CONFIG_NET_IPIP=m
CONFIG_NET_IPGRE_DEMUX=m
CONFIG_NET_IP_TUNNEL=m
CONFIG_NET_IPGRE=m
CONFIG_NET_IPGRE_BROADCAST=y
CONFIG_IP_MROUTE=y
CONFIG_IP_MROUTE_MULTIPLE_TABLES=y
CONFIG_IP_PIMSM_V1=y
CONFIG_IP_PIMSM_V2=y
CONFIG_SYN_COOKIES=y
CONFIG_NET_IPVTI=m
CONFIG_NET_UDP_TUNNEL=m
# CONFIG_NET_FOU is not set
CONFIG_GENEVE=m
CONFIG_INET_AH=m
CONFIG_INET_ESP=m
CONFIG_INET_IPCOMP=m
CONFIG_INET_XFRM_TUNNEL=m
CONFIG_INET_TUNNEL=m
CONFIG_INET_XFRM_MODE_TRANSPORT=m
CONFIG_INET_XFRM_MODE_TUNNEL=m
CONFIG_INET_XFRM_MODE_BEET=m
CONFIG_INET_LRO=m
CONFIG_INET_DIAG=m
CONFIG_INET_TCP_DIAG=m
CONFIG_INET_UDP_DIAG=m
CONFIG_TCP_CONG_ADVANCED=y
CONFIG_TCP_CONG_BIC=m
CONFIG_TCP_CONG_CUBIC=y
CONFIG_TCP_CONG_WESTWOOD=m
CONFIG_TCP_CONG_HTCP=m
CONFIG_TCP_CONG_HSTCP=m
CONFIG_TCP_CONG_HYBLA=m
CONFIG_TCP_CONG_VEGAS=m
CONFIG_TCP_CONG_SCALABLE=m
CONFIG_TCP_CONG_LP=m
CONFIG_TCP_CONG_VENO=m
CONFIG_TCP_CONG_YEAH=m
CONFIG_TCP_CONG_ILLINOIS=m
CONFIG_TCP_CONG_DCTCP=m
CONFIG_DEFAULT_CUBIC=y
# CONFIG_DEFAULT_RENO is not set
CONFIG_DEFAULT_TCP_CONG="cubic"
CONFIG_TCP_MD5SIG=y
CONFIG_IPV6=y
CONFIG_IPV6_ROUTER_PREF=y
CONFIG_IPV6_ROUTE_INFO=y
CONFIG_IPV6_OPTIMISTIC_DAD=y
CONFIG_INET6_AH=m
CONFIG_INET6_ESP=m
CONFIG_INET6_IPCOMP=m
CONFIG_IPV6_MIP6=y
CONFIG_INET6_XFRM_TUNNEL=m
CONFIG_INET6_TUNNEL=m
CONFIG_INET6_XFRM_MODE_TRANSPORT=m
CONFIG_INET6_XFRM_MODE_TUNNEL=m
CONFIG_INET6_XFRM_MODE_BEET=m
CONFIG_INET6_XFRM_MODE_ROUTEOPTIMIZATION=m
CONFIG_IPV6_VTI=m
CONFIG_IPV6_SIT=m
CONFIG_IPV6_SIT_6RD=y
CONFIG_IPV6_NDISC_NODETYPE=y
CONFIG_IPV6_TUNNEL=m
CONFIG_IPV6_GRE=m
CONFIG_IPV6_MULTIPLE_TABLES=y
CONFIG_IPV6_SUBTREES=y
CONFIG_IPV6_MROUTE=y
CONFIG_IPV6_MROUTE_MULTIPLE_TABLES=y
CONFIG_IPV6_PIMSM_V2=y
# CONFIG_NETLABEL is not set
CONFIG_NETWORK_SECMARK=y
CONFIG_NET_PTP_CLASSIFY=y
# CONFIG_NETWORK_PHY_TIMESTAMPING is not set
CONFIG_NETFILTER=y
# CONFIG_NETFILTER_DEBUG is not set
CONFIG_NETFILTER_ADVANCED=y
CONFIG_BRIDGE_NETFILTER=m

#
# Core Netfilter Configuration
#
CONFIG_NETFILTER_NETLINK=m
CONFIG_NETFILTER_NETLINK_ACCT=m
CONFIG_NETFILTER_NETLINK_QUEUE=m
CONFIG_NETFILTER_NETLINK_LOG=m
CONFIG_NF_CONNTRACK=m
CONFIG_NF_LOG_COMMON=m
CONFIG_NF_CONNTRACK_MARK=y
CONFIG_NF_CONNTRACK_SECMARK=y
CONFIG_NF_CONNTRACK_ZONES=y
CONFIG_NF_CONNTRACK_PROCFS=y
CONFIG_NF_CONNTRACK_EVENTS=y
CONFIG_NF_CONNTRACK_TIMEOUT=y
CONFIG_NF_CONNTRACK_TIMESTAMP=y
CONFIG_NF_CONNTRACK_LABELS=y
CONFIG_NF_CT_PROTO_DCCP=m
CONFIG_NF_CT_PROTO_GRE=m
CONFIG_NF_CT_PROTO_SCTP=m
CONFIG_NF_CT_PROTO_UDPLITE=m
CONFIG_NF_CONNTRACK_AMANDA=m
CONFIG_NF_CONNTRACK_FTP=m
CONFIG_NF_CONNTRACK_H323=m
CONFIG_NF_CONNTRACK_IRC=m
CONFIG_NF_CONNTRACK_BROADCAST=m
CONFIG_NF_CONNTRACK_NETBIOS_NS=m
CONFIG_NF_CONNTRACK_SNMP=m
CONFIG_NF_CONNTRACK_PPTP=m
CONFIG_NF_CONNTRACK_SANE=m
CONFIG_NF_CONNTRACK_SIP=m
CONFIG_NF_CONNTRACK_TFTP=m
CONFIG_NF_CT_NETLINK=m
CONFIG_NF_CT_NETLINK_TIMEOUT=m
CONFIG_NF_CT_NETLINK_HELPER=m
CONFIG_NETFILTER_NETLINK_QUEUE_CT=y
CONFIG_NF_NAT=m
CONFIG_NF_NAT_NEEDED=y
CONFIG_NF_NAT_PROTO_DCCP=m
CONFIG_NF_NAT_PROTO_UDPLITE=m
CONFIG_NF_NAT_PROTO_SCTP=m
CONFIG_NF_NAT_AMANDA=m
CONFIG_NF_NAT_FTP=m
CONFIG_NF_NAT_IRC=m
CONFIG_NF_NAT_SIP=m
CONFIG_NF_NAT_TFTP=m
CONFIG_NETFILTER_SYNPROXY=m
CONFIG_NF_TABLES=m
CONFIG_NF_TABLES_INET=m
CONFIG_NFT_EXTHDR=m
CONFIG_NFT_META=m
CONFIG_NFT_CT=m
CONFIG_NFT_RBTREE=m
CONFIG_NFT_HASH=m
CONFIG_NFT_COUNTER=m
CONFIG_NFT_LOG=m
CONFIG_NFT_LIMIT=m
CONFIG_NFT_MASQ=m
CONFIG_NFT_NAT=m
CONFIG_NFT_QUEUE=m
CONFIG_NFT_REJECT=m
CONFIG_NFT_REJECT_INET=m
CONFIG_NFT_COMPAT=m
CONFIG_NETFILTER_XTABLES=m

#
# Xtables combined modules
#
CONFIG_NETFILTER_XT_MARK=m
CONFIG_NETFILTER_XT_CONNMARK=m
CONFIG_NETFILTER_XT_SET=m

#
# Xtables targets
#
CONFIG_NETFILTER_XT_TARGET_AUDIT=m
CONFIG_NETFILTER_XT_TARGET_CHECKSUM=m
CONFIG_NETFILTER_XT_TARGET_CLASSIFY=m
CONFIG_NETFILTER_XT_TARGET_CONNMARK=m
CONFIG_NETFILTER_XT_TARGET_CONNSECMARK=m
CONFIG_NETFILTER_XT_TARGET_CT=m
CONFIG_NETFILTER_XT_TARGET_DSCP=m
CONFIG_NETFILTER_XT_TARGET_HL=m
CONFIG_NETFILTER_XT_TARGET_HMARK=m
CONFIG_NETFILTER_XT_TARGET_IDLETIMER=m
CONFIG_NETFILTER_XT_TARGET_LED=m
CONFIG_NETFILTER_XT_TARGET_LOG=m
CONFIG_NETFILTER_XT_TARGET_MARK=m
CONFIG_NETFILTER_XT_NAT=m
CONFIG_NETFILTER_XT_TARGET_NETMAP=m
CONFIG_NETFILTER_XT_TARGET_NFLOG=m
CONFIG_NETFILTER_XT_TARGET_NFQUEUE=m
CONFIG_NETFILTER_XT_TARGET_NOTRACK=m
CONFIG_NETFILTER_XT_TARGET_RATEEST=m
CONFIG_NETFILTER_XT_TARGET_REDIRECT=m
CONFIG_NETFILTER_XT_TARGET_TEE=m
CONFIG_NETFILTER_XT_TARGET_TPROXY=m
CONFIG_NETFILTER_XT_TARGET_TRACE=m
CONFIG_NETFILTER_XT_TARGET_SECMARK=m
CONFIG_NETFILTER_XT_TARGET_TCPMSS=m
CONFIG_NETFILTER_XT_TARGET_TCPOPTSTRIP=m

#
# Xtables matches
#
CONFIG_NETFILTER_XT_MATCH_ADDRTYPE=m
CONFIG_NETFILTER_XT_MATCH_BPF=m
CONFIG_NETFILTER_XT_MATCH_CGROUP=m
CONFIG_NETFILTER_XT_MATCH_CLUSTER=m
CONFIG_NETFILTER_XT_MATCH_COMMENT=m
CONFIG_NETFILTER_XT_MATCH_CONNBYTES=m
CONFIG_NETFILTER_XT_MATCH_CONNLABEL=m
CONFIG_NETFILTER_XT_MATCH_CONNLIMIT=m
CONFIG_NETFILTER_XT_MATCH_CONNMARK=m
CONFIG_NETFILTER_XT_MATCH_CONNTRACK=m
CONFIG_NETFILTER_XT_MATCH_CPU=m
CONFIG_NETFILTER_XT_MATCH_DCCP=m
CONFIG_NETFILTER_XT_MATCH_DEVGROUP=m
CONFIG_NETFILTER_XT_MATCH_DSCP=m
CONFIG_NETFILTER_XT_MATCH_ECN=m
CONFIG_NETFILTER_XT_MATCH_ESP=m
CONFIG_NETFILTER_XT_MATCH_HASHLIMIT=m
CONFIG_NETFILTER_XT_MATCH_HELPER=m
CONFIG_NETFILTER_XT_MATCH_HL=m
CONFIG_NETFILTER_XT_MATCH_IPCOMP=m
CONFIG_NETFILTER_XT_MATCH_IPRANGE=m
CONFIG_NETFILTER_XT_MATCH_IPVS=m
CONFIG_NETFILTER_XT_MATCH_L2TP=m
CONFIG_NETFILTER_XT_MATCH_LENGTH=m
CONFIG_NETFILTER_XT_MATCH_LIMIT=m
CONFIG_NETFILTER_XT_MATCH_MAC=m
CONFIG_NETFILTER_XT_MATCH_MARK=m
CONFIG_NETFILTER_XT_MATCH_MULTIPORT=m
CONFIG_NETFILTER_XT_MATCH_NFACCT=m
CONFIG_NETFILTER_XT_MATCH_OSF=m
CONFIG_NETFILTER_XT_MATCH_OWNER=m
CONFIG_NETFILTER_XT_MATCH_POLICY=m
CONFIG_NETFILTER_XT_MATCH_PHYSDEV=m
CONFIG_NETFILTER_XT_MATCH_PKTTYPE=m
CONFIG_NETFILTER_XT_MATCH_QUOTA=m
CONFIG_NETFILTER_XT_MATCH_RATEEST=m
CONFIG_NETFILTER_XT_MATCH_REALM=m
CONFIG_NETFILTER_XT_MATCH_RECENT=m
CONFIG_NETFILTER_XT_MATCH_SCTP=m
CONFIG_NETFILTER_XT_MATCH_SOCKET=m
CONFIG_NETFILTER_XT_MATCH_STATE=m
CONFIG_NETFILTER_XT_MATCH_STATISTIC=m
CONFIG_NETFILTER_XT_MATCH_STRING=m
CONFIG_NETFILTER_XT_MATCH_TCPMSS=m
CONFIG_NETFILTER_XT_MATCH_TIME=m
CONFIG_NETFILTER_XT_MATCH_U32=m
CONFIG_IP_SET=m
CONFIG_IP_SET_MAX=256
CONFIG_IP_SET_BITMAP_IP=m
CONFIG_IP_SET_BITMAP_IPMAC=m
CONFIG_IP_SET_BITMAP_PORT=m
CONFIG_IP_SET_HASH_IP=m
CONFIG_IP_SET_HASH_IPMARK=m
CONFIG_IP_SET_HASH_IPPORT=m
CONFIG_IP_SET_HASH_IPPORTIP=m
CONFIG_IP_SET_HASH_IPPORTNET=m
CONFIG_IP_SET_HASH_MAC=m
CONFIG_IP_SET_HASH_NETPORTNET=m
CONFIG_IP_SET_HASH_NET=m
CONFIG_IP_SET_HASH_NETNET=m
CONFIG_IP_SET_HASH_NETPORT=m
CONFIG_IP_SET_HASH_NETIFACE=m
CONFIG_IP_SET_LIST_SET=m
CONFIG_IP_VS=m
CONFIG_IP_VS_IPV6=y
# CONFIG_IP_VS_DEBUG is not set
CONFIG_IP_VS_TAB_BITS=12

#
# IPVS transport protocol load balancing support
#
CONFIG_IP_VS_PROTO_TCP=y
CONFIG_IP_VS_PROTO_UDP=y
CONFIG_IP_VS_PROTO_AH_ESP=y
CONFIG_IP_VS_PROTO_ESP=y
CONFIG_IP_VS_PROTO_AH=y
CONFIG_IP_VS_PROTO_SCTP=y

#
# IPVS scheduler
#
CONFIG_IP_VS_RR=m
CONFIG_IP_VS_WRR=m
CONFIG_IP_VS_LC=m
CONFIG_IP_VS_WLC=m
CONFIG_IP_VS_FO=m
CONFIG_IP_VS_LBLC=m
CONFIG_IP_VS_LBLCR=m
CONFIG_IP_VS_DH=m
CONFIG_IP_VS_SH=m
CONFIG_IP_VS_SED=m
CONFIG_IP_VS_NQ=m

#
# IPVS SH scheduler
#
CONFIG_IP_VS_SH_TAB_BITS=8

#
# IPVS application helper
#
CONFIG_IP_VS_FTP=m
CONFIG_IP_VS_NFCT=y
CONFIG_IP_VS_PE_SIP=m

#
# IP: Netfilter Configuration
#
CONFIG_NF_DEFRAG_IPV4=m
CONFIG_NF_CONNTRACK_IPV4=m
CONFIG_NF_CONNTRACK_PROC_COMPAT=y
CONFIG_NF_LOG_ARP=m
CONFIG_NF_LOG_IPV4=m
CONFIG_NF_TABLES_IPV4=m
CONFIG_NFT_CHAIN_ROUTE_IPV4=m
CONFIG_NF_REJECT_IPV4=m
CONFIG_NFT_REJECT_IPV4=m
CONFIG_NF_TABLES_ARP=m
CONFIG_NF_NAT_IPV4=m
CONFIG_NFT_CHAIN_NAT_IPV4=m
CONFIG_NF_NAT_MASQUERADE_IPV4=m
CONFIG_NFT_MASQ_IPV4=m
CONFIG_NF_NAT_SNMP_BASIC=m
CONFIG_NF_NAT_PROTO_GRE=m
CONFIG_NF_NAT_PPTP=m
CONFIG_NF_NAT_H323=m
CONFIG_IP_NF_IPTABLES=m
CONFIG_IP_NF_MATCH_AH=m
CONFIG_IP_NF_MATCH_ECN=m
CONFIG_IP_NF_MATCH_RPFILTER=m
CONFIG_IP_NF_MATCH_TTL=m
CONFIG_IP_NF_FILTER=m
CONFIG_IP_NF_TARGET_REJECT=m
CONFIG_IP_NF_TARGET_SYNPROXY=m
CONFIG_IP_NF_NAT=m
CONFIG_IP_NF_TARGET_MASQUERADE=m
CONFIG_IP_NF_TARGET_NETMAP=m
CONFIG_IP_NF_TARGET_REDIRECT=m
CONFIG_IP_NF_MANGLE=m
CONFIG_IP_NF_TARGET_CLUSTERIP=m
CONFIG_IP_NF_TARGET_ECN=m
CONFIG_IP_NF_TARGET_TTL=m
CONFIG_IP_NF_RAW=m
CONFIG_IP_NF_SECURITY=m
CONFIG_IP_NF_ARPTABLES=m
CONFIG_IP_NF_ARPFILTER=m
CONFIG_IP_NF_ARP_MANGLE=m

#
# IPv6: Netfilter Configuration
#
CONFIG_NF_DEFRAG_IPV6=m
CONFIG_NF_CONNTRACK_IPV6=m
CONFIG_NF_TABLES_IPV6=m
CONFIG_NFT_CHAIN_ROUTE_IPV6=m
CONFIG_NF_REJECT_IPV6=m
CONFIG_NFT_REJECT_IPV6=m
CONFIG_NF_LOG_IPV6=m
CONFIG_NF_NAT_IPV6=m
CONFIG_NFT_CHAIN_NAT_IPV6=m
CONFIG_NF_NAT_MASQUERADE_IPV6=m
CONFIG_NFT_MASQ_IPV6=m
CONFIG_IP6_NF_IPTABLES=m
CONFIG_IP6_NF_MATCH_AH=m
CONFIG_IP6_NF_MATCH_EUI64=m
CONFIG_IP6_NF_MATCH_FRAG=m
CONFIG_IP6_NF_MATCH_OPTS=m
CONFIG_IP6_NF_MATCH_HL=m
CONFIG_IP6_NF_MATCH_IPV6HEADER=m
CONFIG_IP6_NF_MATCH_MH=m
CONFIG_IP6_NF_MATCH_RPFILTER=m
CONFIG_IP6_NF_MATCH_RT=m
CONFIG_IP6_NF_TARGET_HL=m
CONFIG_IP6_NF_FILTER=m
CONFIG_IP6_NF_TARGET_REJECT=m
CONFIG_IP6_NF_TARGET_SYNPROXY=m
CONFIG_IP6_NF_MANGLE=m
CONFIG_IP6_NF_RAW=m
CONFIG_IP6_NF_SECURITY=m
CONFIG_IP6_NF_NAT=m
CONFIG_IP6_NF_TARGET_MASQUERADE=m
CONFIG_IP6_NF_TARGET_NPT=m
CONFIG_NF_TABLES_BRIDGE=m
CONFIG_NFT_BRIDGE_META=m
CONFIG_NFT_BRIDGE_REJECT=m
CONFIG_NF_LOG_BRIDGE=m
CONFIG_BRIDGE_NF_EBTABLES=m
CONFIG_BRIDGE_EBT_BROUTE=m
CONFIG_BRIDGE_EBT_T_FILTER=m
CONFIG_BRIDGE_EBT_T_NAT=m
CONFIG_BRIDGE_EBT_802_3=m
CONFIG_BRIDGE_EBT_AMONG=m
CONFIG_BRIDGE_EBT_ARP=m
CONFIG_BRIDGE_EBT_IP=m
CONFIG_BRIDGE_EBT_IP6=m
CONFIG_BRIDGE_EBT_LIMIT=m
CONFIG_BRIDGE_EBT_MARK=m
CONFIG_BRIDGE_EBT_PKTTYPE=m
CONFIG_BRIDGE_EBT_STP=m
CONFIG_BRIDGE_EBT_VLAN=m
CONFIG_BRIDGE_EBT_ARPREPLY=m
CONFIG_BRIDGE_EBT_DNAT=m
CONFIG_BRIDGE_EBT_MARK_T=m
CONFIG_BRIDGE_EBT_REDIRECT=m
CONFIG_BRIDGE_EBT_SNAT=m
CONFIG_BRIDGE_EBT_LOG=m
CONFIG_BRIDGE_EBT_NFLOG=m
CONFIG_IP_DCCP=m
CONFIG_INET_DCCP_DIAG=m

#
# DCCP CCIDs Configuration
#
# CONFIG_IP_DCCP_CCID2_DEBUG is not set
CONFIG_IP_DCCP_CCID3=y
# CONFIG_IP_DCCP_CCID3_DEBUG is not set
CONFIG_IP_DCCP_TFRC_LIB=y

#
# DCCP Kernel Hacking
#
# CONFIG_IP_DCCP_DEBUG is not set
CONFIG_NET_DCCPPROBE=m
CONFIG_IP_SCTP=m
CONFIG_NET_SCTPPROBE=m
# CONFIG_SCTP_DBG_OBJCNT is not set
CONFIG_SCTP_DEFAULT_COOKIE_HMAC_MD5=y
# CONFIG_SCTP_DEFAULT_COOKIE_HMAC_SHA1 is not set
# CONFIG_SCTP_DEFAULT_COOKIE_HMAC_NONE is not set
CONFIG_SCTP_COOKIE_HMAC_MD5=y
CONFIG_SCTP_COOKIE_HMAC_SHA1=y
CONFIG_RDS=m
CONFIG_RDS_TCP=m
# CONFIG_RDS_DEBUG is not set
CONFIG_TIPC=m
CONFIG_TIPC_PORTS=8191
CONFIG_ATM=m
CONFIG_ATM_CLIP=m
# CONFIG_ATM_CLIP_NO_ICMP is not set
CONFIG_ATM_LANE=m
CONFIG_ATM_MPOA=m
CONFIG_ATM_BR2684=m
# CONFIG_ATM_BR2684_IPFILTER is not set
CONFIG_L2TP=m
CONFIG_L2TP_DEBUGFS=m
CONFIG_L2TP_V3=y
CONFIG_L2TP_IP=m
CONFIG_L2TP_ETH=m
CONFIG_STP=m
CONFIG_GARP=m
CONFIG_MRP=m
CONFIG_BRIDGE=m
CONFIG_BRIDGE_IGMP_SNOOPING=y
CONFIG_BRIDGE_VLAN_FILTERING=y
CONFIG_HAVE_NET_DSA=y
CONFIG_VLAN_8021Q=m
CONFIG_VLAN_8021Q_GVRP=y
CONFIG_VLAN_8021Q_MVRP=y
# CONFIG_DECNET is not set
CONFIG_LLC=m
CONFIG_LLC2=m
# CONFIG_IPX is not set
CONFIG_ATALK=m
CONFIG_DEV_APPLETALK=m
CONFIG_IPDDP=m
CONFIG_IPDDP_ENCAP=y
# CONFIG_X25 is not set
# CONFIG_LAPB is not set
CONFIG_PHONET=m
CONFIG_6LOWPAN=m
CONFIG_IEEE802154=m
CONFIG_IEEE802154_6LOWPAN=m
# CONFIG_MAC802154 is not set
CONFIG_NET_SCHED=y

#
# Queueing/Scheduling
#
CONFIG_NET_SCH_CBQ=m
CONFIG_NET_SCH_HTB=m
CONFIG_NET_SCH_HFSC=m
CONFIG_NET_SCH_ATM=m
CONFIG_NET_SCH_PRIO=m
CONFIG_NET_SCH_MULTIQ=m
CONFIG_NET_SCH_RED=m
CONFIG_NET_SCH_SFB=m
CONFIG_NET_SCH_SFQ=m
CONFIG_NET_SCH_TEQL=m
CONFIG_NET_SCH_TBF=m
CONFIG_NET_SCH_GRED=m
CONFIG_NET_SCH_DSMARK=m
CONFIG_NET_SCH_NETEM=m
CONFIG_NET_SCH_DRR=m
CONFIG_NET_SCH_MQPRIO=m
CONFIG_NET_SCH_CHOKE=m
CONFIG_NET_SCH_QFQ=m
CONFIG_NET_SCH_CODEL=m
CONFIG_NET_SCH_FQ_CODEL=m
CONFIG_NET_SCH_FQ=m
CONFIG_NET_SCH_HHF=m
CONFIG_NET_SCH_PIE=m
CONFIG_NET_SCH_INGRESS=m
CONFIG_NET_SCH_PLUG=m

#
# Classification
#
CONFIG_NET_CLS=y
CONFIG_NET_CLS_BASIC=m
CONFIG_NET_CLS_TCINDEX=m
CONFIG_NET_CLS_ROUTE4=m
CONFIG_NET_CLS_FW=m
CONFIG_NET_CLS_U32=m
CONFIG_CLS_U32_PERF=y
CONFIG_CLS_U32_MARK=y
CONFIG_NET_CLS_RSVP=m
CONFIG_NET_CLS_RSVP6=m
CONFIG_NET_CLS_FLOW=m
CONFIG_NET_CLS_CGROUP=m
CONFIG_NET_CLS_BPF=m
CONFIG_NET_EMATCH=y
CONFIG_NET_EMATCH_STACK=32
CONFIG_NET_EMATCH_CMP=m
CONFIG_NET_EMATCH_NBYTE=m
CONFIG_NET_EMATCH_U32=m
CONFIG_NET_EMATCH_META=m
CONFIG_NET_EMATCH_TEXT=m
CONFIG_NET_EMATCH_CANID=m
CONFIG_NET_EMATCH_IPSET=m
CONFIG_NET_CLS_ACT=y
CONFIG_NET_ACT_POLICE=m
CONFIG_NET_ACT_GACT=m
CONFIG_GACT_PROB=y
CONFIG_NET_ACT_MIRRED=m
CONFIG_NET_ACT_IPT=m
CONFIG_NET_ACT_NAT=m
CONFIG_NET_ACT_PEDIT=m
CONFIG_NET_ACT_SIMP=m
CONFIG_NET_ACT_SKBEDIT=m
CONFIG_NET_ACT_CSUM=m
CONFIG_NET_CLS_IND=y
CONFIG_NET_SCH_FIFO=y
CONFIG_DCB=y
CONFIG_DNS_RESOLVER=y
CONFIG_BATMAN_ADV=m
CONFIG_BATMAN_ADV_BLA=y
CONFIG_BATMAN_ADV_DAT=y
CONFIG_BATMAN_ADV_NC=y
CONFIG_BATMAN_ADV_MCAST=y
# CONFIG_BATMAN_ADV_DEBUG is not set
CONFIG_OPENVSWITCH=m
CONFIG_OPENVSWITCH_GRE=y
CONFIG_OPENVSWITCH_VXLAN=y
CONFIG_OPENVSWITCH_GENEVE=y
# CONFIG_VSOCKETS is not set
CONFIG_NETLINK_MMAP=y
CONFIG_NETLINK_DIAG=m
CONFIG_NET_MPLS_GSO=y
# CONFIG_HSR is not set
CONFIG_RPS=y
CONFIG_RFS_ACCEL=y
CONFIG_XPS=y
CONFIG_CGROUP_NET_PRIO=y
CONFIG_CGROUP_NET_CLASSID=y
CONFIG_NET_RX_BUSY_POLL=y
CONFIG_BQL=y
CONFIG_BPF_JIT=y
CONFIG_NET_FLOW_LIMIT=y

#
# Network testing
#
CONFIG_NET_PKTGEN=m
# CONFIG_NET_TCPPROBE is not set
CONFIG_NET_DROP_MONITOR=m
CONFIG_HAMRADIO=y

#
# Packet Radio protocols
#
CONFIG_AX25=m
CONFIG_AX25_DAMA_SLAVE=y
CONFIG_NETROM=m
CONFIG_ROSE=m

#
# AX.25 network device drivers
#
CONFIG_MKISS=m
CONFIG_6PACK=m
CONFIG_BPQETHER=m
CONFIG_BAYCOM_SER_FDX=m
CONFIG_BAYCOM_SER_HDX=m
CONFIG_BAYCOM_PAR=m
CONFIG_BAYCOM_EPP=m
CONFIG_YAM=m
CONFIG_CAN=m
CONFIG_CAN_RAW=m
CONFIG_CAN_BCM=m
CONFIG_CAN_GW=m

#
# CAN Device Drivers
#
CONFIG_CAN_VCAN=m
CONFIG_CAN_SLCAN=m
CONFIG_CAN_DEV=m
CONFIG_CAN_CALC_BITTIMING=y
# CONFIG_CAN_LEDS is not set
# CONFIG_CAN_TI_HECC is not set
# CONFIG_CAN_FLEXCAN is not set
# CONFIG_CAN_GRCAN is not set
# CONFIG_CAN_RCAR is not set
CONFIG_CAN_SJA1000=m
CONFIG_CAN_SJA1000_ISA=m
# CONFIG_CAN_SJA1000_PLATFORM is not set
# CONFIG_CAN_C_CAN is not set
# CONFIG_CAN_M_CAN is not set
# CONFIG_CAN_CC770 is not set

#
# CAN SPI interfaces
#
# CONFIG_CAN_MCP251X is not set

#
# CAN USB interfaces
#
CONFIG_CAN_EMS_USB=m
CONFIG_CAN_ESD_USB2=m
CONFIG_CAN_GS_USB=m
CONFIG_CAN_KVASER_USB=m
CONFIG_CAN_PEAK_USB=m
CONFIG_CAN_8DEV_USB=m
CONFIG_CAN_SOFTING=m
# CONFIG_CAN_DEBUG_DEVICES is not set
CONFIG_IRDA=m

#
# IrDA protocols
#
CONFIG_IRLAN=m
CONFIG_IRNET=m
CONFIG_IRCOMM=m
CONFIG_IRDA_ULTRA=y

#
# IrDA options
#
CONFIG_IRDA_CACHE_LAST_LSAP=y
CONFIG_IRDA_FAST_RR=y
# CONFIG_IRDA_DEBUG is not set

#
# Infrared-port device drivers
#

#
# SIR device drivers
#
CONFIG_IRTTY_SIR=m

#
# Dongle support
#
CONFIG_DONGLE=y
CONFIG_ESI_DONGLE=m
CONFIG_ACTISYS_DONGLE=m
CONFIG_TEKRAM_DONGLE=m
CONFIG_TOIM3232_DONGLE=m
CONFIG_LITELINK_DONGLE=m
CONFIG_MA600_DONGLE=m
CONFIG_GIRBIL_DONGLE=m
CONFIG_MCP2120_DONGLE=m
CONFIG_OLD_BELKIN_DONGLE=m
CONFIG_ACT200L_DONGLE=m
CONFIG_KINGSUN_DONGLE=m
CONFIG_KSDAZZLE_DONGLE=m
CONFIG_KS959_DONGLE=m

#
# FIR device drivers
#
CONFIG_USB_IRDA=m
CONFIG_SIGMATEL_FIR=m
CONFIG_MCS_FIR=m
CONFIG_BT=m
CONFIG_BT_6LOWPAN=m
CONFIG_BT_RFCOMM=m
CONFIG_BT_RFCOMM_TTY=y
CONFIG_BT_BNEP=m
CONFIG_BT_BNEP_MC_FILTER=y
CONFIG_BT_BNEP_PROTO_FILTER=y
CONFIG_BT_HIDP=m

#
# Bluetooth device drivers
#
CONFIG_BT_HCIBTUSB=m
CONFIG_BT_HCIBTSDIO=m
# CONFIG_BT_HCIUART is not set
CONFIG_BT_HCIBCM203X=m
CONFIG_BT_HCIBPA10X=m
CONFIG_BT_HCIBFUSB=m
CONFIG_BT_HCIVHCI=m
CONFIG_BT_MRVL=m
CONFIG_BT_MRVL_SDIO=m
CONFIG_BT_ATH3K=m
CONFIG_BT_WILINK=m
CONFIG_AF_RXRPC=m
# CONFIG_AF_RXRPC_DEBUG is not set
CONFIG_RXKAD=m
CONFIG_FIB_RULES=y
CONFIG_WIRELESS=y
CONFIG_WIRELESS_EXT=y
CONFIG_WEXT_CORE=y
CONFIG_WEXT_PROC=y
CONFIG_WEXT_SPY=y
CONFIG_WEXT_PRIV=y
CONFIG_CFG80211=m
# CONFIG_NL80211_TESTMODE is not set
# CONFIG_CFG80211_DEVELOPER_WARNINGS is not set
# CONFIG_CFG80211_REG_DEBUG is not set
# CONFIG_CFG80211_CERTIFICATION_ONUS is not set
CONFIG_CFG80211_DEFAULT_PS=y
# CONFIG_CFG80211_DEBUGFS is not set
# CONFIG_CFG80211_INTERNAL_REGDB is not set
CONFIG_CFG80211_WEXT=y
CONFIG_LIB80211=m
CONFIG_LIB80211_CRYPT_WEP=m
CONFIG_LIB80211_CRYPT_CCMP=m
CONFIG_LIB80211_CRYPT_TKIP=m
# CONFIG_LIB80211_DEBUG is not set
CONFIG_MAC80211=m
CONFIG_MAC80211_HAS_RC=y
CONFIG_MAC80211_RC_MINSTREL=y
CONFIG_MAC80211_RC_MINSTREL_HT=y
CONFIG_MAC80211_RC_DEFAULT_MINSTREL=y
CONFIG_MAC80211_RC_DEFAULT="minstrel_ht"
CONFIG_MAC80211_MESH=y
CONFIG_MAC80211_LEDS=y
# CONFIG_MAC80211_DEBUGFS is not set
# CONFIG_MAC80211_MESSAGE_TRACING is not set
# CONFIG_MAC80211_DEBUG_MENU is not set
CONFIG_WIMAX=m
CONFIG_WIMAX_DEBUG_LEVEL=8
CONFIG_RFKILL=m
CONFIG_RFKILL_LEDS=y
CONFIG_RFKILL_INPUT=y
# CONFIG_RFKILL_GPIO is not set
CONFIG_NET_9P=m
# CONFIG_NET_9P_DEBUG is not set
# CONFIG_CAIF is not set
CONFIG_CEPH_LIB=m
# CONFIG_CEPH_LIB_PRETTYDEBUG is not set
# CONFIG_CEPH_LIB_USE_DNS_RESOLVER is not set
CONFIG_NFC=m
CONFIG_NFC_DIGITAL=m
# CONFIG_NFC_NCI is not set
# CONFIG_NFC_HCI is not set

#
# Near Field Communication (NFC) devices
#
CONFIG_NFC_PN533=m
# CONFIG_NFC_TRF7970A is not set
CONFIG_NFC_SIM=m
CONFIG_NFC_PORT100=m
CONFIG_HAVE_BPF_JIT=y

#
# Device Drivers
#

#
# Generic Driver Options
#
# CONFIG_UEVENT_HELPER is not set
CONFIG_DEVTMPFS=y
CONFIG_DEVTMPFS_MOUNT=y
CONFIG_STANDALONE=y
CONFIG_PREVENT_FIRMWARE_BUILD=y
CONFIG_FW_LOADER=y
# CONFIG_FIRMWARE_IN_KERNEL is not set
CONFIG_EXTRA_FIRMWARE=""
# CONFIG_FW_LOADER_USER_HELPER_FALLBACK is not set
CONFIG_ALLOW_DEV_COREDUMP=y
# CONFIG_DEBUG_DRIVER is not set
# CONFIG_DEBUG_DEVRES is not set
# CONFIG_SYS_HYPERVISOR is not set
# CONFIG_GENERIC_CPU_DEVICES is not set
CONFIG_REGMAP=y
CONFIG_REGMAP_I2C=m
CONFIG_REGMAP_SPI=m
CONFIG_REGMAP_MMIO=m
CONFIG_REGMAP_IRQ=y
CONFIG_DMA_SHARED_BUFFER=y
# CONFIG_FENCE_TRACE is not set
CONFIG_DMA_CMA=y

#
# Default contiguous memory area size:
#
CONFIG_CMA_SIZE_MBYTES=5
CONFIG_CMA_SIZE_SEL_MBYTES=y
# CONFIG_CMA_SIZE_SEL_PERCENTAGE is not set
# CONFIG_CMA_SIZE_SEL_MIN is not set
# CONFIG_CMA_SIZE_SEL_MAX is not set
CONFIG_CMA_ALIGNMENT=8

#
# Bus devices
#
# CONFIG_BRCMSTB_GISB_ARB is not set
# CONFIG_ARM_CCI is not set
# CONFIG_ARM_CCN is not set
# CONFIG_VEXPRESS_CONFIG is not set
CONFIG_CONNECTOR=y
CONFIG_PROC_EVENTS=y
CONFIG_MTD=m
# CONFIG_MTD_TESTS is not set
# CONFIG_MTD_REDBOOT_PARTS is not set
# CONFIG_MTD_CMDLINE_PARTS is not set
# CONFIG_MTD_AFS_PARTS is not set
CONFIG_MTD_OF_PARTS=m
CONFIG_MTD_AR7_PARTS=m

#
# User Modules And Translation Layers
#
CONFIG_MTD_BLKDEVS=m
CONFIG_MTD_BLOCK=m
CONFIG_MTD_BLOCK_RO=m
# CONFIG_FTL is not set
# CONFIG_NFTL is not set
# CONFIG_INFTL is not set
CONFIG_RFD_FTL=m
CONFIG_SSFDC=m
# CONFIG_SM_FTL is not set
CONFIG_MTD_OOPS=m
CONFIG_MTD_SWAP=m

#
# RAM/ROM/Flash chip drivers
#
# CONFIG_MTD_CFI is not set
# CONFIG_MTD_JEDECPROBE is not set
CONFIG_MTD_MAP_BANK_WIDTH_1=y
CONFIG_MTD_MAP_BANK_WIDTH_2=y
CONFIG_MTD_MAP_BANK_WIDTH_4=y
# CONFIG_MTD_MAP_BANK_WIDTH_8 is not set
# CONFIG_MTD_MAP_BANK_WIDTH_16 is not set
# CONFIG_MTD_MAP_BANK_WIDTH_32 is not set
CONFIG_MTD_CFI_I1=y
CONFIG_MTD_CFI_I2=y
# CONFIG_MTD_CFI_I4 is not set
# CONFIG_MTD_CFI_I8 is not set
CONFIG_MTD_RAM=m
# CONFIG_MTD_ROM is not set
# CONFIG_MTD_ABSENT is not set

#
# Mapping drivers for chip access
#
# CONFIG_MTD_COMPLEX_MAPPINGS is not set
CONFIG_MTD_PHYSMAP=m
# CONFIG_MTD_PHYSMAP_COMPAT is not set
# CONFIG_MTD_PHYSMAP_OF is not set
CONFIG_MTD_PLATRAM=m

#
# Self-contained MTD device drivers
#
CONFIG_MTD_DATAFLASH=m
# CONFIG_MTD_DATAFLASH_WRITE_VERIFY is not set
# CONFIG_MTD_DATAFLASH_OTP is not set
CONFIG_MTD_M25P80=m
CONFIG_MTD_SST25L=m
# CONFIG_MTD_SLRAM is not set
# CONFIG_MTD_PHRAM is not set
# CONFIG_MTD_MTDRAM is not set
# CONFIG_MTD_BLOCK2MTD is not set

#
# Disk-On-Chip Device Drivers
#
# CONFIG_MTD_DOCG3 is not set
# CONFIG_MTD_NAND is not set
CONFIG_MTD_ONENAND=m
CONFIG_MTD_ONENAND_VERIFY_WRITE=y
# CONFIG_MTD_ONENAND_GENERIC is not set
# CONFIG_MTD_ONENAND_OTP is not set
CONFIG_MTD_ONENAND_2X_PROGRAM=y

#
# LPDDR & LPDDR2 PCM memory drivers
#
CONFIG_MTD_LPDDR=m
CONFIG_MTD_QINFO_PROBE=m
# CONFIG_MTD_LPDDR2_NVM is not set
CONFIG_MTD_SPI_NOR=m
CONFIG_MTD_SPI_NOR_USE_4K_SECTORS=y
CONFIG_MTD_UBI=m
CONFIG_MTD_UBI_WL_THRESHOLD=4096
CONFIG_MTD_UBI_BEB_LIMIT=20
# CONFIG_MTD_UBI_FASTMAP is not set
# CONFIG_MTD_UBI_GLUEBI is not set
CONFIG_MTD_UBI_BLOCK=y
CONFIG_DTC=y
CONFIG_OF=y

#
# Device Tree and Open Firmware support
#
# CONFIG_OF_SELFTEST is not set
CONFIG_OF_FLATTREE=y
CONFIG_OF_EARLY_FLATTREE=y
CONFIG_OF_ADDRESS=y
CONFIG_OF_IRQ=y
CONFIG_OF_NET=y
CONFIG_OF_MDIO=m
CONFIG_OF_MTD=y
CONFIG_OF_RESERVED_MEM=y
CONFIG_ARCH_MIGHT_HAVE_PC_PARPORT=y
CONFIG_PARPORT=m
# CONFIG_PARPORT_PC is not set
# CONFIG_PARPORT_GSC is not set
# CONFIG_PARPORT_AX88796 is not set
CONFIG_PARPORT_1284=y
CONFIG_PARPORT_NOT_PC=y
CONFIG_BLK_DEV=y
CONFIG_BLK_DEV_NULL_BLK=m
CONFIG_ZRAM=m
# CONFIG_ZRAM_LZ4_COMPRESS is not set
# CONFIG_ZRAM_DEBUG is not set
# CONFIG_BLK_DEV_COW_COMMON is not set
CONFIG_BLK_DEV_LOOP=y
CONFIG_BLK_DEV_LOOP_MIN_COUNT=8
CONFIG_BLK_DEV_CRYPTOLOOP=m
CONFIG_BLK_DEV_DRBD=m
# CONFIG_DRBD_FAULT_INJECTION is not set
CONFIG_BLK_DEV_NBD=m
CONFIG_BLK_DEV_OSD=m
CONFIG_BLK_DEV_RAM=y
CONFIG_BLK_DEV_RAM_COUNT=16
CONFIG_BLK_DEV_RAM_SIZE=16384
# CONFIG_BLK_DEV_XIP is not set
CONFIG_CDROM_PKTCDVD=m
CONFIG_CDROM_PKTCDVD_BUFFERS=8
# CONFIG_CDROM_PKTCDVD_WCACHE is not set
CONFIG_ATA_OVER_ETH=m
# CONFIG_MG_DISK is not set
CONFIG_BLK_DEV_RBD=m

#
# Misc devices
#
CONFIG_SENSORS_LIS3LV02D=m
CONFIG_AD525X_DPOT=m
CONFIG_AD525X_DPOT_I2C=m
CONFIG_AD525X_DPOT_SPI=m
# CONFIG_DUMMY_IRQ is not set
CONFIG_ICS932S401=m
CONFIG_ENCLOSURE_SERVICES=m
CONFIG_APDS9802ALS=m
CONFIG_ISL29003=m
CONFIG_ISL29020=m
CONFIG_SENSORS_TSL2550=m
CONFIG_SENSORS_BH1780=m
CONFIG_SENSORS_BH1770=m
CONFIG_SENSORS_APDS990X=m
CONFIG_HMC6352=m
CONFIG_DS1682=m
CONFIG_TI_DAC7512=m
# CONFIG_BMP085_I2C is not set
# CONFIG_BMP085_SPI is not set
# CONFIG_USB_SWITCH_FSA9480 is not set
# CONFIG_LATTICE_ECP3_CONFIG is not set
# CONFIG_SRAM is not set
CONFIG_C2PORT=m

#
# EEPROM support
#
CONFIG_EEPROM_AT24=m
CONFIG_EEPROM_AT25=m
CONFIG_EEPROM_LEGACY=m
CONFIG_EEPROM_MAX6875=m
CONFIG_EEPROM_93CX6=m
# CONFIG_EEPROM_93XX46 is not set

#
# Texas Instruments shared transport line discipline
#
CONFIG_TI_ST=m
# CONFIG_SENSORS_LIS3_SPI is not set
CONFIG_SENSORS_LIS3_I2C=m

#
# Altera FPGA firmware download module
#
# CONFIG_ALTERA_STAPL is not set
CONFIG_BCM2708_VCHIQ=y

#
# Intel MIC Bus Driver
#

#
# Intel MIC Host Driver
#

#
# Intel MIC Card Driver
#
# CONFIG_ECHO is not set
# CONFIG_CXL_BASE is not set

#
# SCSI device support
#
CONFIG_SCSI_MOD=y
CONFIG_RAID_ATTRS=m
CONFIG_SCSI=y
CONFIG_SCSI_DMA=y
CONFIG_SCSI_NETLINK=y
# CONFIG_SCSI_MQ_DEFAULT is not set
# CONFIG_SCSI_PROC_FS is not set

#
# SCSI support type (disk, tape, CD-ROM)
#
CONFIG_BLK_DEV_SD=y
CONFIG_CHR_DEV_ST=m
CONFIG_CHR_DEV_OSST=m
CONFIG_BLK_DEV_SR=m
CONFIG_BLK_DEV_SR_VENDOR=y
CONFIG_CHR_DEV_SG=m
CONFIG_CHR_DEV_SCH=m
CONFIG_SCSI_ENCLOSURE=m
CONFIG_SCSI_CONSTANTS=y
CONFIG_SCSI_LOGGING=y
CONFIG_SCSI_SCAN_ASYNC=y

#
# SCSI Transports
#
CONFIG_SCSI_SPI_ATTRS=m
CONFIG_SCSI_FC_ATTRS=m
CONFIG_SCSI_ISCSI_ATTRS=y
CONFIG_SCSI_SAS_ATTRS=m
CONFIG_SCSI_SAS_LIBSAS=m
CONFIG_SCSI_SAS_ATA=y
CONFIG_SCSI_SAS_HOST_SMP=y
# CONFIG_SCSI_SRP_ATTRS is not set
CONFIG_SCSI_LOWLEVEL=y
CONFIG_ISCSI_TCP=m
CONFIG_ISCSI_BOOT_SYSFS=m
CONFIG_SCSI_UFSHCD=m
# CONFIG_SCSI_UFSHCD_PLATFORM is not set
CONFIG_LIBFC=m
CONFIG_LIBFCOE=m
# CONFIG_SCSI_DEBUG is not set
CONFIG_SCSI_DH=m
CONFIG_SCSI_DH_RDAC=m
CONFIG_SCSI_DH_HP_SW=m
CONFIG_SCSI_DH_EMC=m
CONFIG_SCSI_DH_ALUA=m
CONFIG_SCSI_OSD_INITIATOR=m
CONFIG_SCSI_OSD_ULD=m
CONFIG_SCSI_OSD_DPRINT_SENSE=1
# CONFIG_SCSI_OSD_DEBUG is not set
CONFIG_ATA=m
# CONFIG_ATA_NONSTANDARD is not set
CONFIG_ATA_VERBOSE_ERROR=y
CONFIG_SATA_PMP=y

#
# Controllers with non-SFF native interface
#
# CONFIG_SATA_AHCI_PLATFORM is not set
CONFIG_ATA_SFF=y

#
# SFF controllers with custom DMA interface
#
CONFIG_ATA_BMDMA=y

#
# SATA SFF controllers with BMDMA
#

#
# PATA SFF controllers with BMDMA
#

#
# PIO-only SFF controllers
#
# CONFIG_PATA_PLATFORM is not set

#
# Generic fallback / legacy drivers
#
CONFIG_MD=y
CONFIG_BLK_DEV_MD=m
CONFIG_MD_LINEAR=m
CONFIG_MD_RAID0=m
CONFIG_MD_RAID1=m
CONFIG_MD_RAID10=m
CONFIG_MD_RAID456=m
CONFIG_MD_MULTIPATH=m
CONFIG_MD_FAULTY=m
CONFIG_BCACHE=m
# CONFIG_BCACHE_DEBUG is not set
# CONFIG_BCACHE_CLOSURES_DEBUG is not set
CONFIG_BLK_DEV_DM_BUILTIN=y
CONFIG_BLK_DEV_DM=m
# CONFIG_DM_DEBUG is not set
CONFIG_DM_BUFIO=m
CONFIG_DM_BIO_PRISON=m
CONFIG_DM_PERSISTENT_DATA=m
# CONFIG_DM_DEBUG_BLOCK_STACK_TRACING is not set
CONFIG_DM_CRYPT=m
CONFIG_DM_SNAPSHOT=m
CONFIG_DM_THIN_PROVISIONING=m
CONFIG_DM_CACHE=m
CONFIG_DM_CACHE_MQ=m
CONFIG_DM_CACHE_CLEANER=m
CONFIG_DM_ERA=m
CONFIG_DM_MIRROR=m
CONFIG_DM_LOG_USERSPACE=m
CONFIG_DM_RAID=m
CONFIG_DM_ZERO=m
CONFIG_DM_MULTIPATH=m
CONFIG_DM_MULTIPATH_QL=m
CONFIG_DM_MULTIPATH_ST=m
CONFIG_DM_DELAY=m
CONFIG_DM_UEVENT=y
CONFIG_DM_FLAKEY=m
CONFIG_DM_VERITY=m
CONFIG_DM_SWITCH=m
CONFIG_TARGET_CORE=m
CONFIG_TCM_IBLOCK=m
CONFIG_TCM_FILEIO=m
CONFIG_TCM_PSCSI=m
# CONFIG_TCM_USER is not set
CONFIG_LOOPBACK_TARGET=m
CONFIG_TCM_FC=m
CONFIG_ISCSI_TARGET=m
CONFIG_NETDEVICES=y
CONFIG_MII=y
CONFIG_NET_CORE=y
CONFIG_BONDING=m
CONFIG_DUMMY=m
CONFIG_EQUALIZER=m
CONFIG_IFB=m
CONFIG_NET_TEAM=m
CONFIG_NET_TEAM_MODE_BROADCAST=m
CONFIG_NET_TEAM_MODE_ROUNDROBIN=m
CONFIG_NET_TEAM_MODE_RANDOM=m
CONFIG_NET_TEAM_MODE_ACTIVEBACKUP=m
CONFIG_NET_TEAM_MODE_LOADBALANCE=m
CONFIG_MACVLAN=m
CONFIG_MACVTAP=m
CONFIG_VXLAN=m
CONFIG_NETCONSOLE=m
CONFIG_NETCONSOLE_DYNAMIC=y
CONFIG_NETPOLL=y
CONFIG_NET_POLL_CONTROLLER=y
CONFIG_TUN=m
CONFIG_VETH=m
CONFIG_NLMON=m
CONFIG_ATM_DRIVERS=y
CONFIG_ATM_DUMMY=m
# CONFIG_ATM_TCP is not set

#
# CAIF transport drivers
#

#
# Distributed Switch Architecture drivers
#
# CONFIG_NET_DSA_MV88E6XXX is not set
# CONFIG_NET_DSA_MV88E6060 is not set
# CONFIG_NET_DSA_MV88E6XXX_NEED_PPU is not set
# CONFIG_NET_DSA_MV88E6131 is not set
# CONFIG_NET_DSA_MV88E6123_61_65 is not set
# CONFIG_NET_DSA_MV88E6171 is not set
# CONFIG_NET_DSA_BCM_SF2 is not set
CONFIG_ETHERNET=y
# CONFIG_ALTERA_TSE is not set
# CONFIG_NET_XGENE is not set
# CONFIG_NET_VENDOR_ARC is not set
CONFIG_NET_CADENCE=y
CONFIG_NET_VENDOR_BROADCOM=y
# CONFIG_B44 is not set
# CONFIG_BCMGENET is not set
# CONFIG_SYSTEMPORT is not set
CONFIG_NET_VENDOR_CIRRUS=y
# CONFIG_CS89x0 is not set
# CONFIG_DM9000 is not set
# CONFIG_DNET is not set
CONFIG_NET_VENDOR_FARADAY=y
# CONFIG_FTMAC100 is not set
# CONFIG_FTGMAC100 is not set
CONFIG_NET_VENDOR_HISILICON=y
# CONFIG_HIX5HD2_GMAC is not set
CONFIG_NET_VENDOR_INTEL=y
CONFIG_NET_VENDOR_I825XX=y
CONFIG_NET_VENDOR_MARVELL=y
# CONFIG_MVMDIO is not set
CONFIG_NET_VENDOR_MICREL=y
# CONFIG_KS8842 is not set
# CONFIG_KS8851 is not set
# CONFIG_KS8851_MLL is not set
CONFIG_NET_VENDOR_MICROCHIP=y
# CONFIG_ENC28J60 is not set
CONFIG_NET_VENDOR_NATSEMI=y
CONFIG_NET_VENDOR_8390=y
# CONFIG_AX88796 is not set
# CONFIG_ETHOC is not set
CONFIG_NET_VENDOR_QUALCOMM=y
# CONFIG_QCA7000 is not set
CONFIG_NET_VENDOR_SAMSUNG=y
# CONFIG_SXGBE_ETH is not set
# CONFIG_NET_VENDOR_SEEQ is not set
CONFIG_NET_VENDOR_SMSC=y
# CONFIG_SMC91X is not set
# CONFIG_SMC911X is not set
# CONFIG_SMSC911X is not set
CONFIG_NET_VENDOR_STMICRO=y
# CONFIG_STMMAC_ETH is not set
CONFIG_NET_VENDOR_VIA=y
# CONFIG_VIA_RHINE is not set
CONFIG_VIA_VELOCITY=m
CONFIG_NET_VENDOR_WIZNET=y
# CONFIG_WIZNET_W5100 is not set
# CONFIG_WIZNET_W5300 is not set
CONFIG_PHYLIB=m

#
# MII PHY device drivers
#
CONFIG_AT803X_PHY=m
CONFIG_AMD_PHY=m
# CONFIG_AMD_XGBE_PHY is not set
CONFIG_MARVELL_PHY=m
CONFIG_DAVICOM_PHY=m
CONFIG_QSEMI_PHY=m
CONFIG_LXT_PHY=m
CONFIG_CICADA_PHY=m
CONFIG_VITESSE_PHY=m
CONFIG_SMSC_PHY=m
CONFIG_BROADCOM_PHY=m
# CONFIG_BCM7XXX_PHY is not set
CONFIG_BCM87XX_PHY=m
CONFIG_ICPLUS_PHY=m
CONFIG_REALTEK_PHY=m
CONFIG_NATIONAL_PHY=m
CONFIG_STE10XP=m
CONFIG_LSI_ET1011C_PHY=m
CONFIG_MICREL_PHY=m
CONFIG_MDIO_BITBANG=m
# CONFIG_MDIO_GPIO is not set
# CONFIG_MDIO_BUS_MUX_GPIO is not set
# CONFIG_MDIO_BUS_MUX_MMIOREG is not set
# CONFIG_MDIO_BCM_UNIMAC is not set
# CONFIG_MICREL_KS8995MA is not set
# CONFIG_PLIP is not set
CONFIG_PPP=m
CONFIG_PPP_BSDCOMP=m
CONFIG_PPP_DEFLATE=m
CONFIG_PPP_FILTER=y
CONFIG_PPP_MPPE=m
CONFIG_PPP_MULTILINK=y
CONFIG_PPPOATM=m
CONFIG_PPPOE=m
CONFIG_PPTP=m
CONFIG_PPPOL2TP=m
CONFIG_PPP_ASYNC=m
CONFIG_PPP_SYNC_TTY=m
CONFIG_SLIP=m
CONFIG_SLHC=m
CONFIG_SLIP_COMPRESSED=y
CONFIG_SLIP_SMART=y
CONFIG_SLIP_MODE_SLIP6=y
CONFIG_USB_NET_DRIVERS=y
CONFIG_USB_CATC=m
CONFIG_USB_KAWETH=m
CONFIG_USB_PEGASUS=m
CONFIG_USB_RTL8150=m
CONFIG_USB_RTL8152=m
CONFIG_USB_USBNET=y
CONFIG_USB_NET_AX8817X=m
CONFIG_USB_NET_AX88179_178A=m
CONFIG_USB_NET_CDCETHER=m
CONFIG_USB_NET_CDC_EEM=m
CONFIG_USB_NET_CDC_NCM=m
CONFIG_USB_NET_HUAWEI_CDC_NCM=m
CONFIG_USB_NET_CDC_MBIM=m
CONFIG_USB_NET_DM9601=m
CONFIG_USB_NET_SR9700=m
CONFIG_USB_NET_SR9800=m
CONFIG_USB_NET_SMSC75XX=m
CONFIG_USB_NET_SMSC95XX=y
CONFIG_USB_NET_GL620A=m
CONFIG_USB_NET_NET1080=m
CONFIG_USB_NET_PLUSB=m
CONFIG_USB_NET_MCS7830=m
CONFIG_USB_NET_RNDIS_HOST=m
CONFIG_USB_NET_CDC_SUBSET=m
CONFIG_USB_ALI_M5632=y
CONFIG_USB_AN2720=y
CONFIG_USB_BELKIN=y
CONFIG_USB_ARMLINUX=y
CONFIG_USB_EPSON2888=y
CONFIG_USB_KC2190=y
CONFIG_USB_NET_ZAURUS=m
CONFIG_USB_NET_CX82310_ETH=m
CONFIG_USB_NET_KALMIA=m
CONFIG_USB_NET_QMI_WWAN=m
CONFIG_USB_HSO=m
CONFIG_USB_NET_INT51X1=m
CONFIG_USB_CDC_PHONET=m
CONFIG_USB_IPHETH=m
CONFIG_USB_SIERRA_NET=m
CONFIG_USB_VL600=m
CONFIG_WLAN=y
CONFIG_LIBERTAS_THINFIRM=m
# CONFIG_LIBERTAS_THINFIRM_DEBUG is not set
CONFIG_LIBERTAS_THINFIRM_USB=m
CONFIG_AT76C50X_USB=m
CONFIG_USB_ZD1201=m
CONFIG_USB_NET_RNDIS_WLAN=m
CONFIG_RTL8187=m
CONFIG_RTL8187_LEDS=y
CONFIG_MAC80211_HWSIM=m
CONFIG_ATH_COMMON=m
CONFIG_ATH_CARDS=m
# CONFIG_ATH_DEBUG is not set
CONFIG_ATH9K_HW=m
CONFIG_ATH9K_COMMON=m
CONFIG_ATH9K_BTCOEX_SUPPORT=y
CONFIG_ATH9K=m
# CONFIG_ATH9K_AHB is not set
# CONFIG_ATH9K_DEBUGFS is not set
# CONFIG_ATH9K_DYNACK is not set
# CONFIG_ATH9K_WOW is not set
CONFIG_ATH9K_RFKILL=y
# CONFIG_ATH9K_CHANNEL_CONTEXT is not set
CONFIG_ATH9K_HTC=m
# CONFIG_ATH9K_HTC_DEBUGFS is not set
CONFIG_CARL9170=m
CONFIG_CARL9170_LEDS=y
CONFIG_CARL9170_WPC=y
# CONFIG_CARL9170_HWRNG is not set
CONFIG_ATH6KL=m
CONFIG_ATH6KL_SDIO=m
CONFIG_ATH6KL_USB=m
# CONFIG_ATH6KL_DEBUG is not set
# CONFIG_ATH6KL_TRACING is not set
CONFIG_AR5523=m
CONFIG_ATH10K=m
# CONFIG_ATH10K_DEBUG is not set
# CONFIG_ATH10K_DEBUGFS is not set
# CONFIG_ATH10K_TRACING is not set
# CONFIG_WCN36XX is not set
CONFIG_B43=m
CONFIG_B43_BCMA=y
CONFIG_B43_SSB=y
CONFIG_B43_BUSES_BCMA_AND_SSB=y
# CONFIG_B43_BUSES_BCMA is not set
# CONFIG_B43_BUSES_SSB is not set
CONFIG_B43_SDIO=y
CONFIG_B43_BCMA_PIO=y
CONFIG_B43_PIO=y
CONFIG_B43_PHY_G=y
# CONFIG_B43_PHY_N is not set
CONFIG_B43_PHY_LP=y
CONFIG_B43_PHY_HT=y
CONFIG_B43_LEDS=y
CONFIG_B43_HWRNG=y
# CONFIG_B43_DEBUG is not set
CONFIG_B43LEGACY=m
CONFIG_B43LEGACY_LEDS=y
CONFIG_B43LEGACY_HWRNG=y
CONFIG_B43LEGACY_DEBUG=y
CONFIG_B43LEGACY_DMA=y
CONFIG_B43LEGACY_PIO=y
CONFIG_B43LEGACY_DMA_AND_PIO_MODE=y
# CONFIG_B43LEGACY_DMA_MODE is not set
# CONFIG_B43LEGACY_PIO_MODE is not set
CONFIG_BRCMUTIL=m
CONFIG_BRCMSMAC=m
CONFIG_BRCMFMAC=m
CONFIG_BRCMFMAC_PROTO_BCDC=y
# CONFIG_BRCMFMAC_SDIO is not set
CONFIG_BRCMFMAC_USB=y
# CONFIG_BRCM_TRACING is not set
# CONFIG_BRCMDBG is not set
CONFIG_HOSTAP=m
CONFIG_HOSTAP_FIRMWARE=y
# CONFIG_HOSTAP_FIRMWARE_NVRAM is not set
CONFIG_LIBERTAS=m
CONFIG_LIBERTAS_USB=m
CONFIG_LIBERTAS_SDIO=m
# CONFIG_LIBERTAS_SPI is not set
# CONFIG_LIBERTAS_DEBUG is not set
CONFIG_LIBERTAS_MESH=y
CONFIG_P54_COMMON=m
CONFIG_P54_USB=m
# CONFIG_P54_SPI is not set
CONFIG_P54_LEDS=y
CONFIG_RT2X00=m
CONFIG_RT2500USB=m
CONFIG_RT73USB=m
CONFIG_RT2800USB=m
CONFIG_RT2800USB_RT33XX=y
CONFIG_RT2800USB_RT35XX=y
CONFIG_RT2800USB_RT3573=y
CONFIG_RT2800USB_RT53XX=y
CONFIG_RT2800USB_RT55XX=y
CONFIG_RT2800USB_UNKNOWN=y
CONFIG_RT2800_LIB=m
CONFIG_RT2X00_LIB_USB=m
CONFIG_RT2X00_LIB=m
CONFIG_RT2X00_LIB_FIRMWARE=y
CONFIG_RT2X00_LIB_CRYPTO=y
CONFIG_RT2X00_LIB_LEDS=y
# CONFIG_RT2X00_DEBUG is not set
CONFIG_RTL8192CU=m
# CONFIG_WL_TI is not set
CONFIG_ZD1211RW=m
# CONFIG_ZD1211RW_DEBUG is not set
CONFIG_MWIFIEX=m
CONFIG_MWIFIEX_SDIO=m
# CONFIG_MWIFIEX_USB is not set
# CONFIG_CW1200 is not set
CONFIG_RSI_91X=m
CONFIG_RSI_DEBUGFS=y
# CONFIG_RSI_SDIO is not set
CONFIG_RSI_USB=m

#
# WiMAX Wireless Broadband devices
#
CONFIG_WIMAX_I2400M=m
CONFIG_WIMAX_I2400M_USB=m
CONFIG_WIMAX_I2400M_DEBUG_LEVEL=8
# CONFIG_WAN is not set
CONFIG_IEEE802154_DRIVERS=m
CONFIG_IEEE802154_FAKEHARD=m
# CONFIG_ISDN is not set

#
# Input device support
#
CONFIG_INPUT=y
CONFIG_INPUT_FF_MEMLESS=m
CONFIG_INPUT_POLLDEV=m
CONFIG_INPUT_SPARSEKMAP=m
# CONFIG_INPUT_MATRIXKMAP is not set

#
# Userland interfaces
#
CONFIG_INPUT_MOUSEDEV=y
# CONFIG_INPUT_MOUSEDEV_PSAUX is not set
CONFIG_INPUT_MOUSEDEV_SCREEN_X=1024
CONFIG_INPUT_MOUSEDEV_SCREEN_Y=768
CONFIG_INPUT_JOYDEV=m
CONFIG_INPUT_EVDEV=m
# CONFIG_INPUT_EVBUG is not set

#
# Input Device Drivers
#
# CONFIG_INPUT_KEYBOARD is not set
# CONFIG_INPUT_MOUSE is not set
CONFIG_INPUT_JOYSTICK=y
CONFIG_JOYSTICK_ANALOG=m
CONFIG_JOYSTICK_A3D=m
CONFIG_JOYSTICK_ADI=m
CONFIG_JOYSTICK_COBRA=m
CONFIG_JOYSTICK_GF2K=m
CONFIG_JOYSTICK_GRIP=m
CONFIG_JOYSTICK_GRIP_MP=m
CONFIG_JOYSTICK_GUILLEMOT=m
CONFIG_JOYSTICK_INTERACT=m
CONFIG_JOYSTICK_SIDEWINDER=m
CONFIG_JOYSTICK_TMDC=m
CONFIG_JOYSTICK_IFORCE=m
CONFIG_JOYSTICK_IFORCE_USB=y
CONFIG_JOYSTICK_IFORCE_232=y
CONFIG_JOYSTICK_WARRIOR=m
CONFIG_JOYSTICK_MAGELLAN=m
CONFIG_JOYSTICK_SPACEORB=m
CONFIG_JOYSTICK_SPACEBALL=m
CONFIG_JOYSTICK_STINGER=m
CONFIG_JOYSTICK_TWIDJOY=m
CONFIG_JOYSTICK_ZHENHUA=m
CONFIG_JOYSTICK_DB9=m
CONFIG_JOYSTICK_GAMECON=m
CONFIG_JOYSTICK_TURBOGRAFX=m
# CONFIG_JOYSTICK_AS5011 is not set
CONFIG_JOYSTICK_JOYDUMP=m
CONFIG_JOYSTICK_XPAD=m
CONFIG_JOYSTICK_XPAD_FF=y
CONFIG_JOYSTICK_XPAD_LEDS=y
CONFIG_JOYSTICK_WALKERA0701=m
CONFIG_INPUT_TABLET=y
CONFIG_TABLET_USB_ACECAD=m
CONFIG_TABLET_USB_AIPTEK=m
CONFIG_TABLET_USB_GTCO=m
CONFIG_TABLET_USB_HANWANG=m
CONFIG_TABLET_USB_KBTAB=m
CONFIG_TABLET_SERIAL_WACOM4=m
CONFIG_INPUT_TOUCHSCREEN=y
CONFIG_OF_TOUCHSCREEN=y
CONFIG_TOUCHSCREEN_ADS7846=m
CONFIG_TOUCHSCREEN_AD7877=m
CONFIG_TOUCHSCREEN_AD7879=m
CONFIG_TOUCHSCREEN_AD7879_I2C=m
# CONFIG_TOUCHSCREEN_AD7879_SPI is not set
# CONFIG_TOUCHSCREEN_AR1021_I2C is not set
CONFIG_TOUCHSCREEN_ATMEL_MXT=m
# CONFIG_TOUCHSCREEN_AUO_PIXCIR is not set
# CONFIG_TOUCHSCREEN_BU21013 is not set
# CONFIG_TOUCHSCREEN_CY8CTMG110 is not set
# CONFIG_TOUCHSCREEN_CYTTSP_CORE is not set
# CONFIG_TOUCHSCREEN_CYTTSP4_CORE is not set
CONFIG_TOUCHSCREEN_DYNAPRO=m
CONFIG_TOUCHSCREEN_HAMPSHIRE=m
# CONFIG_TOUCHSCREEN_EETI is not set
# CONFIG_TOUCHSCREEN_EGALAX is not set
CONFIG_TOUCHSCREEN_FUJITSU=m
# CONFIG_TOUCHSCREEN_ILI210X is not set
CONFIG_TOUCHSCREEN_GUNZE=m
CONFIG_TOUCHSCREEN_ELO=m
CONFIG_TOUCHSCREEN_WACOM_W8001=m
# CONFIG_TOUCHSCREEN_WACOM_I2C is not set
# CONFIG_TOUCHSCREEN_MAX11801 is not set
CONFIG_TOUCHSCREEN_MCS5000=m
# CONFIG_TOUCHSCREEN_MMS114 is not set
CONFIG_TOUCHSCREEN_MTOUCH=m
CONFIG_TOUCHSCREEN_INEXIO=m
CONFIG_TOUCHSCREEN_MK712=m
CONFIG_TOUCHSCREEN_PENMOUNT=m
# CONFIG_TOUCHSCREEN_EDT_FT5X06 is not set
CONFIG_TOUCHSCREEN_TOUCHRIGHT=m
CONFIG_TOUCHSCREEN_TOUCHWIN=m
CONFIG_TOUCHSCREEN_UCB1400=m
# CONFIG_TOUCHSCREEN_PIXCIR is not set
CONFIG_TOUCHSCREEN_WM97XX=m
CONFIG_TOUCHSCREEN_WM9705=y
CONFIG_TOUCHSCREEN_WM9712=y
CONFIG_TOUCHSCREEN_WM9713=y
CONFIG_TOUCHSCREEN_USB_COMPOSITE=m
CONFIG_TOUCHSCREEN_USB_EGALAX=y
CONFIG_TOUCHSCREEN_USB_PANJIT=y
CONFIG_TOUCHSCREEN_USB_3M=y
CONFIG_TOUCHSCREEN_USB_ITM=y
CONFIG_TOUCHSCREEN_USB_ETURBO=y
CONFIG_TOUCHSCREEN_USB_GUNZE=y
CONFIG_TOUCHSCREEN_USB_DMC_TSC10=y
CONFIG_TOUCHSCREEN_USB_IRTOUCH=y
CONFIG_TOUCHSCREEN_USB_IDEALTEK=y
CONFIG_TOUCHSCREEN_USB_GENERAL_TOUCH=y
CONFIG_TOUCHSCREEN_USB_GOTOP=y
CONFIG_TOUCHSCREEN_USB_JASTEC=y
CONFIG_TOUCHSCREEN_USB_ELO=y
CONFIG_TOUCHSCREEN_USB_E2I=y
CONFIG_TOUCHSCREEN_USB_ZYTRONIC=y
CONFIG_TOUCHSCREEN_USB_ETT_TC45USB=y
CONFIG_TOUCHSCREEN_USB_NEXIO=y
CONFIG_TOUCHSCREEN_USB_EASYTOUCH=y
CONFIG_TOUCHSCREEN_TOUCHIT213=m
# CONFIG_TOUCHSCREEN_TSC_SERIO is not set
# CONFIG_TOUCHSCREEN_TSC2005 is not set
CONFIG_TOUCHSCREEN_TSC2007=m
# CONFIG_TOUCHSCREEN_ST1232 is not set
CONFIG_TOUCHSCREEN_SUR40=m
CONFIG_TOUCHSCREEN_TPS6507X=m
# CONFIG_TOUCHSCREEN_ZFORCE is not set
CONFIG_INPUT_MISC=y
CONFIG_INPUT_AD714X=m
CONFIG_INPUT_AD714X_I2C=m
CONFIG_INPUT_AD714X_SPI=m
# CONFIG_INPUT_ARIZONA_HAPTICS is not set
# CONFIG_INPUT_BMA150 is not set
# CONFIG_INPUT_MMA8450 is not set
# CONFIG_INPUT_MPU3050 is not set
# CONFIG_INPUT_GP2A is not set
# CONFIG_INPUT_GPIO_BEEPER is not set
# CONFIG_INPUT_GPIO_TILT_POLLED is not set
CONFIG_INPUT_ATI_REMOTE2=m
CONFIG_INPUT_KEYSPAN_REMOTE=m
# CONFIG_INPUT_KXTJ9 is not set
CONFIG_INPUT_POWERMATE=m
CONFIG_INPUT_YEALINK=m
CONFIG_INPUT_CM109=m
CONFIG_INPUT_UINPUT=m
# CONFIG_INPUT_PCF8574 is not set
CONFIG_INPUT_GPIO_ROTARY_ENCODER=m
CONFIG_INPUT_ADXL34X=m
CONFIG_INPUT_ADXL34X_I2C=m
CONFIG_INPUT_ADXL34X_SPI=m
# CONFIG_INPUT_IMS_PCU is not set
CONFIG_INPUT_CMA3000=m
# CONFIG_INPUT_CMA3000_I2C is not set
# CONFIG_INPUT_DRV260X_HAPTICS is not set
# CONFIG_INPUT_DRV2667_HAPTICS is not set

#
# Hardware I/O ports
#
CONFIG_SERIO=m
CONFIG_SERIO_SERPORT=m
# CONFIG_SERIO_PARKBD is not set
# CONFIG_SERIO_AMBAKMI is not set
# CONFIG_SERIO_LIBPS2 is not set
CONFIG_SERIO_RAW=m
CONFIG_SERIO_ALTERA_PS2=m
# CONFIG_SERIO_PS2MULT is not set
# CONFIG_SERIO_ARC_PS2 is not set
# CONFIG_SERIO_APBPS2 is not set
CONFIG_GAMEPORT=m
CONFIG_GAMEPORT_NS558=m
CONFIG_GAMEPORT_L4=m

#
# Character devices
#
CONFIG_TTY=y
CONFIG_VT=y
CONFIG_CONSOLE_TRANSLATIONS=y
CONFIG_VT_CONSOLE=y
CONFIG_VT_CONSOLE_SLEEP=y
CONFIG_HW_CONSOLE=y
CONFIG_VT_HW_CONSOLE_BINDING=y
CONFIG_UNIX98_PTYS=y
CONFIG_DEVPTS_MULTIPLE_INSTANCES=y
# CONFIG_LEGACY_PTYS is not set
# CONFIG_SERIAL_NONSTANDARD is not set
CONFIG_N_GSM=m
# CONFIG_TRACE_SINK is not set
# CONFIG_DEVKMEM is not set

#
# Serial drivers
#
CONFIG_SERIAL_EARLYCON=y
# CONFIG_SERIAL_8250 is not set

#
# Non-8250 serial port support
#
# CONFIG_SERIAL_AMBA_PL010 is not set
CONFIG_SERIAL_AMBA_PL011=y
CONFIG_SERIAL_AMBA_PL011_CONSOLE=y
# CONFIG_SERIAL_EARLYCON_ARM_SEMIHOST is not set
# CONFIG_SERIAL_KGDB_NMI is not set
# CONFIG_SERIAL_MAX3100 is not set
# CONFIG_SERIAL_MAX310X is not set
CONFIG_SERIAL_CORE=y
CONFIG_SERIAL_CORE_CONSOLE=y
CONFIG_CONSOLE_POLL=y
# CONFIG_SERIAL_SCCNXP is not set
# CONFIG_SERIAL_SC16IS7XX is not set
# CONFIG_SERIAL_ALTERA_JTAGUART is not set
# CONFIG_SERIAL_ALTERA_UART is not set
# CONFIG_SERIAL_IFX6X60 is not set
# CONFIG_SERIAL_XILINX_PS_UART is not set
# CONFIG_SERIAL_ARC is not set
# CONFIG_SERIAL_FSL_LPUART is not set
# CONFIG_SERIAL_ST_ASC is not set
CONFIG_TTY_PRINTK=y
# CONFIG_PRINTER is not set
# CONFIG_PPDEV is not set
# CONFIG_HVC_DCC is not set
# CONFIG_IPMI_HANDLER is not set
CONFIG_HW_RANDOM=y
# CONFIG_HW_RANDOM_TIMERIOMEM is not set
CONFIG_HW_RANDOM_BCM2708=m
# CONFIG_NVRAM is not set
# CONFIG_R3964 is not set
CONFIG_RAW_DRIVER=y
CONFIG_MAX_RAW_DEVS=256
# CONFIG_TCG_TPM is not set
CONFIG_BRCM_CHAR_DRIVERS=y
CONFIG_BCM_VC_CMA=y
CONFIG_BCM_VC_SM=y
# CONFIG_XILLYBUS is not set

#
# I2C support
#
CONFIG_I2C=y
CONFIG_I2C_BOARDINFO=y
CONFIG_I2C_COMPAT=y
CONFIG_I2C_CHARDEV=m
CONFIG_I2C_MUX=m

#
# Multiplexer I2C Chip support
#
# CONFIG_I2C_ARB_GPIO_CHALLENGE is not set
# CONFIG_I2C_MUX_GPIO is not set
# CONFIG_I2C_MUX_PCA9541 is not set
# CONFIG_I2C_MUX_PCA954x is not set
# CONFIG_I2C_MUX_PINCTRL is not set
CONFIG_I2C_HELPER_AUTO=y
CONFIG_I2C_ALGOBIT=m
CONFIG_I2C_ALGOPCA=m

#
# I2C Hardware Bus support
#

#
# I2C system bus drivers (mostly embedded / system-on-chip)
#
# CONFIG_I2C_BCM2835 is not set
CONFIG_I2C_BCM2708=m
CONFIG_I2C_BCM2708_BAUDRATE=100000
# CONFIG_I2C_CBUS_GPIO is not set
# CONFIG_I2C_DESIGNWARE_PLATFORM is not set
# CONFIG_I2C_GPIO is not set
# CONFIG_I2C_NOMADIK is not set
CONFIG_I2C_OCORES=m
CONFIG_I2C_PCA_PLATFORM=m
# CONFIG_I2C_PXA_PCI is not set
# CONFIG_I2C_RK3X is not set
CONFIG_I2C_SIMTEC=m
# CONFIG_I2C_XILINX is not set

#
# External I2C/SMBus adapter drivers
#
CONFIG_I2C_DIOLAN_U2C=m
# CONFIG_I2C_PARPORT is not set
# CONFIG_I2C_PARPORT_LIGHT is not set
CONFIG_I2C_ROBOTFUZZ_OSIF=m
CONFIG_I2C_TAOS_EVM=m
CONFIG_I2C_TINY_USB=m
CONFIG_I2C_VIPERBOARD=m

#
# Other I2C/SMBus bus drivers
#
# CONFIG_I2C_STUB is not set
# CONFIG_I2C_DEBUG_CORE is not set
# CONFIG_I2C_DEBUG_ALGO is not set
# CONFIG_I2C_DEBUG_BUS is not set
CONFIG_SPI=y
# CONFIG_SPI_DEBUG is not set
CONFIG_SPI_MASTER=y

#
# SPI Master Controller Drivers
#
# CONFIG_SPI_ALTERA is not set
# CONFIG_SPI_BCM2835 is not set
CONFIG_SPI_BCM2708=m
CONFIG_SPI_BITBANG=m
CONFIG_SPI_BUTTERFLY=m
# CONFIG_SPI_CADENCE is not set
# CONFIG_SPI_GPIO is not set
CONFIG_SPI_LM70_LLP=m
# CONFIG_SPI_FSL_SPI is not set
# CONFIG_SPI_OC_TINY is not set
# CONFIG_SPI_PL022 is not set
# CONFIG_SPI_PXA2XX_PCI is not set
# CONFIG_SPI_ROCKCHIP is not set
# CONFIG_SPI_SC18IS602 is not set
# CONFIG_SPI_XCOMM is not set
# CONFIG_SPI_XILINX is not set
# CONFIG_SPI_DESIGNWARE is not set

#
# SPI Protocol Masters
#
CONFIG_SPI_SPIDEV=y
# CONFIG_SPI_TLE62X0 is not set
# CONFIG_SPMI is not set
# CONFIG_HSI is not set

#
# PPS support
#
CONFIG_PPS=m
# CONFIG_PPS_DEBUG is not set

#
# PPS clients support
#
# CONFIG_PPS_CLIENT_KTIMER is not set
CONFIG_PPS_CLIENT_LDISC=m
CONFIG_PPS_CLIENT_PARPORT=m
CONFIG_PPS_CLIENT_GPIO=m

#
# PPS generators support
#

#
# PTP clock support
#
CONFIG_PTP_1588_CLOCK=m

#
# Enable PHYLIB and NETWORK_PHY_TIMESTAMPING to see the additional clocks.
#
CONFIG_PINCTRL=y

#
# Pin controllers
#
CONFIG_PINMUX=y
CONFIG_PINCONF=y
# CONFIG_DEBUG_PINCTRL is not set
CONFIG_PINCTRL_BCM2835=y
# CONFIG_PINCTRL_SINGLE is not set
CONFIG_ARCH_HAVE_CUSTOM_GPIO_H=y
CONFIG_ARCH_REQUIRE_GPIOLIB=y
CONFIG_GPIOLIB=y
CONFIG_GPIO_DEVRES=y
CONFIG_OF_GPIO=y
# CONFIG_DEBUG_GPIO is not set
CONFIG_GPIO_SYSFS=y

#
# Memory mapped GPIO drivers:
#
# CONFIG_GPIO_GENERIC_PLATFORM is not set
# CONFIG_GPIO_DWAPB is not set
# CONFIG_GPIO_EM is not set
# CONFIG_GPIO_ZEVIO is not set
# CONFIG_GPIO_PL061 is not set
# CONFIG_GPIO_SCH311X is not set
# CONFIG_GPIO_GRGPIO is not set

#
# I2C GPIO expanders:
#
CONFIG_GPIO_ARIZONA=m
# CONFIG_GPIO_MAX7300 is not set
# CONFIG_GPIO_MAX732X is not set
# CONFIG_GPIO_PCA953X is not set
# CONFIG_GPIO_PCF857X is not set
# CONFIG_GPIO_SX150X is not set
# CONFIG_GPIO_ADP5588 is not set
# CONFIG_GPIO_ADNP is not set

#
# PCI GPIO expanders:
#

#
# SPI GPIO expanders:
#
# CONFIG_GPIO_MAX7301 is not set
# CONFIG_GPIO_MCP23S08 is not set
# CONFIG_GPIO_MC33880 is not set
# CONFIG_GPIO_74X164 is not set

#
# AC97 GPIO expanders:
#
# CONFIG_GPIO_UCB1400 is not set

#
# LPC GPIO expanders:
#

#
# MODULbus GPIO expanders:
#

#
# USB GPIO expanders:
#
CONFIG_GPIO_VIPERBOARD=m
CONFIG_W1=m
CONFIG_W1_CON=y

#
# 1-wire Bus Masters
#
CONFIG_W1_MASTER_DS2490=m
CONFIG_W1_MASTER_DS2482=m
CONFIG_W1_MASTER_DS1WM=m
CONFIG_W1_MASTER_GPIO=m

#
# 1-wire Slaves
#
CONFIG_W1_SLAVE_THERM=m
CONFIG_W1_SLAVE_SMEM=m
CONFIG_W1_SLAVE_DS2408=m
CONFIG_W1_SLAVE_DS2408_READBACK=y
CONFIG_W1_SLAVE_DS2413=m
CONFIG_W1_SLAVE_DS2406=m
CONFIG_W1_SLAVE_DS2423=m
CONFIG_W1_SLAVE_DS2431=m
CONFIG_W1_SLAVE_DS2433=m
# CONFIG_W1_SLAVE_DS2433_CRC is not set
CONFIG_W1_SLAVE_DS2760=m
CONFIG_W1_SLAVE_DS2780=m
CONFIG_W1_SLAVE_DS2781=m
CONFIG_W1_SLAVE_DS28E04=m
CONFIG_W1_SLAVE_BQ27000=m
CONFIG_POWER_SUPPLY=y
# CONFIG_POWER_SUPPLY_DEBUG is not set
# CONFIG_PDA_POWER is not set
# CONFIG_GENERIC_ADC_BATTERY is not set
# CONFIG_TEST_POWER is not set
CONFIG_BATTERY_DS2760=m
# CONFIG_BATTERY_DS2780 is not set
# CONFIG_BATTERY_DS2781 is not set
# CONFIG_BATTERY_DS2782 is not set
# CONFIG_BATTERY_SBS is not set
# CONFIG_BATTERY_BQ27x00 is not set
# CONFIG_BATTERY_MAX17040 is not set
# CONFIG_BATTERY_MAX17042 is not set
# CONFIG_CHARGER_MAX8903 is not set
# CONFIG_CHARGER_LP8727 is not set
# CONFIG_CHARGER_GPIO is not set
# CONFIG_CHARGER_BQ2415X is not set
# CONFIG_CHARGER_BQ24190 is not set
# CONFIG_CHARGER_BQ24735 is not set
# CONFIG_CHARGER_SMB347 is not set
# CONFIG_POWER_RESET is not set
# CONFIG_POWER_AVS is not set
# CONFIG_HWMON is not set
CONFIG_THERMAL=y
CONFIG_THERMAL_OF=y
CONFIG_THERMAL_DEFAULT_GOV_STEP_WISE=y
# CONFIG_THERMAL_DEFAULT_GOV_FAIR_SHARE is not set
# CONFIG_THERMAL_DEFAULT_GOV_USER_SPACE is not set
CONFIG_THERMAL_GOV_FAIR_SHARE=y
CONFIG_THERMAL_GOV_STEP_WISE=y
# CONFIG_THERMAL_GOV_BANG_BANG is not set
# CONFIG_THERMAL_GOV_USER_SPACE is not set
CONFIG_CPU_THERMAL=y
# CONFIG_THERMAL_EMULATION is not set
CONFIG_THERMAL_BCM2835=y

#
# Texas Instruments thermal drivers
#
CONFIG_WATCHDOG=y
CONFIG_WATCHDOG_CORE=y
# CONFIG_WATCHDOG_NOWAYOUT is not set

#
# Watchdog Device Drivers
#
CONFIG_SOFT_WATCHDOG=m
# CONFIG_GPIO_WATCHDOG is not set
# CONFIG_XILINX_WATCHDOG is not set
# CONFIG_ARM_SP805_WATCHDOG is not set
# CONFIG_CADENCE_WATCHDOG is not set
# CONFIG_DW_WATCHDOG is not set
# CONFIG_MAX63XX_WATCHDOG is not set
CONFIG_BCM2708_WDT=m
# CONFIG_MEN_A21_WDT is not set

#
# USB-based Watchdog Cards
#
# CONFIG_USBPCWATCHDOG is not set
CONFIG_SSB_POSSIBLE=y

#
# Sonics Silicon Backplane
#
CONFIG_SSB=m
CONFIG_SSB_BLOCKIO=y
CONFIG_SSB_SDIOHOST_POSSIBLE=y
CONFIG_SSB_SDIOHOST=y
# CONFIG_SSB_SILENT is not set
# CONFIG_SSB_DEBUG is not set
# CONFIG_SSB_DRIVER_GPIO is not set
CONFIG_BCMA_POSSIBLE=y

#
# Broadcom specific AMBA
#
CONFIG_BCMA=m
CONFIG_BCMA_BLOCKIO=y
# CONFIG_BCMA_HOST_SOC is not set
# CONFIG_BCMA_DRIVER_GMAC_CMN is not set
# CONFIG_BCMA_DRIVER_GPIO is not set
# CONFIG_BCMA_DEBUG is not set

#
# Multifunction device drivers
#
CONFIG_MFD_CORE=y
# CONFIG_MFD_AS3711 is not set
# CONFIG_MFD_AS3722 is not set
# CONFIG_PMIC_ADP5520 is not set
# CONFIG_MFD_AAT2870_CORE is not set
# CONFIG_MFD_BCM590XX is not set
# CONFIG_MFD_AXP20X is not set
# CONFIG_MFD_CROS_EC is not set
# CONFIG_MFD_ASIC3 is not set
# CONFIG_PMIC_DA903X is not set
# CONFIG_MFD_DA9052_SPI is not set
# CONFIG_MFD_DA9052_I2C is not set
# CONFIG_MFD_DA9055 is not set
# CONFIG_MFD_DA9063 is not set
# CONFIG_MFD_MC13XXX_SPI is not set
# CONFIG_MFD_MC13XXX_I2C is not set
# CONFIG_MFD_HI6421_PMIC is not set
# CONFIG_HTC_EGPIO is not set
# CONFIG_HTC_PASIC3 is not set
# CONFIG_HTC_I2CPLD is not set
# CONFIG_INTEL_SOC_PMIC is not set
# CONFIG_MFD_KEMPLD is not set
# CONFIG_MFD_88PM800 is not set
# CONFIG_MFD_88PM805 is not set
# CONFIG_MFD_88PM860X is not set
# CONFIG_MFD_MAX14577 is not set
# CONFIG_MFD_MAX77686 is not set
# CONFIG_MFD_MAX77693 is not set
# CONFIG_MFD_MAX8907 is not set
# CONFIG_MFD_MAX8925 is not set
# CONFIG_MFD_MAX8997 is not set
# CONFIG_MFD_MAX8998 is not set
# CONFIG_MFD_MENF21BMC is not set
# CONFIG_EZX_PCAP is not set
CONFIG_MFD_VIPERBOARD=m
# CONFIG_MFD_RETU is not set
# CONFIG_MFD_PCF50633 is not set
CONFIG_UCB1400_CORE=m
# CONFIG_MFD_PM8921_CORE is not set
CONFIG_MFD_RTSX_USB=m
# CONFIG_MFD_RC5T583 is not set
# CONFIG_MFD_RK808 is not set
# CONFIG_MFD_RN5T618 is not set
# CONFIG_MFD_SEC_CORE is not set
# CONFIG_MFD_SI476X_CORE is not set
# CONFIG_MFD_SM501 is not set
# CONFIG_MFD_SMSC is not set
# CONFIG_ABX500_CORE is not set
# CONFIG_MFD_STMPE is not set
# CONFIG_MFD_SYSCON is not set
# CONFIG_MFD_TI_AM335X_TSCADC is not set
# CONFIG_MFD_LP3943 is not set
# CONFIG_MFD_LP8788 is not set
# CONFIG_MFD_PALMAS is not set
# CONFIG_TPS6105X is not set
# CONFIG_TPS65010 is not set
# CONFIG_TPS6507X is not set
# CONFIG_MFD_TPS65090 is not set
# CONFIG_MFD_TPS65217 is not set
# CONFIG_MFD_TPS65218 is not set
# CONFIG_MFD_TPS6586X is not set
# CONFIG_MFD_TPS65910 is not set
# CONFIG_MFD_TPS65912 is not set
# CONFIG_MFD_TPS65912_I2C is not set
# CONFIG_MFD_TPS65912_SPI is not set
# CONFIG_MFD_TPS80031 is not set
# CONFIG_TWL4030_CORE is not set
# CONFIG_TWL6040_CORE is not set
CONFIG_MFD_WL1273_CORE=m
# CONFIG_MFD_LM3533 is not set
# CONFIG_MFD_TC3589X is not set
# CONFIG_MFD_TMIO is not set
# CONFIG_MFD_T7L66XB is not set
# CONFIG_MFD_TC6387XB is not set
# CONFIG_MFD_TC6393XB is not set
CONFIG_MFD_ARIZONA=y
CONFIG_MFD_ARIZONA_I2C=m
CONFIG_MFD_ARIZONA_SPI=m
CONFIG_MFD_WM5102=y
# CONFIG_MFD_WM5110 is not set
# CONFIG_MFD_WM8997 is not set
# CONFIG_MFD_WM8400 is not set
# CONFIG_MFD_WM831X_I2C is not set
# CONFIG_MFD_WM831X_SPI is not set
# CONFIG_MFD_WM8350_I2C is not set
# CONFIG_MFD_WM8994 is not set
# CONFIG_REGULATOR is not set
CONFIG_MEDIA_SUPPORT=m

#
# Multimedia core support
#
CONFIG_MEDIA_CAMERA_SUPPORT=y
CONFIG_MEDIA_ANALOG_TV_SUPPORT=y
CONFIG_MEDIA_DIGITAL_TV_SUPPORT=y
CONFIG_MEDIA_RADIO_SUPPORT=y
CONFIG_MEDIA_SDR_SUPPORT=y
CONFIG_MEDIA_RC_SUPPORT=y
CONFIG_MEDIA_CONTROLLER=y
CONFIG_VIDEO_DEV=m
# CONFIG_VIDEO_V4L2_SUBDEV_API is not set
CONFIG_VIDEO_V4L2=m
# CONFIG_VIDEO_ADV_DEBUG is not set
# CONFIG_VIDEO_FIXED_MINOR_RANGES is not set
CONFIG_VIDEO_TUNER=m
CONFIG_VIDEOBUF_GEN=m
CONFIG_VIDEOBUF_VMALLOC=m
CONFIG_VIDEOBUF_DVB=m
CONFIG_VIDEOBUF2_CORE=m
CONFIG_VIDEOBUF2_MEMOPS=m
CONFIG_VIDEOBUF2_VMALLOC=m
CONFIG_DVB_CORE=m
CONFIG_DVB_NET=y
CONFIG_TTPCI_EEPROM=m
CONFIG_DVB_MAX_ADAPTERS=8
CONFIG_DVB_DYNAMIC_MINORS=y

#
# Media drivers
#
CONFIG_RC_CORE=m
CONFIG_RC_MAP=m
CONFIG_RC_DECODERS=y
CONFIG_LIRC=m
CONFIG_IR_LIRC_CODEC=m
CONFIG_IR_NEC_DECODER=m
CONFIG_IR_RC5_DECODER=m
CONFIG_IR_RC6_DECODER=m
CONFIG_IR_JVC_DECODER=m
CONFIG_IR_SONY_DECODER=m
CONFIG_IR_SANYO_DECODER=m
CONFIG_IR_SHARP_DECODER=m
CONFIG_IR_MCE_KBD_DECODER=m
CONFIG_IR_XMP_DECODER=m
CONFIG_RC_DEVICES=y
CONFIG_RC_ATI_REMOTE=m
# CONFIG_IR_HIX5HD2 is not set
CONFIG_IR_IMON=m
CONFIG_IR_MCEUSB=m
CONFIG_IR_REDRAT3=m
CONFIG_IR_STREAMZAP=m
CONFIG_IR_IGUANA=m
CONFIG_IR_TTUSBIR=m
# CONFIG_IR_IMG is not set
CONFIG_RC_LOOPBACK=m
CONFIG_IR_GPIO_CIR=m
CONFIG_MEDIA_USB_SUPPORT=y

#
# Webcam devices
#
CONFIG_USB_VIDEO_CLASS=m
CONFIG_USB_VIDEO_CLASS_INPUT_EVDEV=y
CONFIG_USB_GSPCA=m
CONFIG_USB_M5602=m
CONFIG_USB_STV06XX=m
CONFIG_USB_GL860=m
CONFIG_USB_GSPCA_BENQ=m
CONFIG_USB_GSPCA_CONEX=m
CONFIG_USB_GSPCA_CPIA1=m
CONFIG_USB_GSPCA_DTCS033=m
CONFIG_USB_GSPCA_ETOMS=m
CONFIG_USB_GSPCA_FINEPIX=m
CONFIG_USB_GSPCA_JEILINJ=m
CONFIG_USB_GSPCA_JL2005BCD=m
CONFIG_USB_GSPCA_KINECT=m
CONFIG_USB_GSPCA_KONICA=m
CONFIG_USB_GSPCA_MARS=m
CONFIG_USB_GSPCA_MR97310A=m
CONFIG_USB_GSPCA_NW80X=m
CONFIG_USB_GSPCA_OV519=m
CONFIG_USB_GSPCA_OV534=m
CONFIG_USB_GSPCA_OV534_9=m
CONFIG_USB_GSPCA_PAC207=m
CONFIG_USB_GSPCA_PAC7302=m
CONFIG_USB_GSPCA_PAC7311=m
CONFIG_USB_GSPCA_SE401=m
CONFIG_USB_GSPCA_SN9C2028=m
CONFIG_USB_GSPCA_SN9C20X=m
CONFIG_USB_GSPCA_SONIXB=m
CONFIG_USB_GSPCA_SONIXJ=m
CONFIG_USB_GSPCA_SPCA500=m
CONFIG_USB_GSPCA_SPCA501=m
CONFIG_USB_GSPCA_SPCA505=m
CONFIG_USB_GSPCA_SPCA506=m
CONFIG_USB_GSPCA_SPCA508=m
CONFIG_USB_GSPCA_SPCA561=m
CONFIG_USB_GSPCA_SPCA1528=m
CONFIG_USB_GSPCA_SQ905=m
CONFIG_USB_GSPCA_SQ905C=m
CONFIG_USB_GSPCA_SQ930X=m
CONFIG_USB_GSPCA_STK014=m
CONFIG_USB_GSPCA_STK1135=m
CONFIG_USB_GSPCA_STV0680=m
CONFIG_USB_GSPCA_SUNPLUS=m
CONFIG_USB_GSPCA_T613=m
CONFIG_USB_GSPCA_TOPRO=m
CONFIG_USB_GSPCA_TV8532=m
CONFIG_USB_GSPCA_VC032X=m
CONFIG_USB_GSPCA_VICAM=m
CONFIG_USB_GSPCA_XIRLINK_CIT=m
CONFIG_USB_GSPCA_ZC3XX=m
CONFIG_USB_PWC=m
# CONFIG_USB_PWC_DEBUG is not set
CONFIG_USB_PWC_INPUT_EVDEV=y
CONFIG_VIDEO_CPIA2=m
CONFIG_USB_ZR364XX=m
CONFIG_USB_STKWEBCAM=m
CONFIG_USB_S2255=m
CONFIG_VIDEO_USBTV=m

#
# Analog TV USB devices
#
CONFIG_VIDEO_PVRUSB2=m
CONFIG_VIDEO_PVRUSB2_SYSFS=y
CONFIG_VIDEO_PVRUSB2_DVB=y
# CONFIG_VIDEO_PVRUSB2_DEBUGIFC is not set
CONFIG_VIDEO_HDPVR=m
CONFIG_VIDEO_TLG2300=m
CONFIG_VIDEO_USBVISION=m
CONFIG_VIDEO_STK1160_COMMON=m
CONFIG_VIDEO_STK1160_AC97=y
CONFIG_VIDEO_STK1160=m
CONFIG_VIDEO_GO7007=m
CONFIG_VIDEO_GO7007_USB=m
CONFIG_VIDEO_GO7007_LOADER=m
CONFIG_VIDEO_GO7007_USB_S2250_BOARD=m

#
# Analog/digital TV USB devices
#
CONFIG_VIDEO_AU0828=m
CONFIG_VIDEO_AU0828_V4L2=y
CONFIG_VIDEO_AU0828_RC=y
CONFIG_VIDEO_CX231XX=m
CONFIG_VIDEO_CX231XX_RC=y
CONFIG_VIDEO_CX231XX_ALSA=m
CONFIG_VIDEO_CX231XX_DVB=m
CONFIG_VIDEO_TM6000=m
CONFIG_VIDEO_TM6000_ALSA=m
CONFIG_VIDEO_TM6000_DVB=m

#
# Digital TV USB devices
#
CONFIG_DVB_USB=m
# CONFIG_DVB_USB_DEBUG is not set
CONFIG_DVB_USB_A800=m
CONFIG_DVB_USB_DIBUSB_MB=m
CONFIG_DVB_USB_DIBUSB_MB_FAULTY=y
CONFIG_DVB_USB_DIBUSB_MC=m
CONFIG_DVB_USB_DIB0700=m
CONFIG_DVB_USB_UMT_010=m
CONFIG_DVB_USB_CXUSB=m
CONFIG_DVB_USB_M920X=m
CONFIG_DVB_USB_DIGITV=m
CONFIG_DVB_USB_VP7045=m
CONFIG_DVB_USB_VP702X=m
CONFIG_DVB_USB_GP8PSK=m
CONFIG_DVB_USB_NOVA_T_USB2=m
CONFIG_DVB_USB_TTUSB2=m
CONFIG_DVB_USB_DTT200U=m
CONFIG_DVB_USB_OPERA1=m
CONFIG_DVB_USB_AF9005=m
CONFIG_DVB_USB_AF9005_REMOTE=m
CONFIG_DVB_USB_PCTV452E=m
CONFIG_DVB_USB_DW2102=m
CONFIG_DVB_USB_CINERGY_T2=m
CONFIG_DVB_USB_DTV5100=m
CONFIG_DVB_USB_FRIIO=m
CONFIG_DVB_USB_AZ6027=m
CONFIG_DVB_USB_TECHNISAT_USB2=m
CONFIG_DVB_USB_V2=m
CONFIG_DVB_USB_AF9015=m
CONFIG_DVB_USB_AF9035=m
CONFIG_DVB_USB_ANYSEE=m
CONFIG_DVB_USB_AU6610=m
CONFIG_DVB_USB_AZ6007=m
CONFIG_DVB_USB_CE6230=m
CONFIG_DVB_USB_EC168=m
CONFIG_DVB_USB_GL861=m
CONFIG_DVB_USB_LME2510=m
CONFIG_DVB_USB_MXL111SF=m
CONFIG_DVB_USB_RTL28XXU=m
CONFIG_DVB_USB_DVBSKY=m
CONFIG_SMS_USB_DRV=m
CONFIG_DVB_B2C2_FLEXCOP_USB=m
# CONFIG_DVB_B2C2_FLEXCOP_USB_DEBUG is not set
CONFIG_DVB_AS102=m

#
# Webcam, TV (analog/digital) USB devices
#
CONFIG_VIDEO_EM28XX=m
CONFIG_VIDEO_EM28XX_V4L2=m
CONFIG_VIDEO_EM28XX_ALSA=m
CONFIG_VIDEO_EM28XX_DVB=m
CONFIG_VIDEO_EM28XX_RC=m

#
# Software defined radio USB devices
#
CONFIG_USB_AIRSPY=m
CONFIG_USB_HACKRF=m
CONFIG_USB_MSI2500=m
CONFIG_V4L_PLATFORM_DRIVERS=y
# CONFIG_SOC_CAMERA is not set
CONFIG_VIDEO_BCM2835=y
CONFIG_VIDEO_BCM2835_MMAL=m
CONFIG_V4L_MEM2MEM_DRIVERS=y
# CONFIG_VIDEO_MEM2MEM_DEINTERLACE is not set
# CONFIG_VIDEO_SH_VEU is not set
CONFIG_V4L_TEST_DRIVERS=y
CONFIG_VIDEO_VIVID=m
# CONFIG_VIDEO_MEM2MEM_TESTDEV is not set

#
# Supported MMC/SDIO adapters
#
CONFIG_SMS_SDIO_DRV=m
CONFIG_MEDIA_PARPORT_SUPPORT=y
# CONFIG_VIDEO_BWQCAM is not set
# CONFIG_VIDEO_CQCAM is not set
# CONFIG_VIDEO_W9966 is not set
CONFIG_RADIO_ADAPTERS=y
CONFIG_RADIO_TEA575X=m
CONFIG_RADIO_SI470X=y
CONFIG_USB_SI470X=m
CONFIG_I2C_SI470X=m
CONFIG_RADIO_SI4713=m
# CONFIG_USB_SI4713 is not set
# CONFIG_PLATFORM_SI4713 is not set
CONFIG_I2C_SI4713=m
CONFIG_USB_MR800=m
CONFIG_USB_DSBR=m
CONFIG_RADIO_SHARK=m
CONFIG_RADIO_SHARK2=m
CONFIG_USB_KEENE=m
CONFIG_USB_RAREMONO=m
CONFIG_USB_MA901=m
CONFIG_RADIO_TEA5764=m
CONFIG_RADIO_SAA7706H=m
CONFIG_RADIO_TEF6862=m
CONFIG_RADIO_WL1273=m

#
# Texas Instruments WL128x FM driver (ST based)
#
CONFIG_RADIO_WL128X=m
CONFIG_MEDIA_COMMON_OPTIONS=y

#
# common driver options
#
CONFIG_VIDEO_CX2341X=m
CONFIG_VIDEO_TVEEPROM=m
CONFIG_CYPRESS_FIRMWARE=m
CONFIG_DVB_B2C2_FLEXCOP=m
CONFIG_SMS_SIANO_MDTV=m
CONFIG_SMS_SIANO_RC=y
# CONFIG_SMS_SIANO_DEBUGFS is not set

#
# Media ancillary drivers (tuners, sensors, i2c, frontends)
#
# CONFIG_MEDIA_SUBDRV_AUTOSELECT is not set
CONFIG_MEDIA_ATTACH=y
CONFIG_VIDEO_IR_I2C=m

#
# Encoders, decoders, sensors and other helper chips
#

#
# Audio decoders, processors and mixers
#
CONFIG_VIDEO_TVAUDIO=m
CONFIG_VIDEO_TDA7432=m
CONFIG_VIDEO_TDA9840=m
CONFIG_VIDEO_TEA6415C=m
CONFIG_VIDEO_TEA6420=m
CONFIG_VIDEO_MSP3400=m
# CONFIG_VIDEO_CS5345 is not set
CONFIG_VIDEO_CS53L32A=m
CONFIG_VIDEO_TLV320AIC23B=m
CONFIG_VIDEO_UDA1342=m
CONFIG_VIDEO_WM8775=m
CONFIG_VIDEO_WM8739=m
# CONFIG_VIDEO_VP27SMPX is not set
CONFIG_VIDEO_SONY_BTF_MPX=m

#
# RDS decoders
#
CONFIG_VIDEO_SAA6588=m

#
# Video decoders
#
# CONFIG_VIDEO_ADV7180 is not set
# CONFIG_VIDEO_ADV7183 is not set
CONFIG_VIDEO_BT819=m
CONFIG_VIDEO_BT856=m
# CONFIG_VIDEO_BT866 is not set
CONFIG_VIDEO_KS0127=m
# CONFIG_VIDEO_ML86V7667 is not set
CONFIG_VIDEO_SAA7110=m
CONFIG_VIDEO_SAA711X=m
# CONFIG_VIDEO_SAA7191 is not set
# CONFIG_VIDEO_TVP514X is not set
CONFIG_VIDEO_TVP5150=m
# CONFIG_VIDEO_TVP7002 is not set
CONFIG_VIDEO_TW2804=m
CONFIG_VIDEO_TW9903=m
CONFIG_VIDEO_TW9906=m
CONFIG_VIDEO_VPX3220=m

#
# Video and audio decoders
#
# CONFIG_VIDEO_SAA717X is not set
CONFIG_VIDEO_CX25840=m

#
# Video encoders
#
CONFIG_VIDEO_SAA7127=m
CONFIG_VIDEO_SAA7185=m
CONFIG_VIDEO_ADV7170=m
CONFIG_VIDEO_ADV7175=m
# CONFIG_VIDEO_ADV7343 is not set
# CONFIG_VIDEO_ADV7393 is not set
# CONFIG_VIDEO_AK881X is not set
# CONFIG_VIDEO_THS8200 is not set

#
# Camera sensor devices
#
CONFIG_VIDEO_OV7640=m
CONFIG_VIDEO_OV7670=m
CONFIG_VIDEO_VS6624=m
CONFIG_VIDEO_MT9V011=m
CONFIG_VIDEO_SR030PC30=m

#
# Flash devices
#
# CONFIG_VIDEO_ADP1653 is not set
# CONFIG_VIDEO_AS3645A is not set
# CONFIG_VIDEO_LM3560 is not set
# CONFIG_VIDEO_LM3646 is not set

#
# Video improvement chips
#
CONFIG_VIDEO_UPD64031A=m
CONFIG_VIDEO_UPD64083=m

#
# Audio/Video compression chips
#
# CONFIG_VIDEO_SAA6752HS is not set

#
# Miscellaneous helper chips
#
# CONFIG_VIDEO_THS7303 is not set
# CONFIG_VIDEO_M52790 is not set

#
# Sensors used on soc_camera driver
#
CONFIG_MEDIA_TUNER=m

#
# Customize TV tuners
#
CONFIG_MEDIA_TUNER_SIMPLE=m
CONFIG_MEDIA_TUNER_TDA8290=m
CONFIG_MEDIA_TUNER_TDA827X=m
CONFIG_MEDIA_TUNER_TDA18271=m
CONFIG_MEDIA_TUNER_TDA9887=m
CONFIG_MEDIA_TUNER_TEA5761=m
CONFIG_MEDIA_TUNER_TEA5767=m
CONFIG_MEDIA_TUNER_MSI001=m
CONFIG_MEDIA_TUNER_MT20XX=m
CONFIG_MEDIA_TUNER_MT2060=m
CONFIG_MEDIA_TUNER_MT2063=m
CONFIG_MEDIA_TUNER_MT2266=m
CONFIG_MEDIA_TUNER_MT2131=m
CONFIG_MEDIA_TUNER_QT1010=m
CONFIG_MEDIA_TUNER_XC2028=m
CONFIG_MEDIA_TUNER_XC5000=m
CONFIG_MEDIA_TUNER_XC4000=m
CONFIG_MEDIA_TUNER_MXL5005S=m
CONFIG_MEDIA_TUNER_MXL5007T=m
CONFIG_MEDIA_TUNER_MC44S803=m
CONFIG_MEDIA_TUNER_MAX2165=m
CONFIG_MEDIA_TUNER_TDA18218=m
CONFIG_MEDIA_TUNER_FC0011=m
CONFIG_MEDIA_TUNER_FC0012=m
CONFIG_MEDIA_TUNER_FC0013=m
CONFIG_MEDIA_TUNER_TDA18212=m
CONFIG_MEDIA_TUNER_E4000=m
CONFIG_MEDIA_TUNER_FC2580=m
CONFIG_MEDIA_TUNER_M88TS2022=m
CONFIG_MEDIA_TUNER_TUA9001=m
CONFIG_MEDIA_TUNER_SI2157=m
CONFIG_MEDIA_TUNER_IT913X=m
CONFIG_MEDIA_TUNER_R820T=m
CONFIG_MEDIA_TUNER_MXL301RF=m
CONFIG_MEDIA_TUNER_QM1D1C0042=m

#
# Customise DVB Frontends
#

#
# Multistandard (satellite) frontends
#
CONFIG_DVB_STB0899=m
CONFIG_DVB_STB6100=m
CONFIG_DVB_STV090x=m
CONFIG_DVB_STV6110x=m
CONFIG_DVB_M88DS3103=m

#
# Multistandard (cable + terrestrial) frontends
#
CONFIG_DVB_DRXK=m
CONFIG_DVB_TDA18271C2DD=m
CONFIG_DVB_SI2165=m

#
# DVB-S (satellite) frontends
#
CONFIG_DVB_CX24110=m
CONFIG_DVB_CX24123=m
CONFIG_DVB_MT312=m
CONFIG_DVB_ZL10036=m
CONFIG_DVB_ZL10039=m
CONFIG_DVB_S5H1420=m
CONFIG_DVB_STV0288=m
CONFIG_DVB_STB6000=m
CONFIG_DVB_STV0299=m
CONFIG_DVB_STV6110=m
CONFIG_DVB_STV0900=m
CONFIG_DVB_TDA8083=m
CONFIG_DVB_TDA10086=m
CONFIG_DVB_TDA8261=m
CONFIG_DVB_VES1X93=m
CONFIG_DVB_TUNER_ITD1000=m
CONFIG_DVB_TUNER_CX24113=m
CONFIG_DVB_TDA826X=m
CONFIG_DVB_TUA6100=m
CONFIG_DVB_CX24116=m
CONFIG_DVB_CX24117=m
CONFIG_DVB_SI21XX=m
CONFIG_DVB_TS2020=m
CONFIG_DVB_DS3000=m
CONFIG_DVB_MB86A16=m
CONFIG_DVB_TDA10071=m

#
# DVB-T (terrestrial) frontends
#
CONFIG_DVB_SP8870=m
CONFIG_DVB_SP887X=m
CONFIG_DVB_CX22700=m
CONFIG_DVB_CX22702=m
CONFIG_DVB_S5H1432=m
CONFIG_DVB_DRXD=m
CONFIG_DVB_L64781=m
CONFIG_DVB_TDA1004X=m
CONFIG_DVB_NXT6000=m
CONFIG_DVB_MT352=m
CONFIG_DVB_ZL10353=m
CONFIG_DVB_DIB3000MB=m
CONFIG_DVB_DIB3000MC=m
CONFIG_DVB_DIB7000M=m
CONFIG_DVB_DIB7000P=m
CONFIG_DVB_DIB9000=m
CONFIG_DVB_TDA10048=m
CONFIG_DVB_AF9013=m
CONFIG_DVB_EC100=m
CONFIG_DVB_HD29L2=m
CONFIG_DVB_STV0367=m
CONFIG_DVB_CXD2820R=m
CONFIG_DVB_RTL2830=m
CONFIG_DVB_RTL2832=m
CONFIG_DVB_RTL2832_SDR=m
CONFIG_DVB_SI2168=m
CONFIG_DVB_AS102_FE=m

#
# DVB-C (cable) frontends
#
CONFIG_DVB_VES1820=m
CONFIG_DVB_TDA10021=m
CONFIG_DVB_TDA10023=m
CONFIG_DVB_STV0297=m

#
# ATSC (North American/Korean Terrestrial/Cable DTV) frontends
#
CONFIG_DVB_NXT200X=m
CONFIG_DVB_OR51211=m
CONFIG_DVB_OR51132=m
CONFIG_DVB_BCM3510=m
CONFIG_DVB_LGDT330X=m
CONFIG_DVB_LGDT3305=m
CONFIG_DVB_LG2160=m
CONFIG_DVB_S5H1409=m
CONFIG_DVB_AU8522=m
CONFIG_DVB_AU8522_DTV=m
CONFIG_DVB_AU8522_V4L=m
CONFIG_DVB_S5H1411=m

#
# ISDB-T (terrestrial) frontends
#
CONFIG_DVB_S921=m
CONFIG_DVB_DIB8000=m
CONFIG_DVB_MB86A20S=m
CONFIG_DVB_TC90522=m

#
# Digital terrestrial only tuners/PLL
#
CONFIG_DVB_PLL=m
CONFIG_DVB_TUNER_DIB0070=m
CONFIG_DVB_TUNER_DIB0090=m

#
# SEC control devices for DVB-S
#
CONFIG_DVB_DRX39XYJ=m
CONFIG_DVB_LNBP21=m
CONFIG_DVB_LNBP22=m
CONFIG_DVB_ISL6405=m
CONFIG_DVB_ISL6421=m
CONFIG_DVB_ISL6423=m
CONFIG_DVB_A8293=m
CONFIG_DVB_SP2=m
CONFIG_DVB_LGS8GL5=m
CONFIG_DVB_LGS8GXX=m
CONFIG_DVB_ATBM8830=m
CONFIG_DVB_TDA665x=m
CONFIG_DVB_IX2505V=m
CONFIG_DVB_M88RS2000=m
CONFIG_DVB_AF9033=m

#
# Tools to develop new frontends
#
CONFIG_DVB_DUMMY_FE=m

#
# Graphics support
#

#
# Direct Rendering Manager
#
# CONFIG_DRM is not set

#
# Frame buffer Devices
#
CONFIG_FB=y
CONFIG_FIRMWARE_EDID=y
CONFIG_FB_CMDLINE=y
# CONFIG_FB_DDC is not set
# CONFIG_FB_BOOT_VESA_SUPPORT is not set
CONFIG_FB_CFB_FILLRECT=y
CONFIG_FB_CFB_COPYAREA=y
CONFIG_FB_CFB_IMAGEBLIT=y
# CONFIG_FB_CFB_REV_PIXELS_IN_BYTE is not set
CONFIG_FB_SYS_FILLRECT=m
CONFIG_FB_SYS_COPYAREA=m
CONFIG_FB_SYS_IMAGEBLIT=m
# CONFIG_FB_FOREIGN_ENDIAN is not set
CONFIG_FB_SYS_FOPS=m
CONFIG_FB_DEFERRED_IO=y
# CONFIG_FB_SVGALIB is not set
# CONFIG_FB_MACMODES is not set
CONFIG_FB_BACKLIGHT=y
CONFIG_FB_MODE_HELPERS=y
# CONFIG_FB_TILEBLITTING is not set

#
# Frame buffer hardware drivers
#
CONFIG_FB_BCM2708=y
# CONFIG_FB_ARMCLCD is not set
# CONFIG_FB_UVESA is not set
# CONFIG_FB_OPENCORES is not set
# CONFIG_FB_S1D13XXX is not set
CONFIG_FB_SMSCUFX=m
CONFIG_FB_UDL=m
# CONFIG_FB_VIRTUAL is not set
# CONFIG_FB_METRONOME is not set
# CONFIG_FB_BROADSHEET is not set
# CONFIG_FB_AUO_K190X is not set
# CONFIG_FB_SIMPLE is not set
# CONFIG_FB_SSD1307 is not set
CONFIG_BACKLIGHT_LCD_SUPPORT=y
# CONFIG_LCD_CLASS_DEVICE is not set
CONFIG_BACKLIGHT_CLASS_DEVICE=y
# CONFIG_BACKLIGHT_GENERIC is not set
# CONFIG_BACKLIGHT_ADP8860 is not set
# CONFIG_BACKLIGHT_ADP8870 is not set
# CONFIG_BACKLIGHT_LM3639 is not set
# CONFIG_BACKLIGHT_GPIO is not set
# CONFIG_BACKLIGHT_LV5207LP is not set
# CONFIG_BACKLIGHT_BD6107 is not set
# CONFIG_VGASTATE is not set

#
# Console display driver support
#
CONFIG_DUMMY_CONSOLE=y
CONFIG_FRAMEBUFFER_CONSOLE=y
# CONFIG_FRAMEBUFFER_CONSOLE_DETECT_PRIMARY is not set
CONFIG_FRAMEBUFFER_CONSOLE_ROTATION=y
CONFIG_LOGO=y
# CONFIG_LOGO_LINUX_MONO is not set
# CONFIG_LOGO_LINUX_VGA16 is not set
CONFIG_LOGO_LINUX_CLUT224=y
CONFIG_SOUND=y
CONFIG_SOUND_OSS_CORE=y
# CONFIG_SOUND_OSS_CORE_PRECLAIM is not set
CONFIG_SND=m
CONFIG_SND_TIMER=m
CONFIG_SND_PCM=m
CONFIG_SND_DMAENGINE_PCM=m
CONFIG_SND_HWDEP=m
CONFIG_SND_RAWMIDI=m
CONFIG_SND_COMPRESS_OFFLOAD=m
CONFIG_SND_JACK=y
CONFIG_SND_SEQUENCER=m
CONFIG_SND_SEQ_DUMMY=m
CONFIG_SND_OSSEMUL=y
CONFIG_SND_MIXER_OSS=m
CONFIG_SND_PCM_OSS=m
CONFIG_SND_PCM_OSS_PLUGINS=y
CONFIG_SND_SEQUENCER_OSS=y
CONFIG_SND_HRTIMER=m
CONFIG_SND_SEQ_HRTIMER_DEFAULT=y
CONFIG_SND_DYNAMIC_MINORS=y
CONFIG_SND_MAX_CARDS=32
CONFIG_SND_SUPPORT_OLD_API=y
CONFIG_SND_VERBOSE_PROCFS=y
# CONFIG_SND_VERBOSE_PRINTK is not set
# CONFIG_SND_DEBUG is not set
CONFIG_SND_VMASTER=y
CONFIG_SND_RAWMIDI_SEQ=m
# CONFIG_SND_OPL3_LIB_SEQ is not set
# CONFIG_SND_OPL4_LIB_SEQ is not set
# CONFIG_SND_SBAWE_SEQ is not set
# CONFIG_SND_EMU10K1_SEQ is not set
CONFIG_SND_MPU401_UART=m
CONFIG_SND_AC97_CODEC=m
CONFIG_SND_DRIVERS=y
CONFIG_SND_DUMMY=m
CONFIG_SND_ALOOP=m
CONFIG_SND_VIRMIDI=m
CONFIG_SND_MTPAV=m
CONFIG_SND_MTS64=m
CONFIG_SND_SERIAL_U16550=m
CONFIG_SND_MPU401=m
CONFIG_SND_PORTMAN2X4=m
CONFIG_SND_AC97_POWER_SAVE=y
CONFIG_SND_AC97_POWER_SAVE_DEFAULT=0

#
# HD-Audio
#
CONFIG_SND_ARM=y
# CONFIG_SND_ARMAACI is not set
CONFIG_SND_BCM2835=m
CONFIG_SND_SPI=y
CONFIG_SND_USB=y
CONFIG_SND_USB_AUDIO=m
CONFIG_SND_USB_UA101=m
CONFIG_SND_USB_CAIAQ=m
CONFIG_SND_USB_CAIAQ_INPUT=y
CONFIG_SND_USB_6FIRE=m
CONFIG_SND_USB_HIFACE=m
CONFIG_SND_BCD2000=m
CONFIG_SND_SOC=m
CONFIG_SND_SOC_GENERIC_DMAENGINE_PCM=y
# CONFIG_SND_ATMEL_SOC is not set
CONFIG_SND_BCM2708_SOC_I2S=m
CONFIG_SND_BCM2708_SOC_HIFIBERRY_DAC=m
CONFIG_SND_BCM2708_SOC_HIFIBERRY_DACPLUS=m
CONFIG_SND_BCM2708_SOC_HIFIBERRY_DIGI=m
CONFIG_SND_BCM2708_SOC_HIFIBERRY_AMP=m
CONFIG_SND_BCM2708_SOC_RPI_DAC=m
CONFIG_SND_BCM2708_SOC_IQAUDIO_DAC=m
# CONFIG_SND_DESIGNWARE_I2S is not set

#
# SoC Audio for Freescale CPUs
#

#
# Common SoC Audio options for Freescale CPUs:
#
# CONFIG_SND_SOC_FSL_ASRC is not set
# CONFIG_SND_SOC_FSL_SAI is not set
# CONFIG_SND_SOC_FSL_SSI is not set
# CONFIG_SND_SOC_FSL_SPDIF is not set
# CONFIG_SND_SOC_FSL_ESAI is not set
# CONFIG_SND_SOC_IMX_AUDMUX is not set
CONFIG_SND_SOC_I2C_AND_SPI=m

#
# CODEC drivers
#
# CONFIG_SND_SOC_ADAU1701 is not set
# CONFIG_SND_SOC_AK4104 is not set
# CONFIG_SND_SOC_AK4554 is not set
# CONFIG_SND_SOC_AK4642 is not set
# CONFIG_SND_SOC_AK5386 is not set
# CONFIG_SND_SOC_ALC5623 is not set
# CONFIG_SND_SOC_CS35L32 is not set
# CONFIG_SND_SOC_CS42L52 is not set
# CONFIG_SND_SOC_CS42L56 is not set
# CONFIG_SND_SOC_CS42L73 is not set
# CONFIG_SND_SOC_CS4265 is not set
# CONFIG_SND_SOC_CS4270 is not set
# CONFIG_SND_SOC_CS4271 is not set
# CONFIG_SND_SOC_CS42XX8_I2C is not set
# CONFIG_SND_SOC_HDMI_CODEC is not set
# CONFIG_SND_SOC_ES8328 is not set
# CONFIG_SND_SOC_PCM1681 is not set
# CONFIG_SND_SOC_PCM1792A is not set
CONFIG_SND_SOC_PCM512x=m
CONFIG_SND_SOC_PCM512x_I2C=m
# CONFIG_SND_SOC_PCM512x_SPI is not set
CONFIG_SND_SOC_PCM1794A=m
CONFIG_SND_SOC_PCM5102A=m
# CONFIG_SND_SOC_SGTL5000 is not set
# CONFIG_SND_SOC_SIRF_AUDIO_CODEC is not set
# CONFIG_SND_SOC_SPDIF is not set
# CONFIG_SND_SOC_SSM2602_SPI is not set
# CONFIG_SND_SOC_SSM2602_I2C is not set
# CONFIG_SND_SOC_SSM4567 is not set
# CONFIG_SND_SOC_STA350 is not set
# CONFIG_SND_SOC_TAS2552 is not set
# CONFIG_SND_SOC_TAS5086 is not set
CONFIG_SND_SOC_TAS5713=m
# CONFIG_SND_SOC_TLV320AIC31XX is not set
# CONFIG_SND_SOC_TLV320AIC3X is not set
# CONFIG_SND_SOC_WM8510 is not set
# CONFIG_SND_SOC_WM8523 is not set
# CONFIG_SND_SOC_WM8580 is not set
# CONFIG_SND_SOC_WM8711 is not set
# CONFIG_SND_SOC_WM8728 is not set
CONFIG_SND_SOC_WM8731=m
# CONFIG_SND_SOC_WM8737 is not set
# CONFIG_SND_SOC_WM8741 is not set
# CONFIG_SND_SOC_WM8750 is not set
# CONFIG_SND_SOC_WM8753 is not set
# CONFIG_SND_SOC_WM8770 is not set
# CONFIG_SND_SOC_WM8776 is not set
CONFIG_SND_SOC_WM8804=m
# CONFIG_SND_SOC_WM8903 is not set
# CONFIG_SND_SOC_WM8962 is not set
# CONFIG_SND_SOC_WM8978 is not set
# CONFIG_SND_SOC_TPA6130A2 is not set
CONFIG_SND_SIMPLE_CARD=m
CONFIG_SOUND_PRIME=m
CONFIG_AC97_BUS=m

#
# HID support
#
CONFIG_HID=y
# CONFIG_HID_BATTERY_STRENGTH is not set
CONFIG_HIDRAW=y
CONFIG_UHID=m
CONFIG_HID_GENERIC=m

#
# Special HID drivers
#
CONFIG_HID_A4TECH=m
CONFIG_HID_ACRUX=m
CONFIG_HID_ACRUX_FF=y
CONFIG_HID_APPLE=m
# CONFIG_HID_APPLEIR is not set
CONFIG_HID_AUREAL=m
CONFIG_HID_BELKIN=m
CONFIG_HID_CHERRY=m
CONFIG_HID_CHICONY=m
CONFIG_HID_PRODIKEYS=m
CONFIG_HID_CP2112=m
CONFIG_HID_CYPRESS=m
CONFIG_HID_DRAGONRISE=m
CONFIG_DRAGONRISE_FF=y
CONFIG_HID_EMS_FF=m
CONFIG_HID_ELECOM=m
CONFIG_HID_ELO=m
CONFIG_HID_EZKEY=m
CONFIG_HID_HOLTEK=m
CONFIG_HOLTEK_FF=y
# CONFIG_HID_GT683R is not set
CONFIG_HID_HUION=m
CONFIG_HID_KEYTOUCH=m
CONFIG_HID_KYE=m
CONFIG_HID_UCLOGIC=m
CONFIG_HID_WALTOP=m
CONFIG_HID_GYRATION=m
CONFIG_HID_ICADE=m
CONFIG_HID_TWINHAN=m
CONFIG_HID_KENSINGTON=m
CONFIG_HID_LCPOWER=m
CONFIG_HID_LENOVO=m
CONFIG_HID_LOGITECH=m
CONFIG_HID_LOGITECH_DJ=m
CONFIG_LOGITECH_FF=y
CONFIG_LOGIRUMBLEPAD2_FF=y
CONFIG_LOGIG940_FF=y
CONFIG_LOGIWHEELS_FF=y
CONFIG_HID_MAGICMOUSE=m
CONFIG_HID_MICROSOFT=m
CONFIG_HID_MONTEREY=m
CONFIG_HID_MULTITOUCH=m
CONFIG_HID_NTRIG=m
CONFIG_HID_ORTEK=m
CONFIG_HID_PANTHERLORD=m
CONFIG_PANTHERLORD_FF=y
CONFIG_HID_PENMOUNT=m
CONFIG_HID_PETALYNX=m
CONFIG_HID_PICOLCD=m
CONFIG_HID_PICOLCD_FB=y
CONFIG_HID_PICOLCD_BACKLIGHT=y
CONFIG_HID_PICOLCD_LEDS=y
CONFIG_HID_PICOLCD_CIR=y
CONFIG_HID_PRIMAX=m
CONFIG_HID_ROCCAT=m
CONFIG_HID_SAITEK=m
CONFIG_HID_SAMSUNG=m
CONFIG_HID_SONY=m
CONFIG_SONY_FF=y
CONFIG_HID_SPEEDLINK=m
CONFIG_HID_STEELSERIES=m
CONFIG_HID_SUNPLUS=m
CONFIG_HID_RMI=m
CONFIG_HID_GREENASIA=m
CONFIG_GREENASIA_FF=y
CONFIG_HID_SMARTJOYPLUS=m
CONFIG_SMARTJOYPLUS_FF=y
CONFIG_HID_TIVO=m
CONFIG_HID_TOPSEED=m
CONFIG_HID_THINGM=m
CONFIG_HID_THRUSTMASTER=m
CONFIG_THRUSTMASTER_FF=y
CONFIG_HID_WACOM=m
CONFIG_HID_WIIMOTE=m
CONFIG_HID_XINMO=m
CONFIG_HID_ZEROPLUS=m
CONFIG_ZEROPLUS_FF=y
CONFIG_HID_ZYDACRON=m
CONFIG_HID_SENSOR_HUB=m

#
# USB HID support
#
CONFIG_USB_HID=y
CONFIG_HID_PID=y
CONFIG_USB_HIDDEV=y

#
# I2C HID support
#
# CONFIG_I2C_HID is not set
CONFIG_USB_OHCI_LITTLE_ENDIAN=y
CONFIG_USB_SUPPORT=y
CONFIG_USB_COMMON=y
CONFIG_USB_ARCH_HAS_HCD=y
CONFIG_USB=y
CONFIG_USB_ANNOUNCE_NEW_DEVICES=y

#
# Miscellaneous USB options
#
CONFIG_USB_DEFAULT_PERSIST=y
CONFIG_USB_DYNAMIC_MINORS=y
# CONFIG_USB_OTG is not set
# CONFIG_USB_OTG_WHITELIST is not set
# CONFIG_USB_OTG_BLACKLIST_HUB is not set
# CONFIG_USB_OTG_FSM is not set
CONFIG_USB_MON=m
CONFIG_USB_WUSB=m
CONFIG_USB_WUSB_CBAF=m
# CONFIG_USB_WUSB_CBAF_DEBUG is not set

#
# USB Host Controller Drivers
#
# CONFIG_USB_C67X00_HCD is not set
CONFIG_USB_XHCI_HCD=m
# CONFIG_USB_EHCI_HCD is not set
# CONFIG_USB_OXU210HP_HCD is not set
# CONFIG_USB_ISP116X_HCD is not set
# CONFIG_USB_ISP1760_HCD is not set
# CONFIG_USB_ISP1362_HCD is not set
# CONFIG_USB_FUSBH200_HCD is not set
# CONFIG_USB_FOTG210_HCD is not set
# CONFIG_USB_MAX3421_HCD is not set
# CONFIG_USB_OHCI_HCD is not set
CONFIG_USB_U132_HCD=m
# CONFIG_USB_SL811_HCD is not set
# CONFIG_USB_R8A66597_HCD is not set
CONFIG_USB_HWA_HCD=m
CONFIG_USB_DWCOTG=y
# CONFIG_USB_HCD_BCMA is not set
# CONFIG_USB_HCD_SSB is not set
# CONFIG_USB_HCD_TEST_MODE is not set

#
# USB Device Class drivers
#
CONFIG_USB_ACM=m
CONFIG_USB_PRINTER=m
CONFIG_USB_WDM=m
CONFIG_USB_TMC=m

#
# NOTE: USB_STORAGE depends on SCSI but BLK_DEV_SD may
#

#
# also be needed; see USB_STORAGE Help for more info
#
CONFIG_USB_STORAGE=y
# CONFIG_USB_STORAGE_DEBUG is not set
CONFIG_USB_STORAGE_REALTEK=m
CONFIG_REALTEK_AUTOPM=y
CONFIG_USB_STORAGE_DATAFAB=m
CONFIG_USB_STORAGE_FREECOM=m
CONFIG_USB_STORAGE_ISD200=m
CONFIG_USB_STORAGE_USBAT=m
CONFIG_USB_STORAGE_SDDR09=m
CONFIG_USB_STORAGE_SDDR55=m
CONFIG_USB_STORAGE_JUMPSHOT=m
CONFIG_USB_STORAGE_ALAUDA=m
CONFIG_USB_STORAGE_ONETOUCH=m
CONFIG_USB_STORAGE_KARMA=m
CONFIG_USB_STORAGE_CYPRESS_ATACB=m
CONFIG_USB_STORAGE_ENE_UB6250=m
CONFIG_USB_UAS=m

#
# USB Imaging devices
#
CONFIG_USB_MDC800=m
CONFIG_USB_MICROTEK=m
# CONFIG_USBIP_CORE is not set
# CONFIG_USB_MUSB_HDRC is not set
# CONFIG_USB_DWC3 is not set
# CONFIG_USB_DWC2 is not set

#
# USB port drivers
#
# CONFIG_USB_USS720 is not set
CONFIG_USB_SERIAL=m
CONFIG_USB_SERIAL_GENERIC=y
CONFIG_USB_SERIAL_SIMPLE=m
CONFIG_USB_SERIAL_AIRCABLE=m
CONFIG_USB_SERIAL_ARK3116=m
CONFIG_USB_SERIAL_BELKIN=m
CONFIG_USB_SERIAL_CH341=m
CONFIG_USB_SERIAL_WHITEHEAT=m
CONFIG_USB_SERIAL_DIGI_ACCELEPORT=m
CONFIG_USB_SERIAL_CP210X=m
CONFIG_USB_SERIAL_CYPRESS_M8=m
CONFIG_USB_SERIAL_EMPEG=m
CONFIG_USB_SERIAL_FTDI_SIO=m
CONFIG_USB_SERIAL_VISOR=m
CONFIG_USB_SERIAL_IPAQ=m
CONFIG_USB_SERIAL_IR=m
CONFIG_USB_SERIAL_EDGEPORT=m
CONFIG_USB_SERIAL_EDGEPORT_TI=m
CONFIG_USB_SERIAL_F81232=m
CONFIG_USB_SERIAL_GARMIN=m
CONFIG_USB_SERIAL_IPW=m
CONFIG_USB_SERIAL_IUU=m
CONFIG_USB_SERIAL_KEYSPAN_PDA=m
CONFIG_USB_SERIAL_KEYSPAN=m
CONFIG_USB_SERIAL_KLSI=m
CONFIG_USB_SERIAL_KOBIL_SCT=m
CONFIG_USB_SERIAL_MCT_U232=m
CONFIG_USB_SERIAL_METRO=m
CONFIG_USB_SERIAL_MOS7720=m
CONFIG_USB_SERIAL_MOS7715_PARPORT=y
CONFIG_USB_SERIAL_MOS7840=m
CONFIG_USB_SERIAL_MXUPORT=m
CONFIG_USB_SERIAL_NAVMAN=m
CONFIG_USB_SERIAL_PL2303=m
CONFIG_USB_SERIAL_OTI6858=m
CONFIG_USB_SERIAL_QCAUX=m
CONFIG_USB_SERIAL_QUALCOMM=m
CONFIG_USB_SERIAL_SPCP8X5=m
CONFIG_USB_SERIAL_SAFE=m
# CONFIG_USB_SERIAL_SAFE_PADDED is not set
CONFIG_USB_SERIAL_SIERRAWIRELESS=m
CONFIG_USB_SERIAL_SYMBOL=m
CONFIG_USB_SERIAL_TI=m
CONFIG_USB_SERIAL_CYBERJACK=m
CONFIG_USB_SERIAL_XIRCOM=m
CONFIG_USB_SERIAL_WWAN=m
CONFIG_USB_SERIAL_OPTION=m
CONFIG_USB_SERIAL_OMNINET=m
CONFIG_USB_SERIAL_OPTICON=m
CONFIG_USB_SERIAL_XSENS_MT=m
CONFIG_USB_SERIAL_WISHBONE=m
CONFIG_USB_SERIAL_SSU100=m
CONFIG_USB_SERIAL_QT2=m
CONFIG_USB_SERIAL_DEBUG=m

#
# USB Miscellaneous drivers
#
CONFIG_USB_EMI62=m
CONFIG_USB_EMI26=m
CONFIG_USB_ADUTUX=m
CONFIG_USB_SEVSEG=m
CONFIG_USB_RIO500=m
CONFIG_USB_LEGOTOWER=m
CONFIG_USB_LCD=m
CONFIG_USB_LED=m
CONFIG_USB_CYPRESS_CY7C63=m
CONFIG_USB_CYTHERM=m
CONFIG_USB_IDMOUSE=m
CONFIG_USB_FTDI_ELAN=m
CONFIG_USB_APPLEDISPLAY=m
CONFIG_USB_LD=m
CONFIG_USB_TRANCEVIBRATOR=m
CONFIG_USB_IOWARRIOR=m
CONFIG_USB_TEST=m
CONFIG_USB_EHSET_TEST_FIXTURE=m
CONFIG_USB_ISIGHTFW=m
CONFIG_USB_YUREX=m
CONFIG_USB_EZUSB_FX2=m
# CONFIG_USB_HSIC_USB3503 is not set
# CONFIG_USB_LINK_LAYER_TEST is not set
CONFIG_USB_ATM=m
CONFIG_USB_SPEEDTOUCH=m
CONFIG_USB_CXACRU=m
CONFIG_USB_UEAGLEATM=m
CONFIG_USB_XUSBATM=m

#
# USB Physical Layer drivers
#
# CONFIG_USB_PHY is not set
# CONFIG_NOP_USB_XCEIV is not set
# CONFIG_AM335X_PHY_USB is not set
# CONFIG_USB_GPIO_VBUS is not set
# CONFIG_USB_ISP1301 is not set
# CONFIG_USB_ULPI is not set
# CONFIG_USB_GADGET is not set
CONFIG_USB_LED_TRIG=y
CONFIG_UWB=m
CONFIG_UWB_HWA=m
CONFIG_UWB_I1480U=m
CONFIG_MMC=y
# CONFIG_MMC_DEBUG is not set
# CONFIG_MMC_CLKGATE is not set

#
# MMC/SD/SDIO Card Drivers
#
CONFIG_MMC_BLOCK=y
CONFIG_MMC_BLOCK_MINORS=32
CONFIG_MMC_BLOCK_BOUNCE=y
CONFIG_SDIO_UART=m
# CONFIG_MMC_TEST is not set

#
# MMC/SD/SDIO Host Controller Drivers
#
# CONFIG_MMC_ARMMMCI is not set
CONFIG_MMC_SDHCI=y
CONFIG_MMC_SDHCI_PLTFM=y
# CONFIG_MMC_SDHCI_OF_ARASAN is not set
# CONFIG_MMC_SDHCI_PXAV3 is not set
# CONFIG_MMC_SDHCI_PXAV2 is not set
CONFIG_MMC_BCM2835=y
CONFIG_MMC_BCM2835_DMA=y
CONFIG_MMC_BCM2835_PIO_DMA_BARRIER=2
CONFIG_MMC_SPI=m
# CONFIG_MMC_DW is not set
CONFIG_MMC_VUB300=m
CONFIG_MMC_USHC=m
# CONFIG_MMC_USDHI6ROL0 is not set
CONFIG_MMC_REALTEK_USB=m
CONFIG_MEMSTICK=m
# CONFIG_MEMSTICK_DEBUG is not set

#
# MemoryStick drivers
#
# CONFIG_MEMSTICK_UNSAFE_RESUME is not set
CONFIG_MSPRO_BLOCK=m
# CONFIG_MS_BLOCK is not set

#
# MemoryStick Host Controller Drivers
#
CONFIG_MEMSTICK_REALTEK_USB=m
CONFIG_NEW_LEDS=y
CONFIG_LEDS_CLASS=y

#
# LED drivers
#
# CONFIG_LEDS_LM3530 is not set
# CONFIG_LEDS_LM3642 is not set
# CONFIG_LEDS_PCA9532 is not set
CONFIG_LEDS_GPIO=y
CONFIG_LEDS_LP3944=m
# CONFIG_LEDS_LP5521 is not set
# CONFIG_LEDS_LP5523 is not set
# CONFIG_LEDS_LP5562 is not set
# CONFIG_LEDS_LP8501 is not set
CONFIG_LEDS_PCA955X=m
# CONFIG_LEDS_PCA963X is not set
CONFIG_LEDS_DAC124S085=m
CONFIG_LEDS_BD2802=m
CONFIG_LEDS_LT3593=m
# CONFIG_LEDS_TCA6507 is not set
# CONFIG_LEDS_LM355x is not set

#
# LED driver for blink(1) USB RGB LED is under Special HID drivers (HID_THINGM)
#
# CONFIG_LEDS_BLINKM is not set

#
# LED Triggers
#
CONFIG_LEDS_TRIGGERS=y
CONFIG_LEDS_TRIGGER_TIMER=y
CONFIG_LEDS_TRIGGER_ONESHOT=y
CONFIG_LEDS_TRIGGER_HEARTBEAT=y
CONFIG_LEDS_TRIGGER_BACKLIGHT=y
CONFIG_LEDS_TRIGGER_CPU=y
CONFIG_LEDS_TRIGGER_GPIO=y
CONFIG_LEDS_TRIGGER_DEFAULT_ON=y

#
# iptables trigger is under Netfilter config (LED target)
#
CONFIG_LEDS_TRIGGER_TRANSIENT=m
CONFIG_LEDS_TRIGGER_CAMERA=m
CONFIG_LEDS_TRIGGER_INPUT=m
CONFIG_ACCESSIBILITY=y
CONFIG_A11Y_BRAILLE_CONSOLE=y
# CONFIG_EDAC is not set
CONFIG_RTC_LIB=y
CONFIG_RTC_CLASS=y
# CONFIG_RTC_HCTOSYS is not set
CONFIG_RTC_SYSTOHC=y
CONFIG_RTC_HCTOSYS_DEVICE="rtc0"
# CONFIG_RTC_DEBUG is not set

#
# RTC interfaces
#
CONFIG_RTC_INTF_SYSFS=y
CONFIG_RTC_INTF_PROC=y
CONFIG_RTC_INTF_DEV=y
# CONFIG_RTC_INTF_DEV_UIE_EMUL is not set
# CONFIG_RTC_DRV_TEST is not set

#
# I2C RTC drivers
#
CONFIG_RTC_DRV_DS1307=m
CONFIG_RTC_DRV_DS1374=m
CONFIG_RTC_DRV_DS1672=m
CONFIG_RTC_DRV_DS3232=m
# CONFIG_RTC_DRV_HYM8563 is not set
CONFIG_RTC_DRV_MAX6900=m
CONFIG_RTC_DRV_RS5C372=m
CONFIG_RTC_DRV_ISL1208=m
CONFIG_RTC_DRV_ISL12022=m
CONFIG_RTC_DRV_ISL12057=m
CONFIG_RTC_DRV_X1205=m
CONFIG_RTC_DRV_PCF2127=m
CONFIG_RTC_DRV_PCF8523=m
CONFIG_RTC_DRV_PCF8563=m
# CONFIG_RTC_DRV_PCF85063 is not set
CONFIG_RTC_DRV_PCF8583=m
CONFIG_RTC_DRV_M41T80=m
# CONFIG_RTC_DRV_M41T80_WDT is not set
CONFIG_RTC_DRV_BQ32K=m
CONFIG_RTC_DRV_S35390A=m
CONFIG_RTC_DRV_FM3130=m
CONFIG_RTC_DRV_RX8581=m
CONFIG_RTC_DRV_RX8025=m
CONFIG_RTC_DRV_EM3027=m
CONFIG_RTC_DRV_RV3029C2=m

#
# SPI RTC drivers
#
CONFIG_RTC_DRV_M41T93=m
CONFIG_RTC_DRV_M41T94=m
CONFIG_RTC_DRV_DS1305=m
# CONFIG_RTC_DRV_DS1343 is not set
# CONFIG_RTC_DRV_DS1347 is not set
CONFIG_RTC_DRV_DS1390=m
CONFIG_RTC_DRV_MAX6902=m
CONFIG_RTC_DRV_R9701=m
CONFIG_RTC_DRV_RS5C348=m
CONFIG_RTC_DRV_DS3234=m
CONFIG_RTC_DRV_PCF2123=m
CONFIG_RTC_DRV_RX4581=m
# CONFIG_RTC_DRV_MCP795 is not set

#
# Platform RTC drivers
#
CONFIG_RTC_DRV_CMOS=m
# CONFIG_RTC_DRV_DS1286 is not set
# CONFIG_RTC_DRV_DS1511 is not set
# CONFIG_RTC_DRV_DS1553 is not set
# CONFIG_RTC_DRV_DS1742 is not set
# CONFIG_RTC_DRV_DS2404 is not set
# CONFIG_RTC_DRV_STK17TA8 is not set
# CONFIG_RTC_DRV_M48T86 is not set
# CONFIG_RTC_DRV_M48T35 is not set
# CONFIG_RTC_DRV_M48T59 is not set
# CONFIG_RTC_DRV_MSM6242 is not set
# CONFIG_RTC_DRV_BQ4802 is not set
# CONFIG_RTC_DRV_RP5C01 is not set
# CONFIG_RTC_DRV_V3020 is not set

#
# on-CPU RTC drivers
#
# CONFIG_RTC_DRV_PL030 is not set
# CONFIG_RTC_DRV_PL031 is not set
# CONFIG_RTC_DRV_SNVS is not set
# CONFIG_RTC_DRV_XGENE is not set

#
# HID Sensor RTC drivers
#
# CONFIG_RTC_DRV_HID_SENSOR_TIME is not set
CONFIG_DMADEVICES=y
# CONFIG_DMADEVICES_DEBUG is not set

#
# DMA Devices
#
# CONFIG_AMBA_PL08X is not set
# CONFIG_DW_DMAC_CORE is not set
# CONFIG_DW_DMAC is not set
# CONFIG_PL330_DMA is not set
CONFIG_DMA_BCM2708=y
# CONFIG_FSL_EDMA is not set
# CONFIG_NBPFAXI_DMA is not set
CONFIG_DMA_ENGINE=y
CONFIG_DMA_VIRTUAL_CHANNELS=y
CONFIG_DMA_OF=y

#
# DMA Clients
#
CONFIG_ASYNC_TX_DMA=y
# CONFIG_DMATEST is not set
# CONFIG_AUXDISPLAY is not set
CONFIG_UIO=m
CONFIG_UIO_PDRV_GENIRQ=m
# CONFIG_UIO_DMEM_GENIRQ is not set
CONFIG_VIRT_DRIVERS=y

#
# Virtio drivers
#
# CONFIG_VIRTIO_MMIO is not set

#
# Microsoft Hyper-V guest support
#
CONFIG_STAGING=y
CONFIG_PRISM2_USB=m
# CONFIG_COMEDI is not set
# CONFIG_PANEL is not set
# CONFIG_RTLLIB is not set
CONFIG_R8712U=m
CONFIG_R8188EU=m
CONFIG_88EU_AP_MODE=y
CONFIG_R8723AU=m
CONFIG_8723AU_AP_MODE=y
CONFIG_8723AU_BT_COEXIST=y
# CONFIG_LINE6_USB is not set
CONFIG_VT6656=m

#
# IIO staging drivers
#

#
# Accelerometers
#
# CONFIG_ADIS16201 is not set
# CONFIG_ADIS16203 is not set
# CONFIG_ADIS16204 is not set
# CONFIG_ADIS16209 is not set
# CONFIG_ADIS16220 is not set
# CONFIG_ADIS16240 is not set
# CONFIG_LIS3L02DQ is not set
# CONFIG_SCA3000 is not set

#
# Analog to digital converters
#
# CONFIG_AD7606 is not set
# CONFIG_AD7780 is not set
# CONFIG_AD7816 is not set
# CONFIG_AD7192 is not set
# CONFIG_AD7280 is not set

#
# Analog digital bi-direction converters
#
# CONFIG_ADT7316 is not set

#
# Capacitance to digital converters
#
# CONFIG_AD7150 is not set
# CONFIG_AD7152 is not set
# CONFIG_AD7746 is not set

#
# Direct Digital Synthesis
#
# CONFIG_AD9832 is not set
# CONFIG_AD9834 is not set

#
# Digital gyroscope sensors
#
# CONFIG_ADIS16060 is not set

#
# Network Analyzer, Impedance Converters
#
# CONFIG_AD5933 is not set

#
# Light sensors
#
# CONFIG_SENSORS_ISL29018 is not set
# CONFIG_SENSORS_ISL29028 is not set
# CONFIG_TSL2583 is not set
# CONFIG_TSL2x7x is not set

#
# Magnetometer sensors
#
# CONFIG_SENSORS_HMC5843_I2C is not set
# CONFIG_SENSORS_HMC5843_SPI is not set

#
# Active energy metering IC
#
# CONFIG_ADE7753 is not set
# CONFIG_ADE7754 is not set
# CONFIG_ADE7758 is not set
# CONFIG_ADE7759 is not set
# CONFIG_ADE7854 is not set

#
# Resolver to digital converters
#
# CONFIG_AD2S90 is not set
# CONFIG_AD2S1200 is not set
# CONFIG_AD2S1210 is not set

#
# Triggers - standalone
#
# CONFIG_IIO_PERIODIC_RTC_TRIGGER is not set
# CONFIG_IIO_SIMPLE_DUMMY is not set
# CONFIG_BCM_WIMAX is not set
# CONFIG_FT1000 is not set

#
# Speakup console speech
#
CONFIG_SPEAKUP=m
CONFIG_SPEAKUP_SYNTH_ACNTSA=m
CONFIG_SPEAKUP_SYNTH_APOLLO=m
CONFIG_SPEAKUP_SYNTH_AUDPTR=m
CONFIG_SPEAKUP_SYNTH_BNS=m
CONFIG_SPEAKUP_SYNTH_DECTLK=m
CONFIG_SPEAKUP_SYNTH_DECEXT=m
CONFIG_SPEAKUP_SYNTH_LTLK=m
CONFIG_SPEAKUP_SYNTH_SOFT=m
CONFIG_SPEAKUP_SYNTH_SPKOUT=m
CONFIG_SPEAKUP_SYNTH_TXPRT=m
CONFIG_SPEAKUP_SYNTH_DUMMY=m
# CONFIG_TOUCHSCREEN_CLEARPAD_TM1217 is not set
# CONFIG_TOUCHSCREEN_SYNAPTICS_I2C_RMI4 is not set
CONFIG_STAGING_MEDIA=y
# CONFIG_I2C_BCM2048 is not set
# CONFIG_VIDEO_TCM825X is not set
CONFIG_LIRC_STAGING=y
CONFIG_LIRC_IGORPLUGUSB=m
CONFIG_LIRC_IMON=m
# CONFIG_LIRC_PARALLEL is not set
CONFIG_LIRC_RPI=m
CONFIG_LIRC_SASEM=m
CONFIG_LIRC_SERIAL=m
CONFIG_LIRC_SERIAL_TRANSMITTER=y
# CONFIG_LIRC_SIR is not set
# CONFIG_LIRC_ZILOG is not set

#
# Android
#
# CONFIG_ANDROID is not set
# CONFIG_USB_WPAN_HCD is not set
# CONFIG_WIMAX_GDM72XX is not set
# CONFIG_LTE_GDM724X is not set
# CONFIG_LUSTRE_FS is not set
# CONFIG_DGAP is not set
# CONFIG_GS_FPGABOOT is not set
CONFIG_FB_TFT=m
CONFIG_FB_TFT_AGM1264K_FL=m
CONFIG_FB_TFT_BD663474=m
CONFIG_FB_TFT_HX8340BN=m
CONFIG_FB_TFT_HX8347D=m
CONFIG_FB_TFT_HX8353D=m
CONFIG_FB_TFT_ILI9320=m
CONFIG_FB_TFT_ILI9325=m
CONFIG_FB_TFT_ILI9340=m
CONFIG_FB_TFT_ILI9341=m
CONFIG_FB_TFT_ILI9481=m
CONFIG_FB_TFT_ILI9486=m
CONFIG_FB_TFT_PCD8544=m
CONFIG_FB_TFT_RA8875=m
CONFIG_FB_TFT_S6D02A1=m
CONFIG_FB_TFT_S6D1121=m
CONFIG_FB_TFT_SSD1289=m
CONFIG_FB_TFT_SSD1306=m
CONFIG_FB_TFT_SSD1331=m
CONFIG_FB_TFT_SSD1351=m
CONFIG_FB_TFT_ST7735R=m
CONFIG_FB_TFT_TINYLCD=m
CONFIG_FB_TFT_TLS8204=m
CONFIG_FB_TFT_UC1701=m
CONFIG_FB_TFT_UPD161704=m
CONFIG_FB_TFT_WATTEROTT=m
CONFIG_FB_FLEX=m
CONFIG_FB_TFT_FBTFT_DEVICE=m

#
# SOC (System On Chip) specific Drivers
#
# CONFIG_SOC_TI is not set
CONFIG_CLKDEV_LOOKUP=y
CONFIG_HAVE_CLK_PREPARE=y
CONFIG_COMMON_CLK=y

#
# Common Clock Framework
#
# CONFIG_COMMON_CLK_SI5351 is not set
# CONFIG_COMMON_CLK_SI570 is not set
# CONFIG_COMMON_CLK_PXA is not set
# CONFIG_COMMON_CLK_QCOM is not set

#
# Hardware Spinlock drivers
#

#
# Clock Source drivers
#
CONFIG_CLKSRC_OF=y
CONFIG_ARM_ARCH_TIMER=y
CONFIG_ARM_ARCH_TIMER_EVTSTREAM=y
# CONFIG_ATMEL_PIT is not set
# CONFIG_SH_TIMER_CMT is not set
# CONFIG_SH_TIMER_MTU2 is not set
# CONFIG_SH_TIMER_TMU is not set
# CONFIG_EM_TIMER_STI is not set
# CONFIG_CLKSRC_VERSATILE is not set
# CONFIG_MAILBOX is not set
# CONFIG_IOMMU_SUPPORT is not set

#
# Remoteproc drivers
#
# CONFIG_STE_MODEM_RPROC is not set

#
# Rpmsg drivers
#

#
# SOC (System On Chip) specific Drivers
#
CONFIG_PM_DEVFREQ=y

#
# DEVFREQ Governors
#
CONFIG_DEVFREQ_GOV_SIMPLE_ONDEMAND=m
# CONFIG_DEVFREQ_GOV_PERFORMANCE is not set
# CONFIG_DEVFREQ_GOV_POWERSAVE is not set
# CONFIG_DEVFREQ_GOV_USERSPACE is not set

#
# DEVFREQ Drivers
#
CONFIG_EXTCON=m

#
# Extcon Device Drivers
#
# CONFIG_EXTCON_ADC_JACK is not set
CONFIG_EXTCON_ARIZONA=m
# CONFIG_EXTCON_GPIO is not set
# CONFIG_EXTCON_RT8973A is not set
# CONFIG_EXTCON_SM5502 is not set
CONFIG_MEMORY=y
CONFIG_IIO=m
CONFIG_IIO_BUFFER=y
# CONFIG_IIO_BUFFER_CB is not set
CONFIG_IIO_KFIFO_BUF=m
CONFIG_IIO_TRIGGERED_BUFFER=m
CONFIG_IIO_TRIGGER=y
CONFIG_IIO_CONSUMERS_PER_TRIGGER=2

#
# Accelerometers
#
# CONFIG_BMA180 is not set
# CONFIG_BMC150_ACCEL is not set
CONFIG_HID_SENSOR_ACCEL_3D=m
# CONFIG_IIO_ST_ACCEL_3AXIS is not set
# CONFIG_KXSD9 is not set
# CONFIG_MMA8452 is not set
# CONFIG_KXCJK1013 is not set

#
# Analog to digital converters
#
# CONFIG_AD7266 is not set
# CONFIG_AD7291 is not set
# CONFIG_AD7298 is not set
# CONFIG_AD7476 is not set
# CONFIG_AD7791 is not set
# CONFIG_AD7793 is not set
# CONFIG_AD7887 is not set
# CONFIG_AD7923 is not set
# CONFIG_AD799X is not set
# CONFIG_MAX1027 is not set
# CONFIG_MAX1363 is not set
# CONFIG_MCP320X is not set
# CONFIG_MCP3422 is not set
# CONFIG_NAU7802 is not set
# CONFIG_TI_ADC081C is not set
# CONFIG_TI_ADC128S052 is not set
# CONFIG_VF610_ADC is not set
CONFIG_VIPERBOARD_ADC=m

#
# Amplifiers
#
# CONFIG_AD8366 is not set

#
# Hid Sensor IIO Common
#
CONFIG_HID_SENSOR_IIO_COMMON=m
CONFIG_HID_SENSOR_IIO_TRIGGER=m

#
# Digital to analog converters
#
# CONFIG_AD5064 is not set
# CONFIG_AD5360 is not set
# CONFIG_AD5380 is not set
# CONFIG_AD5421 is not set
# CONFIG_AD5446 is not set
# CONFIG_AD5449 is not set
# CONFIG_AD5504 is not set
# CONFIG_AD5624R_SPI is not set
# CONFIG_AD5686 is not set
# CONFIG_AD5755 is not set
# CONFIG_AD5764 is not set
# CONFIG_AD5791 is not set
# CONFIG_AD7303 is not set
# CONFIG_MAX517 is not set
# CONFIG_MAX5821 is not set
# CONFIG_MCP4725 is not set
# CONFIG_MCP4922 is not set

#
# Frequency Synthesizers DDS/PLL
#

#
# Clock Generator/Distribution
#
# CONFIG_AD9523 is not set

#
# Phase-Locked Loop (PLL) frequency synthesizers
#
# CONFIG_ADF4350 is not set

#
# Digital gyroscope sensors
#
# CONFIG_ADIS16080 is not set
# CONFIG_ADIS16130 is not set
# CONFIG_ADIS16136 is not set
# CONFIG_ADIS16260 is not set
# CONFIG_ADXRS450 is not set
# CONFIG_BMG160 is not set
CONFIG_HID_SENSOR_GYRO_3D=m
# CONFIG_IIO_ST_GYRO_3AXIS is not set
# CONFIG_ITG3200 is not set

#
# Humidity sensors
#
# CONFIG_DHT11 is not set
# CONFIG_SI7005 is not set

#
# Inertial measurement units
#
# CONFIG_ADIS16400 is not set
# CONFIG_ADIS16480 is not set
# CONFIG_INV_MPU6050_IIO is not set

#
# Light sensors
#
# CONFIG_ADJD_S311 is not set
# CONFIG_AL3320A is not set
# CONFIG_APDS9300 is not set
# CONFIG_CM32181 is not set
# CONFIG_CM36651 is not set
# CONFIG_GP2AP020A00F is not set
# CONFIG_ISL29125 is not set
CONFIG_HID_SENSOR_ALS=m
CONFIG_HID_SENSOR_PROX=m
# CONFIG_LTR501 is not set
# CONFIG_TCS3414 is not set
# CONFIG_TCS3472 is not set
# CONFIG_SENSORS_TSL2563 is not set
# CONFIG_TSL4531 is not set
# CONFIG_VCNL4000 is not set

#
# Magnetometer sensors
#
# CONFIG_AK8975 is not set
# CONFIG_AK09911 is not set
# CONFIG_MAG3110 is not set
CONFIG_HID_SENSOR_MAGNETOMETER_3D=m
# CONFIG_IIO_ST_MAGN_3AXIS is not set

#
# Inclinometer sensors
#
CONFIG_HID_SENSOR_INCLINOMETER_3D=m
CONFIG_HID_SENSOR_DEVICE_ROTATION=m

#
# Triggers - standalone
#
# CONFIG_IIO_INTERRUPT_TRIGGER is not set
# CONFIG_IIO_SYSFS_TRIGGER is not set

#
# Pressure sensors
#
CONFIG_HID_SENSOR_PRESS=m
# CONFIG_MPL115 is not set
# CONFIG_MPL3115 is not set
# CONFIG_IIO_ST_PRESS is not set
# CONFIG_T5403 is not set

#
# Lightning sensors
#
# CONFIG_AS3935 is not set

#
# Temperature sensors
#
# CONFIG_MLX90614 is not set
# CONFIG_TMP006 is not set
# CONFIG_PWM is not set
CONFIG_IRQCHIP=y
# CONFIG_IPACK_BUS is not set
# CONFIG_RESET_CONTROLLER is not set
# CONFIG_FMC is not set

#
# PHY Subsystem
#
# CONFIG_GENERIC_PHY is not set
# CONFIG_BCM_KONA_USB2_PHY is not set
# CONFIG_POWERCAP is not set
# CONFIG_MCB is not set

#
# File systems
#
CONFIG_DCACHE_WORD_ACCESS=y
# CONFIG_EXT2_FS is not set
# CONFIG_EXT3_FS is not set
CONFIG_EXT4_FS=y
CONFIG_EXT4_USE_FOR_EXT23=y
CONFIG_EXT4_FS_POSIX_ACL=y
CONFIG_EXT4_FS_SECURITY=y
# CONFIG_EXT4_DEBUG is not set
CONFIG_JBD2=y
# CONFIG_JBD2_DEBUG is not set
CONFIG_FS_MBCACHE=y
CONFIG_REISERFS_FS=m
# CONFIG_REISERFS_CHECK is not set
# CONFIG_REISERFS_PROC_INFO is not set
CONFIG_REISERFS_FS_XATTR=y
CONFIG_REISERFS_FS_POSIX_ACL=y
CONFIG_REISERFS_FS_SECURITY=y
CONFIG_JFS_FS=m
CONFIG_JFS_POSIX_ACL=y
CONFIG_JFS_SECURITY=y
# CONFIG_JFS_DEBUG is not set
CONFIG_JFS_STATISTICS=y
CONFIG_XFS_FS=m
CONFIG_XFS_QUOTA=y
CONFIG_XFS_POSIX_ACL=y
CONFIG_XFS_RT=y
# CONFIG_XFS_WARN is not set
# CONFIG_XFS_DEBUG is not set
CONFIG_GFS2_FS=m
CONFIG_GFS2_FS_LOCKING_DLM=y
CONFIG_OCFS2_FS=m
CONFIG_OCFS2_FS_O2CB=m
CONFIG_OCFS2_FS_USERSPACE_CLUSTER=m
CONFIG_OCFS2_FS_STATS=y
CONFIG_OCFS2_DEBUG_MASKLOG=y
# CONFIG_OCFS2_DEBUG_FS is not set
CONFIG_BTRFS_FS=m
CONFIG_BTRFS_FS_POSIX_ACL=y
# CONFIG_BTRFS_FS_CHECK_INTEGRITY is not set
# CONFIG_BTRFS_FS_RUN_SANITY_TESTS is not set
# CONFIG_BTRFS_DEBUG is not set
# CONFIG_BTRFS_ASSERT is not set
CONFIG_NILFS2_FS=m
CONFIG_FS_POSIX_ACL=y
CONFIG_EXPORTFS=y
CONFIG_FILE_LOCKING=y
CONFIG_FSNOTIFY=y
CONFIG_DNOTIFY=y
CONFIG_INOTIFY_USER=y
CONFIG_FANOTIFY=y
# CONFIG_FANOTIFY_ACCESS_PERMISSIONS is not set
CONFIG_QUOTA=y
CONFIG_QUOTA_NETLINK_INTERFACE=y
CONFIG_PRINT_QUOTA_WARNING=y
# CONFIG_QUOTA_DEBUG is not set
CONFIG_QUOTA_TREE=m
CONFIG_QFMT_V1=m
CONFIG_QFMT_V2=m
CONFIG_QUOTACTL=y
CONFIG_AUTOFS4_FS=y
CONFIG_FUSE_FS=m
CONFIG_CUSE=m
CONFIG_OVERLAY_FS=m

#
# Caches
#
CONFIG_FSCACHE=y
CONFIG_FSCACHE_STATS=y
CONFIG_FSCACHE_HISTOGRAM=y
# CONFIG_FSCACHE_DEBUG is not set
# CONFIG_FSCACHE_OBJECT_LIST is not set
CONFIG_CACHEFILES=y
# CONFIG_CACHEFILES_DEBUG is not set
# CONFIG_CACHEFILES_HISTOGRAM is not set

#
# CD-ROM/DVD Filesystems
#
CONFIG_ISO9660_FS=m
CONFIG_JOLIET=y
CONFIG_ZISOFS=y
CONFIG_UDF_FS=m
CONFIG_UDF_NLS=y

#
# DOS/FAT/NT Filesystems
#
CONFIG_FAT_FS=y
CONFIG_MSDOS_FS=y
CONFIG_VFAT_FS=y
CONFIG_FAT_DEFAULT_CODEPAGE=437
CONFIG_FAT_DEFAULT_IOCHARSET="ascii"
CONFIG_NTFS_FS=m
# CONFIG_NTFS_DEBUG is not set
CONFIG_NTFS_RW=y

#
# Pseudo filesystems
#
CONFIG_PROC_FS=y
CONFIG_PROC_SYSCTL=y
CONFIG_PROC_PAGE_MONITOR=y
CONFIG_KERNFS=y
CONFIG_SYSFS=y
CONFIG_TMPFS=y
CONFIG_TMPFS_POSIX_ACL=y
CONFIG_TMPFS_XATTR=y
# CONFIG_HUGETLBFS is not set
# CONFIG_HUGETLB_PAGE is not set
CONFIG_CONFIGFS_FS=y
CONFIG_MISC_FILESYSTEMS=y
CONFIG_ADFS_FS=m
# CONFIG_ADFS_FS_RW is not set
CONFIG_AFFS_FS=m
CONFIG_ECRYPT_FS=m
CONFIG_ECRYPT_FS_MESSAGING=y
CONFIG_HFS_FS=m
CONFIG_HFSPLUS_FS=m
# CONFIG_HFSPLUS_FS_POSIX_ACL is not set
CONFIG_BEFS_FS=m
# CONFIG_BEFS_DEBUG is not set
CONFIG_BFS_FS=m
CONFIG_EFS_FS=m
CONFIG_JFFS2_FS=m
CONFIG_JFFS2_FS_DEBUG=0
CONFIG_JFFS2_FS_WRITEBUFFER=y
# CONFIG_JFFS2_FS_WBUF_VERIFY is not set
CONFIG_JFFS2_SUMMARY=y
CONFIG_JFFS2_FS_XATTR=y
CONFIG_JFFS2_FS_POSIX_ACL=y
CONFIG_JFFS2_FS_SECURITY=y
CONFIG_JFFS2_COMPRESSION_OPTIONS=y
CONFIG_JFFS2_ZLIB=y
CONFIG_JFFS2_LZO=y
CONFIG_JFFS2_RTIME=y
# CONFIG_JFFS2_RUBIN is not set
# CONFIG_JFFS2_CMODE_NONE is not set
CONFIG_JFFS2_CMODE_PRIORITY=y
# CONFIG_JFFS2_CMODE_SIZE is not set
# CONFIG_JFFS2_CMODE_FAVOURLZO is not set
CONFIG_UBIFS_FS=m
CONFIG_UBIFS_FS_ADVANCED_COMPR=y
CONFIG_UBIFS_FS_LZO=y
CONFIG_UBIFS_FS_ZLIB=y
CONFIG_LOGFS=m
CONFIG_CRAMFS=m
CONFIG_SQUASHFS=m
CONFIG_SQUASHFS_FILE_CACHE=y
# CONFIG_SQUASHFS_FILE_DIRECT is not set
CONFIG_SQUASHFS_DECOMP_SINGLE=y
# CONFIG_SQUASHFS_DECOMP_MULTI is not set
# CONFIG_SQUASHFS_DECOMP_MULTI_PERCPU is not set
CONFIG_SQUASHFS_XATTR=y
CONFIG_SQUASHFS_ZLIB=y
CONFIG_SQUASHFS_LZO=y
CONFIG_SQUASHFS_XZ=y
# CONFIG_SQUASHFS_4K_DEVBLK_SIZE is not set
# CONFIG_SQUASHFS_EMBEDDED is not set
CONFIG_SQUASHFS_FRAGMENT_CACHE_SIZE=3
CONFIG_VXFS_FS=m
CONFIG_MINIX_FS=m
CONFIG_OMFS_FS=m
# CONFIG_HPFS_FS is not set
CONFIG_QNX4FS_FS=m
CONFIG_QNX6FS_FS=m
# CONFIG_QNX6FS_DEBUG is not set
CONFIG_ROMFS_FS=m
# CONFIG_ROMFS_BACKED_BY_BLOCK is not set
# CONFIG_ROMFS_BACKED_BY_MTD is not set
CONFIG_ROMFS_BACKED_BY_BOTH=y
CONFIG_ROMFS_ON_BLOCK=y
CONFIG_ROMFS_ON_MTD=y
# CONFIG_PSTORE is not set
CONFIG_SYSV_FS=m
CONFIG_UFS_FS=m
# CONFIG_UFS_FS_WRITE is not set
# CONFIG_UFS_DEBUG is not set
CONFIG_EXOFS_FS=m
# CONFIG_EXOFS_DEBUG is not set
CONFIG_F2FS_FS=y
CONFIG_F2FS_STAT_FS=y
CONFIG_F2FS_FS_XATTR=y
CONFIG_F2FS_FS_POSIX_ACL=y
CONFIG_F2FS_FS_SECURITY=y
# CONFIG_F2FS_CHECK_FS is not set
CONFIG_ORE=m
CONFIG_NETWORK_FILESYSTEMS=y
CONFIG_NFS_FS=y
CONFIG_NFS_V2=y
CONFIG_NFS_V3=y
CONFIG_NFS_V3_ACL=y
CONFIG_NFS_V4=y
CONFIG_NFS_SWAP=y
CONFIG_NFS_V4_1=y
CONFIG_NFS_V4_2=y
CONFIG_PNFS_FILE_LAYOUT=y
CONFIG_PNFS_BLOCK=m
CONFIG_PNFS_OBJLAYOUT=m
CONFIG_NFS_V4_1_IMPLEMENTATION_ID_DOMAIN="kernel.org"
# CONFIG_NFS_V4_1_MIGRATION is not set
CONFIG_NFS_V4_SECURITY_LABEL=y
CONFIG_ROOT_NFS=y
CONFIG_NFS_FSCACHE=y
# CONFIG_NFS_USE_LEGACY_DNS is not set
CONFIG_NFS_USE_KERNEL_DNS=y
CONFIG_NFS_DEBUG=y
CONFIG_NFSD=m
CONFIG_NFSD_V2_ACL=y
CONFIG_NFSD_V3=y
CONFIG_NFSD_V3_ACL=y
CONFIG_NFSD_V4=y
# CONFIG_NFSD_V4_SECURITY_LABEL is not set
# CONFIG_NFSD_FAULT_INJECTION is not set
CONFIG_GRACE_PERIOD=y
CONFIG_LOCKD=y
CONFIG_LOCKD_V4=y
CONFIG_NFS_ACL_SUPPORT=y
CONFIG_NFS_COMMON=y
CONFIG_SUNRPC=y
CONFIG_SUNRPC_GSS=y
CONFIG_SUNRPC_BACKCHANNEL=y
CONFIG_SUNRPC_SWAP=y
CONFIG_RPCSEC_GSS_KRB5=m
CONFIG_SUNRPC_DEBUG=y
CONFIG_CEPH_FS=m
CONFIG_CEPH_FSCACHE=y
CONFIG_CEPH_FS_POSIX_ACL=y
CONFIG_CIFS=m
# CONFIG_CIFS_STATS is not set
CONFIG_CIFS_WEAK_PW_HASH=y
CONFIG_CIFS_UPCALL=y
CONFIG_CIFS_XATTR=y
CONFIG_CIFS_POSIX=y
CONFIG_CIFS_ACL=y
CONFIG_CIFS_DEBUG=y
# CONFIG_CIFS_DEBUG2 is not set
CONFIG_CIFS_DFS_UPCALL=y
CONFIG_CIFS_SMB2=y
CONFIG_CIFS_FSCACHE=y
CONFIG_NCP_FS=m
CONFIG_NCPFS_PACKET_SIGNING=y
CONFIG_NCPFS_IOCTL_LOCKING=y
CONFIG_NCPFS_STRONG=y
CONFIG_NCPFS_NFS_NS=y
CONFIG_NCPFS_OS2_NS=y
# CONFIG_NCPFS_SMALLDOS is not set
CONFIG_NCPFS_NLS=y
CONFIG_NCPFS_EXTRAS=y
CONFIG_CODA_FS=m
CONFIG_AFS_FS=m
# CONFIG_AFS_DEBUG is not set
CONFIG_AFS_FSCACHE=y
CONFIG_9P_FS=m
CONFIG_9P_FSCACHE=y
CONFIG_9P_FS_POSIX_ACL=y
CONFIG_9P_FS_SECURITY=y
CONFIG_NLS=y
CONFIG_NLS_DEFAULT="utf8"
CONFIG_NLS_CODEPAGE_437=y
CONFIG_NLS_CODEPAGE_737=m
CONFIG_NLS_CODEPAGE_775=m
CONFIG_NLS_CODEPAGE_850=m
CONFIG_NLS_CODEPAGE_852=m
CONFIG_NLS_CODEPAGE_855=m
CONFIG_NLS_CODEPAGE_857=m
CONFIG_NLS_CODEPAGE_860=m
CONFIG_NLS_CODEPAGE_861=m
CONFIG_NLS_CODEPAGE_862=m
CONFIG_NLS_CODEPAGE_863=m
CONFIG_NLS_CODEPAGE_864=m
CONFIG_NLS_CODEPAGE_865=m
CONFIG_NLS_CODEPAGE_866=m
CONFIG_NLS_CODEPAGE_869=m
CONFIG_NLS_CODEPAGE_936=m
CONFIG_NLS_CODEPAGE_950=m
CONFIG_NLS_CODEPAGE_932=m
CONFIG_NLS_CODEPAGE_949=m
CONFIG_NLS_CODEPAGE_874=m
CONFIG_NLS_ISO8859_8=m
CONFIG_NLS_CODEPAGE_1250=m
CONFIG_NLS_CODEPAGE_1251=m
CONFIG_NLS_ASCII=y
CONFIG_NLS_ISO8859_1=m
CONFIG_NLS_ISO8859_2=m
CONFIG_NLS_ISO8859_3=m
CONFIG_NLS_ISO8859_4=m
CONFIG_NLS_ISO8859_5=m
CONFIG_NLS_ISO8859_6=m
CONFIG_NLS_ISO8859_7=m
CONFIG_NLS_ISO8859_9=m
CONFIG_NLS_ISO8859_13=m
CONFIG_NLS_ISO8859_14=m
CONFIG_NLS_ISO8859_15=m
CONFIG_NLS_KOI8_R=m
CONFIG_NLS_KOI8_U=m
CONFIG_NLS_MAC_ROMAN=m
CONFIG_NLS_MAC_CELTIC=m
CONFIG_NLS_MAC_CENTEURO=m
CONFIG_NLS_MAC_CROATIAN=m
CONFIG_NLS_MAC_CYRILLIC=m
CONFIG_NLS_MAC_GAELIC=m
CONFIG_NLS_MAC_GREEK=m
CONFIG_NLS_MAC_ICELAND=m
CONFIG_NLS_MAC_INUIT=m
CONFIG_NLS_MAC_ROMANIAN=m
CONFIG_NLS_MAC_TURKISH=m
CONFIG_NLS_UTF8=m
CONFIG_DLM=m
CONFIG_DLM_DEBUG=y

#
# Kernel hacking
#

#
# printk and dmesg options
#
CONFIG_PRINTK_TIME=y
CONFIG_MESSAGE_LOGLEVEL_DEFAULT=4
CONFIG_BOOT_PRINTK_DELAY=y
CONFIG_DYNAMIC_DEBUG=y

#
# Compile-time checks and compiler options
#
# CONFIG_DEBUG_INFO is not set
CONFIG_ENABLE_WARN_DEPRECATED=y
CONFIG_ENABLE_MUST_CHECK=y
CONFIG_FRAME_WARN=1024
CONFIG_STRIP_ASM_SYMS=y
# CONFIG_READABLE_ASM is not set
CONFIG_UNUSED_SYMBOLS=y
CONFIG_DEBUG_FS=y
# CONFIG_HEADERS_CHECK is not set
# CONFIG_DEBUG_SECTION_MISMATCH is not set
CONFIG_FRAME_POINTER=y
# CONFIG_DEBUG_FORCE_WEAK_PER_CPU is not set
CONFIG_MAGIC_SYSRQ=y
CONFIG_MAGIC_SYSRQ_DEFAULT_ENABLE=0x01b6
CONFIG_DEBUG_KERNEL=y

#
# Memory Debugging
#
# CONFIG_DEBUG_OBJECTS is not set
# CONFIG_DEBUG_SLAB is not set
CONFIG_HAVE_DEBUG_KMEMLEAK=y
# CONFIG_DEBUG_KMEMLEAK is not set
# CONFIG_DEBUG_STACK_USAGE is not set
# CONFIG_DEBUG_VM is not set
CONFIG_DEBUG_MEMORY_INIT=y
# CONFIG_DEBUG_PER_CPU_MAPS is not set
# CONFIG_DEBUG_SHIRQ is not set

#
# Debug Lockups and Hangs
#
CONFIG_LOCKUP_DETECTOR=y
# CONFIG_BOOTPARAM_SOFTLOCKUP_PANIC is not set
CONFIG_BOOTPARAM_SOFTLOCKUP_PANIC_VALUE=0
CONFIG_DETECT_HUNG_TASK=y
CONFIG_DEFAULT_HUNG_TASK_TIMEOUT=120
# CONFIG_BOOTPARAM_HUNG_TASK_PANIC is not set
CONFIG_BOOTPARAM_HUNG_TASK_PANIC_VALUE=0
# CONFIG_PANIC_ON_OOPS is not set
CONFIG_PANIC_ON_OOPS_VALUE=0
CONFIG_PANIC_TIMEOUT=0
CONFIG_SCHED_DEBUG=y
# CONFIG_SCHEDSTATS is not set
# CONFIG_SCHED_STACK_END_CHECK is not set
CONFIG_TIMER_STATS=y
# CONFIG_DEBUG_PREEMPT is not set

#
# Lock Debugging (spinlocks, mutexes, etc...)
#
# CONFIG_DEBUG_RT_MUTEXES is not set
# CONFIG_DEBUG_SPINLOCK is not set
# CONFIG_DEBUG_MUTEXES is not set
# CONFIG_DEBUG_WW_MUTEX_SLOWPATH is not set
# CONFIG_DEBUG_LOCK_ALLOC is not set
# CONFIG_PROVE_LOCKING is not set
# CONFIG_LOCK_STAT is not set
# CONFIG_DEBUG_ATOMIC_SLEEP is not set
# CONFIG_DEBUG_LOCKING_API_SELFTESTS is not set
# CONFIG_LOCK_TORTURE_TEST is not set
CONFIG_TRACE_IRQFLAGS=y
CONFIG_STACKTRACE=y
# CONFIG_DEBUG_KOBJECT is not set
CONFIG_DEBUG_BUGVERBOSE=y
# CONFIG_DEBUG_LIST is not set
# CONFIG_DEBUG_PI_LIST is not set
# CONFIG_DEBUG_SG is not set
# CONFIG_DEBUG_NOTIFIERS is not set
# CONFIG_DEBUG_CREDENTIALS is not set

#
# RCU Debugging
#
# CONFIG_SPARSE_RCU_POINTER is not set
# CONFIG_TORTURE_TEST is not set
# CONFIG_RCU_TORTURE_TEST is not set
CONFIG_RCU_CPU_STALL_TIMEOUT=21
CONFIG_RCU_CPU_STALL_VERBOSE=y
# CONFIG_RCU_CPU_STALL_INFO is not set
# CONFIG_RCU_TRACE is not set
# CONFIG_DEBUG_BLOCK_EXT_DEVT is not set
# CONFIG_NOTIFIER_ERROR_INJECTION is not set
# CONFIG_FAULT_INJECTION is not set
CONFIG_NOP_TRACER=y
CONFIG_HAVE_FUNCTION_TRACER=y
CONFIG_HAVE_FUNCTION_GRAPH_TRACER=y
CONFIG_HAVE_DYNAMIC_FTRACE=y
CONFIG_HAVE_FTRACE_MCOUNT_RECORD=y
CONFIG_HAVE_SYSCALL_TRACEPOINTS=y
CONFIG_HAVE_C_RECORDMCOUNT=y
CONFIG_TRACER_MAX_TRACE=y
CONFIG_TRACE_CLOCK=y
CONFIG_RING_BUFFER=y
CONFIG_EVENT_TRACING=y
CONFIG_CONTEXT_SWITCH_TRACER=y
CONFIG_RING_BUFFER_ALLOW_SWAP=y
CONFIG_TRACING=y
CONFIG_GENERIC_TRACER=y
CONFIG_TRACING_SUPPORT=y
CONFIG_FTRACE=y
CONFIG_FUNCTION_TRACER=y
CONFIG_FUNCTION_GRAPH_TRACER=y
CONFIG_IRQSOFF_TRACER=y
# CONFIG_PREEMPT_TRACER is not set
CONFIG_SCHED_TRACER=y
CONFIG_FTRACE_SYSCALLS=y
CONFIG_TRACER_SNAPSHOT=y
CONFIG_TRACER_SNAPSHOT_PER_CPU_SWAP=y
CONFIG_BRANCH_PROFILE_NONE=y
# CONFIG_PROFILE_ANNOTATED_BRANCHES is not set
# CONFIG_PROFILE_ALL_BRANCHES is not set
CONFIG_STACK_TRACER=y
CONFIG_BLK_DEV_IO_TRACE=y
# CONFIG_KPROBE_EVENT is not set
CONFIG_UPROBE_EVENT=y
CONFIG_PROBE_EVENTS=y
CONFIG_DYNAMIC_FTRACE=y
CONFIG_FUNCTION_PROFILER=y
CONFIG_FTRACE_MCOUNT_RECORD=y
# CONFIG_FTRACE_STARTUP_TEST is not set
# CONFIG_TRACEPOINT_BENCHMARK is not set
# CONFIG_RING_BUFFER_BENCHMARK is not set
# CONFIG_RING_BUFFER_STARTUP_TEST is not set

#
# Runtime Testing
#
# CONFIG_LKDTM is not set
# CONFIG_TEST_LIST_SORT is not set
# CONFIG_KPROBES_SANITY_TEST is not set
# CONFIG_BACKTRACE_SELF_TEST is not set
# CONFIG_RBTREE_TEST is not set
# CONFIG_INTERVAL_TREE_TEST is not set
# CONFIG_PERCPU_TEST is not set
# CONFIG_ATOMIC64_SELFTEST is not set
# CONFIG_ASYNC_RAID6_TEST is not set
# CONFIG_TEST_STRING_HELPERS is not set
# CONFIG_TEST_KSTRTOX is not set
# CONFIG_TEST_RHASHTABLE is not set
# CONFIG_DMA_API_DEBUG is not set
# CONFIG_TEST_LKM is not set
# CONFIG_TEST_USER_COPY is not set
# CONFIG_TEST_BPF is not set
# CONFIG_TEST_FIRMWARE is not set
# CONFIG_TEST_UDELAY is not set
# CONFIG_SAMPLES is not set
CONFIG_HAVE_ARCH_KGDB=y
CONFIG_KGDB=y
CONFIG_KGDB_SERIAL_CONSOLE=y
# CONFIG_KGDB_TESTS is not set
CONFIG_KGDB_KDB=y
CONFIG_KDB_KEYBOARD=y
CONFIG_KDB_CONTINUE_CATASTROPHIC=0
# CONFIG_ARM_PTDUMP is not set
# CONFIG_STRICT_DEVMEM is not set
CONFIG_ARM_UNWIND=y
CONFIG_OLD_MCOUNT=y
# CONFIG_DEBUG_USER is not set
CONFIG_DEBUG_LL=y
CONFIG_DEBUG_LL_UART_NONE=y
# CONFIG_DEBUG_ICEDCC is not set
# CONFIG_DEBUG_SEMIHOSTING is not set
# CONFIG_DEBUG_LL_UART_8250 is not set
# CONFIG_DEBUG_LL_UART_PL01X is not set
CONFIG_DEBUG_LL_INCLUDE="mach/debug-macro.S"
# CONFIG_DEBUG_UART_PL01X is not set
# CONFIG_DEBUG_UART_8250 is not set
# CONFIG_DEBUG_UART_BCM63XX is not set
CONFIG_UNCOMPRESS_INCLUDE="mach/uncompress.h"
CONFIG_EARLY_PRINTK=y
# CONFIG_OC_ETM is not set
# CONFIG_ARM_KPROBES_TEST is not set
# CONFIG_PID_IN_CONTEXTIDR is not set
# CONFIG_DEBUG_SET_MODULE_RONX is not set

#
# Security options
#
CONFIG_KEYS=y
# CONFIG_PERSISTENT_KEYRINGS is not set
# CONFIG_BIG_KEYS is not set
# CONFIG_ENCRYPTED_KEYS is not set
CONFIG_KEYS_DEBUG_PROC_KEYS=y
# CONFIG_SECURITY_DMESG_RESTRICT is not set
CONFIG_SECURITY=y
CONFIG_SECURITYFS=y
CONFIG_SECURITY_NETWORK=y
CONFIG_SECURITY_NETWORK_XFRM=y
CONFIG_SECURITY_PATH=y
CONFIG_LSM_MMAP_MIN_ADDR=32768
CONFIG_SECURITY_SELINUX=y
# CONFIG_SECURITY_SELINUX_BOOTPARAM is not set
# CONFIG_SECURITY_SELINUX_DISABLE is not set
CONFIG_SECURITY_SELINUX_DEVELOP=y
CONFIG_SECURITY_SELINUX_AVC_STATS=y
CONFIG_SECURITY_SELINUX_CHECKREQPROT_VALUE=1
# CONFIG_SECURITY_SELINUX_POLICYDB_VERSION_MAX is not set
# CONFIG_SECURITY_SMACK is not set
CONFIG_SECURITY_TOMOYO=y
CONFIG_SECURITY_TOMOYO_MAX_ACCEPT_ENTRY=2048
CONFIG_SECURITY_TOMOYO_MAX_AUDIT_LOG=1024
# CONFIG_SECURITY_TOMOYO_OMIT_USERSPACE_LOADER is not set
CONFIG_SECURITY_TOMOYO_POLICY_LOADER="/sbin/tomoyo-init"
CONFIG_SECURITY_TOMOYO_ACTIVATION_TRIGGER="/sbin/init"
CONFIG_SECURITY_APPARMOR=y
CONFIG_SECURITY_APPARMOR_BOOTPARAM_VALUE=1
CONFIG_SECURITY_APPARMOR_HASH=y
CONFIG_SECURITY_YAMA=y
CONFIG_SECURITY_YAMA_STACKED=y
CONFIG_INTEGRITY=y
# CONFIG_INTEGRITY_SIGNATURE is not set
CONFIG_INTEGRITY_AUDIT=y
# CONFIG_IMA is not set
# CONFIG_EVM is not set
# CONFIG_DEFAULT_SECURITY_SELINUX is not set
# CONFIG_DEFAULT_SECURITY_TOMOYO is not set
# CONFIG_DEFAULT_SECURITY_APPARMOR is not set
# CONFIG_DEFAULT_SECURITY_YAMA is not set
CONFIG_DEFAULT_SECURITY_DAC=y
CONFIG_DEFAULT_SECURITY=""
CONFIG_XOR_BLOCKS=m
CONFIG_ASYNC_CORE=m
CONFIG_ASYNC_MEMCPY=m
CONFIG_ASYNC_XOR=m
CONFIG_ASYNC_PQ=m
CONFIG_ASYNC_RAID6_RECOV=m
CONFIG_CRYPTO=y

#
# Crypto core or helper
#
CONFIG_CRYPTO_ALGAPI=y
CONFIG_CRYPTO_ALGAPI2=y
CONFIG_CRYPTO_AEAD=m
CONFIG_CRYPTO_AEAD2=y
CONFIG_CRYPTO_BLKCIPHER=y
CONFIG_CRYPTO_BLKCIPHER2=y
CONFIG_CRYPTO_HASH=y
CONFIG_CRYPTO_HASH2=y
CONFIG_CRYPTO_RNG=m
CONFIG_CRYPTO_RNG2=y
CONFIG_CRYPTO_PCOMP=m
CONFIG_CRYPTO_PCOMP2=y
CONFIG_CRYPTO_MANAGER=y
CONFIG_CRYPTO_MANAGER2=y
CONFIG_CRYPTO_USER=m
# CONFIG_CRYPTO_MANAGER_DISABLE_TESTS is not set
CONFIG_CRYPTO_GF128MUL=m
CONFIG_CRYPTO_NULL=m
CONFIG_CRYPTO_PCRYPT=m
CONFIG_CRYPTO_WORKQUEUE=y
CONFIG_CRYPTO_CRYPTD=m
# CONFIG_CRYPTO_MCRYPTD is not set
CONFIG_CRYPTO_AUTHENC=m
CONFIG_CRYPTO_TEST=m
CONFIG_CRYPTO_ABLK_HELPER=m

#
# Authenticated Encryption with Associated Data
#
CONFIG_CRYPTO_CCM=m
CONFIG_CRYPTO_GCM=m
CONFIG_CRYPTO_SEQIV=m

#
# Block modes
#
CONFIG_CRYPTO_CBC=y
CONFIG_CRYPTO_CTR=m
CONFIG_CRYPTO_CTS=m
CONFIG_CRYPTO_ECB=m
CONFIG_CRYPTO_LRW=m
CONFIG_CRYPTO_PCBC=m
CONFIG_CRYPTO_XTS=m

#
# Hash modes
#
CONFIG_CRYPTO_CMAC=m
CONFIG_CRYPTO_HMAC=m
CONFIG_CRYPTO_XCBC=m
CONFIG_CRYPTO_VMAC=m

#
# Digest
#
CONFIG_CRYPTO_CRC32C=y
CONFIG_CRYPTO_CRC32=m
CONFIG_CRYPTO_CRCT10DIF=y
CONFIG_CRYPTO_GHASH=m
CONFIG_CRYPTO_MD4=m
CONFIG_CRYPTO_MD5=y
CONFIG_CRYPTO_MICHAEL_MIC=m
CONFIG_CRYPTO_RMD128=m
CONFIG_CRYPTO_RMD160=m
CONFIG_CRYPTO_RMD256=m
CONFIG_CRYPTO_RMD320=m
CONFIG_CRYPTO_SHA1=y
CONFIG_CRYPTO_SHA1_ARM=m
CONFIG_CRYPTO_SHA1_ARM_NEON=m
CONFIG_CRYPTO_SHA256=m
CONFIG_CRYPTO_SHA512=m
CONFIG_CRYPTO_SHA512_ARM_NEON=m
CONFIG_CRYPTO_TGR192=m
CONFIG_CRYPTO_WP512=m

#
# Ciphers
#
CONFIG_CRYPTO_AES=y
CONFIG_CRYPTO_AES_ARM=m
CONFIG_CRYPTO_AES_ARM_BS=m
CONFIG_CRYPTO_ANUBIS=m
CONFIG_CRYPTO_ARC4=m
CONFIG_CRYPTO_BLOWFISH=m
CONFIG_CRYPTO_BLOWFISH_COMMON=m
CONFIG_CRYPTO_CAMELLIA=m
CONFIG_CRYPTO_CAST_COMMON=m
CONFIG_CRYPTO_CAST5=m
CONFIG_CRYPTO_CAST6=m
CONFIG_CRYPTO_DES=y
CONFIG_CRYPTO_FCRYPT=m
CONFIG_CRYPTO_KHAZAD=m
CONFIG_CRYPTO_SALSA20=m
CONFIG_CRYPTO_SEED=m
CONFIG_CRYPTO_SERPENT=m
CONFIG_CRYPTO_TEA=m
CONFIG_CRYPTO_TWOFISH=m
CONFIG_CRYPTO_TWOFISH_COMMON=m

#
# Compression
#
CONFIG_CRYPTO_DEFLATE=m
CONFIG_CRYPTO_ZLIB=m
CONFIG_CRYPTO_LZO=y
CONFIG_CRYPTO_LZ4=m
CONFIG_CRYPTO_LZ4HC=m

#
# Random Number Generation
#
# CONFIG_CRYPTO_ANSI_CPRNG is not set
# CONFIG_CRYPTO_DRBG_MENU is not set
CONFIG_CRYPTO_USER_API=m
CONFIG_CRYPTO_USER_API_HASH=m
CONFIG_CRYPTO_USER_API_SKCIPHER=m
# CONFIG_CRYPTO_HW is not set
# CONFIG_ASYMMETRIC_KEY_TYPE is not set
CONFIG_BINARY_PRINTF=y

#
# Library routines
#
CONFIG_RAID6_PQ=m
CONFIG_BITREVERSE=y
CONFIG_GENERIC_STRNCPY_FROM_USER=y
CONFIG_GENERIC_STRNLEN_USER=y
CONFIG_GENERIC_NET_UTILS=y
CONFIG_GENERIC_PCI_IOMAP=y
CONFIG_GENERIC_IO=y
CONFIG_PERCPU_RWSEM=y
CONFIG_ARCH_USE_CMPXCHG_LOCKREF=y
CONFIG_CRC_CCITT=m
CONFIG_CRC16=y
CONFIG_CRC_T10DIF=y
CONFIG_CRC_ITU_T=y
CONFIG_CRC32=y
# CONFIG_CRC32_SELFTEST is not set
CONFIG_CRC32_SLICEBY8=y
# CONFIG_CRC32_SLICEBY4 is not set
# CONFIG_CRC32_SARWATE is not set
# CONFIG_CRC32_BIT is not set
CONFIG_CRC7=m
CONFIG_LIBCRC32C=y
# CONFIG_CRC8 is not set
CONFIG_AUDIT_GENERIC=y
# CONFIG_AUDIT_ARCH_COMPAT_GENERIC is not set
# CONFIG_RANDOM32_SELFTEST is not set
CONFIG_ZLIB_INFLATE=y
CONFIG_ZLIB_DEFLATE=m
CONFIG_LZO_COMPRESS=y
CONFIG_LZO_DECOMPRESS=y
CONFIG_LZ4_COMPRESS=m
CONFIG_LZ4HC_COMPRESS=m
CONFIG_LZ4_DECOMPRESS=y
CONFIG_XZ_DEC=y
# CONFIG_XZ_DEC_X86 is not set
# CONFIG_XZ_DEC_POWERPC is not set
# CONFIG_XZ_DEC_IA64 is not set
CONFIG_XZ_DEC_ARM=y
CONFIG_XZ_DEC_ARMTHUMB=y
# CONFIG_XZ_DEC_SPARC is not set
CONFIG_XZ_DEC_BCJ=y
# CONFIG_XZ_DEC_TEST is not set
CONFIG_DECOMPRESS_GZIP=y
CONFIG_DECOMPRESS_BZIP2=y
CONFIG_DECOMPRESS_LZMA=y
CONFIG_DECOMPRESS_XZ=y
CONFIG_DECOMPRESS_LZO=y
CONFIG_DECOMPRESS_LZ4=y
CONFIG_GENERIC_ALLOCATOR=y
CONFIG_TEXTSEARCH=y
CONFIG_TEXTSEARCH_KMP=m
CONFIG_TEXTSEARCH_BM=m
CONFIG_TEXTSEARCH_FSM=m
CONFIG_BTREE=y
CONFIG_ASSOCIATIVE_ARRAY=y
CONFIG_HAS_IOMEM=y
CONFIG_HAS_IOPORT_MAP=y
CONFIG_HAS_DMA=y
CONFIG_CPU_RMAP=y
CONFIG_DQL=y
CONFIG_GLOB=y
# CONFIG_GLOB_SELFTEST is not set
CONFIG_NLATTR=y
CONFIG_ARCH_HAS_ATOMIC64_DEC_IF_POSITIVE=y
CONFIG_LRU_CACHE=m
CONFIG_AVERAGE=y
CONFIG_CORDIC=m
# CONFIG_DDR is not set
CONFIG_LIBFDT=y
CONFIG_OID_REGISTRY=y
CONFIG_FONT_SUPPORT=y
# CONFIG_FONTS is not set
CONFIG_FONT_8x8=y
CONFIG_FONT_8x16=y
# CONFIG_ARCH_HAS_SG_CHAIN is not set
CONFIG_HAVE_KVM_IRQCHIP=y
CONFIG_KVM_MMIO=y
CONFIG_HAVE_KVM_CPU_RELAX_INTERCEPT=y
CONFIG_VIRTUALIZATION=y
CONFIG_KVM=y
CONFIG_KVM_ARM_HOST=y
CONFIG_KVM_ARM_MAX_VCPUS=4
# CONFIG_KVM_ARM_VGIC is not set
CONFIG_KVM_ARM_VGIC_EMU=y
CONFIG_KVM_ARM_TIMER=y
</pre>

<h4>References</h4>

<OL>
  <li><a href="https://www.raspberrypi.org/documentation/configuration/device-tree.md" 
      target="_b">Device Trees, overlays and parameters</a>
  <li><a href="https://www.raspberrypi.org/documentation/linux/kernel/building.md" 
      target="_b">Rpi Kernel Building</a>
  <li><a href="http://archive.raspbian.org/raspbian/pool/main/l/linux-4.4/" 
      target="_b">raspbian archive</a>
</OL>

<a name="DebianRpi"></a><h3>Debian RaspberryPi2</h3>

<OL>
  <LI><a href="#locationline">RaspberryPi2</a>
  <LI><a href="#DebianJessieOnRpi2">Debian Jessie on Raspberry Pi 2
  <LI><a href="https://wiki.debian.org/RaspberryPi#QEMU_User_Emulation_for_Raspberry_Pi_Development">QEMU User Emulation Rpi</a>
  <LI><a href="#"></a>
</OL>


<h3 id="locationline">RaspberryPi2 
<a href="https://wiki.debian.org/RaspberryPi2">(Source Origin)</a>
</h3>


<div id="page" dir="ltr" lang="en">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line862">This page shall be describing how to run Debian nicely on the RaspberryPi2. Many of the problems affecting the <a href="https://wiki.debian.org/RaspberryPi">RaspberryPi</a>
 also affect the RaspberryPi2 - but let's devote this page to making the
 machine usable with Debian Jessie (and soon Stretch) using two 
approaches: <span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span></p><ul><li>the non-free binary blob for the GPU <span class="anchor" id="line-4"></span></li><li>the free driver in development <span class="anchor" id="line-5"></span><span class="anchor" id="line-6"></span></li></ul><p class="line874">I'm planing to extend this page with instructions for both approaches soon. <span class="anchor" id="line-7"></span><span class="anchor" id="line-8"></span></p><p class="line874">Help and collaboration very much welcome! <span class="anchor" id="line-9"></span><span class="anchor" id="line-10"></span></p><p class="line867">
</p>

<h4 id="The_basic_Debian_install">The basic Debian install</h4>
<span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span><ul><li><p class="line862">read <a class="http" href="#DebianJessieOnRpi2">http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/</a> <span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span></p></li></ul><p class="line867">
</p>

<h4 id="Add_U-boot_to_the_basic_Debian_install">Add U-boot to the basic Debian install</h4>
<span class="anchor" id="line-15"></span><ul><li><p class="line862">read <a class="https" href="file:///src3/Xvisor/HTML/Uboot-Tutorial.html#UbootRaspberryPi2">raspberry Pi 2 
Debian Jessie And U-boot/</a> (this approach boots all cores with a recent version of u-boot) <span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span></p></li></ul><p class="line867">
</p>

<h4 id="Advanced_Debian_Jessie_debootstrap_script">Advanced Debian Jessie debootstrap script</h4>

read <a href="https://github.com/drtyhlpr/rpi2-gen-image">drtyhlpr/rpi2-gen-image 
webpage </a> &nbsp;&nbsp;
<a href="https://github.com/drtyhlpr/rpi2-gen-image/blob/master/rpi2-gen-image.sh" 
target="_b">rpi2-gen-image.sh</a>
<span class="anchor" id="line-20"></span></p></li></ul><p class="line867">
</p>

<h4 id="The_free_driver">The free driver</h4>
<span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span><ul><li><p class="line862">kernel driver in development: <a class="http" href="http://dri.freedesktop.org/wiki/VC4/">http://dri.freedesktop.org/wiki/VC4/</a>, (Mesa and DRM driver for 
Broadcom VC4), <span class="anchor" id="line-23"></span></p></li><li><p class="line891"><a class="http" href="http://lca2015.linux.org.au/schedule/30256/view_talk">LCA 2015 talk</a> and a <a class="https" href="https://www.youtube.com/watch?v=EXDeketJNdk">video recording</a> of it. <span class="anchor" id="line-24"></span></p></li><li>to be continued <span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span></li></ul><p class="line867">
</p>

<h4 id="The_non-free_driver">The non-free driver</h4>
<span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span><ul><li>explain here how to install it on jessie <span class="anchor" id="line-29"></span></li></ul><span class="anchor" id="bottom"></span></div><div id="pagebottom"></div>
</div>


<div id="footer">
<p id="pageinfo" class="info" dir="ltr" lang="en">RaspberryPi2  (last edited 2015-12-29 12:02:54 by <span title="ParoBalth"><a href="https://wiki.debian.org/ParoBalth" title="ParoBalth">ParoBalth</a></span>)</p>

</div>


<a name="DebianJessieOnRpi2"></a> <h3>Debian Jessie on Raspberry Pi 2 
<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/">(Source 
Origin)</a></h3>

<p>Apart from being somewhat slow, one of the downsides of the
original Raspberry Pi SoC was that it had an old ARM11 core which
implements the ARMv6 architecture. This was particularly
unfortunate as most common distributions (Debian, Ubuntu, Fedora,
etc) standardized on the ARMv7-A architecture as a minimum for
their ARM hardfloat ports. Which is one of the reasons for Raspbian
and the various other RPI specific distributions.</p>

<p>Happily, with the new <a href="http://www.raspberrypi.org/raspberry-pi-2-on-sale/">Raspberry Pi
2</a> using Cortex-A7 Cores (which implement the ARMv7-A
architecture) this issue is out of the way, which means that a a
standard Debian hardfloat userland will run just fine. So the
obvious first thing to do when an RPI 2 appeared on my desk was to
put together a quick Debian Jessie image for it.</p>

<p>The result of which can be found at: <a href="https://images.collabora.co.uk/rpi2/">https://images.collabora.co.uk/rpi2/</a></p>

<p>Login as root with password debian (Obviously do change the
password and create a normal user after booting). The image is 3G,
so should fit on any SD card marketed as 4G or bigger. Using
<a href="http://git.infradead.org/users/dedekind/bmap-tools.git">bmap-tools</a>
for flashing is recommended, otherwise you'll be waiting for 2.5G
of zeros to be written to the card, which tends to be rather
boring. Note that the image is really basic and will just get you
to a login prompt on either serial or hdmi, batteries are very much
not included, but can be apt-getted :).</p>

<p>Technically, this image is simply a Debian Jessie debootstrap
with a extra packages for hardware support. Unlike Raspbian the
first partition (which contains the firmware &amp; kernel files to
boot the system) is mounted on /boot/firmware rather then on /boot.
This is because the VideoCore expects the first partition to be a
FAT filesystem, but mounting FAT on /boot really doesn't work right
on Debian systems as it contains files managed by dpkg (e.g. the
kernel package) which requires a POSIX compatible filesystem.
Essentially the same reason why Debian is using /boot/efi for the
ESP partition on Intel systems rather the mounting it on /boot
directly.</p>

<p>For reference, the RPI2 specific packages in this image are from
<a href="https://repositories.collabora.co.uk/debian/">https://repositories.collabora.co.uk/debian/</a>
in the jessie distribution and rpi2 component (this repository is
enabled by default on the image). The relevant packages there
are:</p>
<ul>
  <li>linux: Current 3.18 based package from Debian experimental
(3.18.5-1~exp1 at the time of this writing) with a stack of patches
on top from the <a href="https://github.com/raspberrypi/linux">raspberrypi github
repository</a> and tweaked to build an rpi2 flavour as the patchset
isn't multiplatform capable <img src="DebianJessieOnRpi2_files/sad.png" alt=":("></li>
  <li>raspberrypi-firmware-nokernel: Firmware package and misc
libraries packages taken from Raspbian, with a slight tweak to
install in /boot/firmware rather then /boot.</li>
  <li>flash-kernel: Current flash-kernel package from debian
experimental, with a small addition to detect the RPI 2 and "flash"
the kernel to /boot/firmware/kernel7.img (which is what the GPU
will try to boot on this board).</li>
</ul>
<p>For the future, it would be nice to see the Raspberry Pi 2
support out of the box on Debian. For that to happen, the most
important thing would be to have some mainline kernel support for
this board (supporting multiplatform!) so it can be build as part
of debians armmp kernel flavour. And ideally, having the firmware
load a bootloader (such as u-boot) rather than a kernel directly to
allow for a much more flexible boot sequence and support for using
an initramfs (u-boot has some support for the original Raspberry
Pi, so adding Raspberry Pi 2 support should hopefully not be too
tricky)</p>

<p>Update: An updated image (<a href="https://images.collabora.co.uk/rpi2/jessie-rpi2-20150705.img.gz">20150705</a>)
is available with the latest packages from Jessie and a GPG key
that's not expired :).</p>


</div>



<div id="comments">
<div id="feedlink">

<a class="feedbutton" type="application/rss+xml" href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/comments.rss">RSS</a>


<a class="feedbutton" type="application/atom+xml" href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/comments.atom">Atom</a>

</div>
<div class="comment" id="comment-d3ccdec6364aec3ce2f5f30d641aaf9f">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-d3ccdec6364aec3ce2f5f30d641aaf9f">comment 1</a>

</div>

<div class="inlinecontent">
I'm really pleased to see that you're trying to integrate the RPi
hardware support with Debian's packages. I'm especially impressed
you've already rebased onto 3.18.5.

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 88.96.1.126">


Ben Hutchings


</span>

- <span class="date">Tue Feb  3 17:40:43 2015</span>
</div>



</div>
<div class="comment" id="comment-c83571b5c867e95c214889fbdf52123f">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-c83571b5c867e95c214889fbdf52123f">Jessie on RPI 2</a>

</div>

<div class="inlinecontent">
You just answered all my questions - <em>before</em> my Pi2 turns
up <img src="DebianJessieOnRpi2_files/biggrin.png" alt=":D">

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 82.15.176.238">


Andy Cater


</span>

- <span class="date">Tue Feb  3 19:28:27 2015</span>
</div>



</div>
<div class="comment" id="comment-b7cc1b7f718a883d6a4218dd10eddfa2">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-b7cc1b7f718a883d6a4218dd10eddfa2">Re: Debian Jessie on Raspberry Pi 2</a>

</div>

<div class="inlinecontent">
<p>Thank you for your work!</p>

<p>Will this RPi2 support get upstream into Debian Jessie? That
would be awesome.</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 213.21.13.210">


<a href="http://about.me/nleschov">Nickolai Leschov</a>


</span>

- <span class="date">Tue Feb  3 19:55:16 2015</span>
</div>



</div>
<div class="comment" id="comment-fcec508ad930947526a7be778eef1557">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-fcec508ad930947526a7be778eef1557">Scripts for generating image?</a>

</div>

<div class="inlinecontent">
Do you have scripts that generated the image, in case we wanted to
reproduce it/add more packages?

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 155.229.187.2">


<a href="http://blog.samat.org/">Samat Jain</a>


</span>

- <span class="date">Wed Feb  4 05:01:16 2015</span>
</div>



</div>
<div class="comment" id="comment-155f53daac30eaaa63736c8ed382da1d">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-155f53daac30eaaa63736c8ed382da1d">Re comments :)</a>

</div>

<div class="inlinecontent">
<p>Ben, I can't take the credit for it being based on 3.18.x
already, the raspberry pi github was already 3.18.5 based so i just
had to add those patches to the Debian kernel package and tweak it
a tiny bit.</p>

<p>Nickolai, Debian Jessie is in hard freeze even if these packages
were acceptable for Debian (which at least the kernel one is not
imho), it is too late for Jessie. Hopefully for Stretch RPI2 will
be supported out of the box.</p>

<p>Samat, No i didn't bother writing a script to generate the
image. It's rather simple though:</p>
<ul>
  <li>debootstrap a standard debian armhf chroot</li>
  <li>add the repository mentioned in the post and install the
packages mentioned there</li>
  <li>add config.txt and cmdline.txt in /boot/firmware from the
standard rpi image</li>
  <li>create an image file starting with a fat partition (and put the
content from /boot/firmware on it) and an ex4 partition and put
every else on it</li>
  <li>update etc/fstab to mount the two partitions on respectively
/boot/firmware and /</li>
  <li>set a password for root (or alterntively create a new user with
sudo rights and install sudo)</li>
  <li>done!</li>
</ul>
<p>At some point this will probably get automated, but it wasn't
important for me now.</p>


</div>

<div class="comment-header">

Comment by

<span class="author" title="Signed in">

<a href="http://sjoerd.luon.net/ikiwiki.cgi?page=sjoerd&amp;do=goto">sjoerd</a>

</span>


- <span class="date">Wed Feb  4 09:30:45 2015</span>
</div>



</div>
<div class="comment" id="comment-96cb4d62ed09508d465f39cd41c9e3a6">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-96cb4d62ed09508d465f39cd41c9e3a6">serial</a>

</div>

<div class="inlinecontent">
<p>Hi, is there a way to get the serial for the license key? I
tried cat /proc/cpuinfo, but the command returned just "Serial :
0000000000000000". THX</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 86.56.30.11">


motz_e


</span>

- <span class="date">Wed Feb  4 14:54:01 2015</span>
</div>



</div>
<div class="comment" id="comment-0b6055f3529f885999c3342570d80fd4">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-0b6055f3529f885999c3342570d80fd4">Just works (tm)</a>

</div>

<div class="inlinecontent">
Hi. Justed wanted to say thank you for this quick "up-and-running"
solution! Nice work! <img src="http://sjoerd.luon.net/smileys/smile.png" alt=":-)">

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 87.183.135.47">


jsl123


</span>

- <span class="date">Wed Feb  4 15:29:39 2015</span>
</div>



</div>
<div class="comment" id="comment-e80ffa97b69d7d6709138e84f3eacedf">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-e80ffa97b69d7d6709138e84f3eacedf">comment 8</a>

</div>

<div class="inlinecontent">
<p>Can I use win32diskimager http://win32diskimager.sourceforge.net
to install the image? Not sure how to flash a .gz image in a WIN8.1
?</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from unknown IP address">


skywave


</span>

- <span class="date">Wed Feb  4 21:25:18 2015</span>
</div>



</div>
<div class="comment" id="comment-d67ae3bac92a945145a350ba9bed975b">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-d67ae3bac92a945145a350ba9bed975b">comment 9</a>

</div>

<div class="inlinecontent">
Unzip the .gz first? Then use the Win32Imager.

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 62.8.199.138">


Anonymous


</span>

- <span class="date">Thu Feb  5 16:16:44 2015</span>
</div>



</div>
<div class="comment" id="comment-f5fd1575710e222ce8de48632258caac">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-f5fd1575710e222ce8de48632258caac">Great Image</a>

</div>

<div class="inlinecontent">
<p>Great work, boots super fast, thx a lot!</p>

<p>Btw, does it include the videocore drivers for X or even better
xwayland?</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 195.243.107.120">


OliD


</span>

- <span class="date">Thu Feb  5 16:36:45 2015</span>
</div>



</div>
<div class="comment" id="comment-3212db87d148208e0ee68709aed4b315">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-3212db87d148208e0ee68709aed4b315">Thank you!</a>

</div>

<div class="inlinecontent">
Hi, I wanted to thank you very much for this release. I got my Pi2
yesterday and for some reason official Ubuntu Snappy does not work
for me apart from logging from console. So I searched around and
downloaded your image and it works and it is PRETTY DAMN FAST!!!
Thank you so much for it. I would love if this became a supported
distro for Pi2!!!

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 81.171.104.252">


Random Geek


</span>

- <span class="date">Fri Feb  6 10:25:38 2015</span>
</div>



</div>
<div class="comment" id="comment-3e0e4cd519c2866533b654f036b996b9">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-3e0e4cd519c2866533b654f036b996b9">comment 11</a>

</div>

<div class="inlinecontent">
Can you post your kernel source and config?

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 2.103.238.232">


Anonymous


</span>

- <span class="date">Fri Feb  6 13:38:50 2015</span>
</div>



</div>
<div class="comment" id="comment-db967d9468aee4ff45e1d2d14f05271e">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-db967d9468aee4ff45e1d2d14f05271e">comment 13</a>

</div>

<div class="inlinecontent">
This image is corrupted. Root partition fails to mount.

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 82.228.252.212">


f4exb


</span>

- <span class="date">Fri Feb  6 23:44:43 2015</span>
</div>



</div>
<div class="comment" id="comment-33c18ca374391e8393792cb76a0c0dd0">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-33c18ca374391e8393792cb76a0c0dd0">comment 13</a>

</div>

<div class="inlinecontent">
WTF is bmap tools and what's the use for it? Can't you just create
an image file?

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 82.228.252.212">


Anonymous


</span>

- <span class="date">Fri Feb  6 23:51:24 2015</span>
</div>



</div>
<div class="comment" id="comment-187dcea1fc9988ecb69a02277d22e4b8">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-187dcea1fc9988ecb69a02277d22e4b8">comment 13</a>

</div>

<div class="inlinecontent">
Hey what's the userid and password?

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 82.228.252.212">


Anonymous


</span>

- <span class="date">Sat Feb  7 00:27:23 2015</span>
</div>



</div>
<div class="comment" id="comment-7e99e10946e640fc68f101158ff37917">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-7e99e10946e640fc68f101158ff37917">Minor annoyance</a>

</div>

<div class="inlinecontent">
The Debian contrib and non-free repos as well as the security repos
should be in the apt sources configuration.

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 87.185.110.17">


OliD


</span>

- <span class="date">Sat Feb  7 05:28:04 2015</span>
</div>



</div>
<div class="comment" id="comment-e028edff7f3c5dce9720a6d3fb00bfba">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-e028edff7f3c5dce9720a6d3fb00bfba">Installation</a>

</div>

<div class="inlinecontent">
Hello, how to install it? I am unpacking it, writing image to sd
with a Win32DiskImager and inserting into RPI2 but nothing is
happening

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 88.156.52.176">


A K


</span>

- <span class="date">Sat Feb  7 18:19:26 2015</span>
</div>



</div>
<div class="comment" id="comment-dc3db60d4c1523da849a29229e8fb293">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-dc3db60d4c1523da849a29229e8fb293">Hey Sjoerd</a>

</div>

<div class="inlinecontent">
<p>Thanks a ton. I am in the process to get proview.se running on
the rpi2 / Jessie ...</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 109.202.138.138">


<a href="http://maba.dk/">maba</a>


</span>

- <span class="date">Tue Feb 10 14:20:58 2015</span>
</div>



</div>
<div class="comment" id="comment-99a98c5d7f6de7cbd3b5513cd25caa96">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-99a98c5d7f6de7cbd3b5513cd25caa96">A simple solution that worked for me</a>

</div>

<div class="inlinecontent">
<p>For everyone who had problems running it on the rp2 a simple
solution is to use the bmap-tools to copy the image (as the author
says) on the sd instead of any other programs. The procedure that
worked for me was:</p>
<ol>
  <li>Download and extract the jessie-rpi2-20150202.img.gz to get an
.img file</li>
  <li>On any debian-based linux type "sudo apt-get install
bmap-tools" and install it.</li>
  <li>Then type "sudo bmaptool copy --nobmap
'yourlocation/jessie-rpi2.img' /dev/sdx" (Change yourlocation to
the location of the .img file and sdx for the letter where the SD
is mounted, if you don't know it type "sudo fdisk -l" and look for
it).</li>
  <li>Wait until it finishes and then put the SD on your rp2.</li>
</ol>
<p>Actually this port is pretty damm fast, it seems a clearly
replacement for our lovely Raspbian <img src="http://sjoerd.luon.net/smileys/smile.png" alt=":)"></p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 89.241.164.12">


Juan


</span>

- <span class="date">Tue Feb 10 19:59:58 2015</span>
</div>



</div>
<div class="comment" id="comment-a63f88dc446174cd091c4285648e7a92">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-a63f88dc446174cd091c4285648e7a92">awesome!</a>

</div>

<div class="inlinecontent">
<p>My rpi2 shipped and now here's this <img src="http://sjoerd.luon.net/smileys/smile.png" alt=":)"></p>

<p>Thanks for your hard work!</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 184.4.135.4">


<a href="http://jocala.com/">jocala</a>


</span>

- <span class="date">Thu Feb 12 07:39:37 2015</span>
</div>



</div>
<div class="comment" id="comment-51ea5e7677f4258559436c31313ea769">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-51ea5e7677f4258559436c31313ea769">Wifi issue.</a>

</div>

<div class="inlinecontent">
Can't get Wifi to work.

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 68.199.195.37">


Vitaly


</span>

- <span class="date">Sat Feb 14 02:35:58 2015</span>
</div>



</div>
<div class="comment" id="comment-d6c3663439e6e2c2e164f56868ccad66">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-d6c3663439e6e2c2e164f56868ccad66">HOWTO</a>

</div>

<div class="inlinecontent">
I don't suppose there is a write up of what you did anywhere - I'd
like to be able to do my own network install (with the mimimum
number of packages). Plan on looking to see if I can adapt the
raspbain network instal image or the raspbian installer when I get
time. Thanks for showing it is possible.

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 31.49.233.95">


miket


</span>

- <span class="date">Sat Feb 14 23:40:17 2015</span>
</div>



</div>
<div class="comment" id="comment-b668d5bab17d43406b5e121b7e9800bd">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-b668d5bab17d43406b5e121b7e9800bd">Thanks!</a>

</div>

<div class="inlinecontent">
My rpi2 arrived today and setting up debian was cake thanks to you.
Much appreciated my friend!

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 184.4.135.4">


<a href="http://jocala.com/">jocala</a>


</span>

- <span class="date">Sun Feb 15 02:20:12 2015</span>
</div>



</div>
<div class="comment" id="comment-4fbc3d6f6e1142f2c5877fad60a39b69">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-4fbc3d6f6e1142f2c5877fad60a39b69">comment 24</a>

</div>

<div class="inlinecontent">
Is there any way to install this onto an sd card via a windows PC?
My guess is Win32DiskImager alone isn't enough for this?

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 86.159.155.225">


edwinj85


</span>

- <span class="date">Sun Feb 15 17:41:52 2015</span>
</div>



</div>
<div class="comment" id="comment-fca83778b8895e29e1ea0ad10b9fd8ec">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-fca83778b8895e29e1ea0ad10b9fd8ec">comment 24</a>

</div>

<div class="inlinecontent">
<p>Turns out you can get this running with just Win32DiskImager!
You just need to unzip the .GZ archive and write the image to your
sd card like you would with a normal raspbian distro. When you get
to the command line just run apt-get install task-lxde-desktop to
get a basic desktop running, it will take a long time to install.
If the screen goes blank just press a key on your keyboard as the
hdmi output of the pi loves to go idle.</p>

<p>After several downloads a few bouts of configuration pages you
should get to a full fat desktop! You will then want to edit the
config.txt in the /boot/firmware folder to disable overscan (then
reboot) and you will also want to expand your primary partition to
use all the space on your SD card or you won't have anything to
spare:</p>

<p>
http://raspberrypi.stackexchange.com/questions/499/how-can-i-resize-my-root-partition</p>

<p>I know this all works because I'm writing from a Pi 2 with
debian on it right now! I still need to get sound working but this
is great, thanks to the OP!</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 86.159.155.225">


EdwinJ85


</span>

- <span class="date">Sun Feb 15 20:27:54 2015</span>
</div>



</div>
<div class="comment" id="comment-beaeb5026e8850b2bf3f6148246e3e72">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-beaeb5026e8850b2bf3f6148246e3e72">act led does not blink</a>

</div>

<div class="inlinecontent">
Hello. Act led does not blink even with manual control.

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 89.106.58.182">


Anonymous


</span>

- <span class="date">Tue Feb 17 11:58:24 2015</span>
</div>



</div>
<div class="comment" id="comment-2210d3fbce30bfee22ad73d751a14d31">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-2210d3fbce30bfee22ad73d751a14d31">Wifi works</a>

</div>

<div class="inlinecontent">
<p>Hey Vitali! About your wifi issue. You might need to install
firmware for your usb wifi adapter. This worked for me:</p>

<p>Add Jessie repositories for contrib and non-free.</p>

<pre>
<code>nano /etc/apt/sources.list
deb http://ftp.debian.org/debian jessie main contrib non-free
apt-get update
</code>
</pre>

<p>Identify your hardware:</p>

<pre>
<code>apt-get install usbutils
lsusb
</code>
</pre>

<p>My wifi showed up as realtek RTL8188CUS</p>

<p>Install firmware:</p>

<pre>
<code>apt-get install firmware-realtek
</code>
</pre>

<p>If not sure, use a sledgehammer to crack a nut:</p>

<pre>
<code>apt-get install firmware*
</code>
</pre>

<p>Configure the network</p>

<pre>
<code>apt-get install wicd-curses
wicd-curses
</code>
</pre>

<p>Highlight your ssid and tap right-arrow. Enable "automatically
connect to this network", enter the secret key and tap F10 to
finish. Highlight wired networks and tap (uppercase) D to
disconnect. Highlight your ssid again and tap Enter to connect. Tap
Q to exit.</p>

<p>Check for a connection:</p>

<pre>
<code>ping bbc.co.uk
</code>
</pre>

<p>Reboot to check persistence ie that interface comes up
automatically.</p>

<p>You may wish to install ssh in order to run headless.</p>

<pre>
<code>apt-get install ssh
</code>
</pre>

<p>Good luck - Chris</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 85.210.161.4">


<a href="http://untrammelled.co.uk/">Untrammelled</a>


</span>

- <span class="date">Sat Feb 21 17:58:54 2015</span>
</div>



</div>
<div class="comment" id="comment-a53ff18ebd6639bb982b7f2d676d23b5">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-a53ff18ebd6639bb982b7f2d676d23b5">How is the performance?</a>

</div>

<div class="inlinecontent">
<p>How is the performance compared to Raspbian, same? Is the tools
to expand the partition to use the entire SD card included?</p>

<p>I don't suppose, that I can just use dist-upgrade the kernel
after installation? I am thinking about security here - I like to
always have the most up-to-date system.</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 5.103.97.2">


CuriousDane


</span>

- <span class="date">Mon Feb 23 20:40:17 2015</span>
</div>



</div>
<div class="comment" id="comment-df5da189efbb20f40cdc002de74d0098">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-df5da189efbb20f40cdc002de74d0098">Docker base image</a>

</div>

<div class="inlinecontent">
<p>I saw that that docker is already working!</p>

<p>But of course you need a base image... Do you think you could
provide one? I think I don't know enough about basic Debian to pull
that off myself...</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 46.5.155.8">


Martin


</span>

- <span class="date">Mon Feb 23 22:55:17 2015</span>
</div>



</div>
<div class="comment" id="comment-87daaed7a4dac13c8ae67d0a1d47546d">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-87daaed7a4dac13c8ae67d0a1d47546d">Ubuntu 14.04 + observations</a>

</div>

<div class="inlinecontent">
<p>Thanks for the great work! I used your experience as a basis for
producing an Ubuntu 14.04 image. Details are at <a href="https://wiki.ubuntu.com/ARM/RaspberryPi">https://wiki.ubuntu.com/ARM/RaspberryPi</a>
.</p>

<p>Some observations:</p>

<ul>
  <li>3.18.7 applies nearly cleanly on top of 3.18.5 + BCM2709
patches, if you want to produce an updated kernel. My 3.18.0-14.15
kernel is based upon vivid's 3.18.0-14.15 kernel, which is based on
3.18.7.</li>
  <li>The firmware in the raspberrypi-firmware-nokernel package is
ancient (relatively speaking) from December, and is probably
causing some of the problems in the comments here. The activity LED
not working is definitely one of them.</li>
  <li>I've adopted your change of putting the firmware in
/boot/firmware. Hopefully that sticks, as it's a good idea.</li>
  <li>I've split raspberrypi-firmware-nokernel (previously binary
bootloader firmware + binary userland utils in /opt/vc) into
raspberrypi-firmware-nokernel (which now just has the firmware) and
raspberrypi-vc (which compiles the userland utils / libraries from
source and installs them "properly" in /usr).</li>
  <li>I've packaged xserver-xorg-video-fbturbo, for faster window
move/scroll operations on the Raspberry Pi. The packaging is based
on xserver-xorg-video-fbdev from trusty, but should be portable to
jessie with little/no modification.</li>
</ul>

<p>My packages are available at <a href="https://launchpad.net/%7Efo0bar/+archive/ubuntu/rpi2/+packages">https://launchpad.net/~fo0bar/+archive/ubuntu/rpi2/+packages</a>
if you'd like to take a look.</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from unknown IP address">


<a href="http://www.finnie.org/">Ryan Finnie</a>


</span>

- <span class="date">Tue Feb 24 06:26:03 2015</span>
</div>



</div>
<div class="comment" id="comment-474e831a3732d8fb9db370e2874c9dac">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-474e831a3732d8fb9db370e2874c9dac">Download &amp; prepare SD card (using bmap-tools)</a>

</div>

<div class="inlinecontent">
<p>Juan: If you're in the directory that you downloaded all 3 files
to (and have "bmap-tools" installed -- as suggested using "apt-get
install bmap-tools" on a Debian based system), the following
command is enough:</p>

<pre>
<code>sudo bmaptool copy jessie-rpi2-20150202.img.gz /dev/sdX
</code>
</pre>

<p>where sdX is your SD card's device (and you don't need the
"sudo" if you're root already) of course.</p>

<p>Using bmaptool is really a time saver and it is pretty clever in
discovering the *.bmap file and extracting the *.gz automagically
prior to writing the image file to the SD card. <img src="http://sjoerd.luon.net/smileys/smile.png" alt=":-)"></p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 130.133.10.5">


Robert


</span>

- <span class="date">Tue Feb 24 17:50:19 2015</span>
</div>



</div>
<div class="comment" id="comment-b13cbb48161b1b6985067437a456a052">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-b13cbb48161b1b6985067437a456a052">GUI not working</a>

</div>

<div class="inlinecontent">
<p>Hi all !</p>

<p>Great work ! I bmapped the image to a 16gb stick, booted the
rpi, then did "apt-get install xbmc gnome"! Ran into space issues
(the partitions are for a 4GB stick) so i resized the partition and
the filesystem on the fly without rebooting and continued apt-get.
So now i have a full xorg and gnome install.</p>

<p>However, on reboot GDM seems to start, but only presents a black
screen, no login box or anything.</p>

<p>Any idea what could be the cause ?</p>

<p>Thanks for your great work, Cheers, Karl</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 193.170.104.28">


Karl_K


</span>

- <span class="date">Wed Feb 25 16:08:29 2015</span>
</div>



</div>
<div class="comment" id="comment-db6213851028b4fdfd6a247d4045bc49">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-db6213851028b4fdfd6a247d4045bc49">XBMC</a>

</div>

<div class="inlinecontent">
<p>Hi !</p>

<p>Thanks for the image, it provides lightning fast access to
debian jessie on rpi2 !</p>

<p>However, it seems xbmc from debian repos does not work on rpi2,
i get "XBMC needs hardware accelerated OpenGL rendering" error.</p>

<p>Any idea what to do ?</p>

<p>Cheers, Karl</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 80.110.45.61">


Karl_K


</span>

- <span class="date">Fri Feb 27 00:44:55 2015</span>
</div>



</div>
<div class="comment" id="comment-791660b8d3e3bb18738590534bdffc50">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-791660b8d3e3bb18738590534bdffc50">SSH enabled by default</a>

</div>

<div class="inlinecontent">
Could you enable ssh by default?

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 84.240.21.117">


Dovydas


</span>

- <span class="date">Sun Mar  1 13:03:36 2015</span>
</div>



</div>
<div class="comment" id="comment-ebff59706ab2c1f0030fc133067e587b">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-ebff59706ab2c1f0030fc133067e587b">Getting the sound working</a>

</div>

<div class="inlinecontent">
<p>Hey Sjoerd,</p>

<p>Great Image <img src="http://sjoerd.luon.net/smileys/smile.png" alt=":-)"> I got XFCE4 running with an USB sound card, but i want to
use the sound plug on the Pi. Did you make any progress on
that?</p>

<p>DenniZ</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from unknown IP address">


DenniZr


</span>

- <span class="date">Mon Mar  2 16:41:17 2015</span>
</div>



</div>
<div class="comment" id="comment-cba87166d4dc509e0c8c647f8e548758">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-cba87166d4dc509e0c8c647f8e548758">Kernel module</a>

</div>

<div class="inlinecontent">
<p>I installed this as my first raspberry OS and it works great. I
have a gcc 4.9.2 development environment up and running. But now I
want to enable the perfomance counter and for that I need to make a
kernel module, I know little more than the guides on the web
provide but to get things right, I need the kernel sources. Do I
need the patched sources you built from, and in that case may I
have them? I understand if you don't have an answer...</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 81.229.182.42">


Anders


</span>

- <span class="date">Sat Mar  7 14:12:32 2015</span>
</div>



</div>
<div class="comment" id="comment-6e1e1ef7b77187d409a81bd30537506a">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-6e1e1ef7b77187d409a81bd30537506a">Kernel source and headers are packed in the regular Debian way</a>

</div>

<div class="inlinecontent">
Anders, it looks like the kernel is packaged in the regular Debian
way. To get the full kernel source, you can apt-get install
linux-source-3.18, which puts a source tarball in /usr/src. To get
just the headers (which usually suffices to build a kernel module),
you can apt-get install linux-headers-3.18. That puts the headers
in the place where they're found by the usual module-building
process.

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 198.183.6.29">


<a href="http://emergent.unpythonic.net/">Jeff Epler</a>


</span>

- <span class="date">Mon Mar  9 16:03:43 2015</span>
</div>



</div>
<div class="comment" id="comment-3210717e7ba84278e4a9a2363b6dda2b">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-3210717e7ba84278e4a9a2363b6dda2b">Act Led</a>

</div>

<div class="inlinecontent">
<p>You have done a very good job!I now have been working with it
some days. But is there a Descrption how to get the Act-Led still
working without building a new SD-image ? ? What has to be updated
on the SD-image ? What files ? I think noone needs to use the
bitmap-tools. To copy the 3M-image bit by bit took me about 10
Minutes with Rasbian and my RPI-2. you than can expand the image
with fdisk or Gparted. I installed the mate-desktop-environment
together with lightDM and it seems to be perfect for this image on
RPI-2. Jessie with mate-desktop seems to be something faster than
Ubuntu 14.04 with XFCE so I will stay at Jessie with Mate. I
managed to install the Chromium-Webbrowser 37.xxx together with the
Pepperflashplayer-Plugin an it also runs perfect. I refered to this
link here:</p>

<p>
http://blog.valitov.me/2014/06/installing-google-chromium-on-arm.html?m=1</p>

<p>many greetings</p>

<p>Klaus</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 84.161.218.123">


Klaus


</span>

- <span class="date">Tue Mar 10 20:48:45 2015</span>
</div>



</div>
<div class="comment" id="comment-fa4355b28b81aa19c8972853acd467a0">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-fa4355b28b81aa19c8972853acd467a0">Tip for using camera</a>

</div>

<div class="inlinecontent">
<p>Just FYI folks incase you were thick like me and missed it --
the config for /boot/config.txt has been moved to
/boot/firmware/config.txt</p>

<p>So don't make a /boot/config.txt, it will be ignored, but do
edit /boot/firmware/config.txt. Saved me a lot of trouble once all
of that clicked in.</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 24.212.238.189">


Joe


</span>

- <span class="date">Wed Mar 11 08:45:01 2015</span>
</div>



</div>
<div class="comment" id="comment-55b6b5957590688d8360e9aeea2ee7dc">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-55b6b5957590688d8360e9aeea2ee7dc">comment 40</a>

</div>

<div class="inlinecontent">
Did you manage to get OpenGL running? I'm trying to get Kodi to run
to no avail.

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 24.212.238.189">


jake


</span>

- <span class="date">Wed Mar 11 18:52:26 2015</span>
</div>



</div>
<div class="comment" id="comment-54517976cef3046c235d8a88063586ea">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-54517976cef3046c235d8a88063586ea">comment 41</a>

</div>

<div class="inlinecontent">
<p>in now could manage to get the newest firmware and ACT led is
working. For a quick solution I installes andrew Hessets udate
script which is in Rasbian and can be started with "rpi-update" To
install the script please type or copy this commands in a
terminal</p>

<p>If not installed already install git :</p>

<p>root@jessie-rpi:~# apt-get install git</p>

<p>root@jessie-rpi:~# wget
https://raw.github.com/Hexxeh/rpi-update/master/rpi-update -O
/usr/bin/rpi-update &amp;&amp; sudo chmod +x
/usr/bin/rpi-update</p>

<p>root@jessie-rpi:~# sudo rpi-update</p>

<p>Now the script has written the new files to ./boot directory but
we need them under .boot/firmware</p>

<p>you have to move now all new files from ./boot to
./boot/firmware. The old files there have to be replaced with the
new ones. If done so make a reboot.</p>

<p>Now the act-led should blink again.</p>

<p>Later we should update Andrews script for us with the right
download directory.</p>

<p>many regards</p>

<p>Klaus</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 91.39.154.70">


Klaus


</span>

- <span class="date">Wed Mar 11 20:59:04 2015</span>
</div>



</div>
<div class="comment" id="comment-3c56c4f84da8841b5c513923249ee755">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-3c56c4f84da8841b5c513923249ee755">comment 41</a>

</div>

<div class="inlinecontent">
Sorry, please remove "sudo" out of this commands.

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 91.39.154.70">


Klaus


</span>

- <span class="date">Wed Mar 11 21:02:49 2015</span>
</div>



</div>
<div class="comment" id="comment-a8e445e1bbc89fc80df12665f9cfeb62">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-a8e445e1bbc89fc80df12665f9cfeb62">Kernel module</a>

</div>

<div class="inlinecontent">
<p>Hi Jeff, thanks for the pointers. Installing the headers using
apt-get was not possible. But I got the source instead, unpacked
it, ran make modules_prepare and pointed the makefile to the kernel
source root. I can now build a kernel module that I can force feed
the kernel with modprobe -f, I am close to success...</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 81.229.182.42">


Anders


</span>

- <span class="date">Wed Mar 11 22:04:43 2015</span>
</div>



</div>
<div class="comment" id="comment-8900f20dbef32c70b99a1096f8455782">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-8900f20dbef32c70b99a1096f8455782">to get sound</a>

</div>

<div class="inlinecontent">
<p>There are some things still missing in this image.</p>

<p>First you need the alsa-utils:</p>

<p>apt-get install alsa-utils</p>

<p>Configure the output to go to 3,5mm jack:</p>

<p>amixer cset numid=3 1</p>

<p>Than load modprobe:</p>

<p>modprobe snd_bcm2835</p>

<p>If all is done you should have sound on 3,5mm jack.</p>

<p>If you want sound on hdmi outut:</p>

<p>amixer cset numid=3 2</p>

<p>This modprobe and others should be loaded already at boot.
Configuration should be possible at ./etc/modprobe.d Maybe one can
refer to the already existing settings at Rasbian.</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 91.39.154.70">


Klaus


</span>

- <span class="date">Wed Mar 11 22:49:25 2015</span>
</div>



</div>
<div class="comment" id="comment-ac990400b495ca3c27acbf3cfd7cbed1">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-ac990400b495ca3c27acbf3cfd7cbed1">...</a>

</div>

<div class="inlinecontent">
<p>on initial boot... after apt-get update &amp;&amp; apt-get
upgrade...</p>

<p>Setting up initramfs-tools (0.119) ... update-initramfs:
deferring update (trigger activated) Processing triggers for
initramfs-tools (0.119) ... update-initramfs: Generating
/boot/initrd.img-3.18.0-trunk-rpi2 Unsupported platform. run-parts:
/etc/initramfs/post-update.d//flash-kernel exited with return code
1 dpkg: error processing package initramfs-tools (--configure):
subprocess installed post-installation script returned error exit
status 1 Errors were encountered while processing: initramfs-tools
E: Sub-process /usr/bin/dpkg returned an error code (1) -- Is this
to be expected ?</p>

<p>root@jessie-rpi:~# apt-get install linux-headers-3.18 Reading
package lists... Done Building dependency tree<br>
Reading state information... Done Note, selecting
'linux-headers-3.18.0-trunk-all-armhf' for regex
'linux-headers-3.18' Note, selecting
'linux-headers-3.18.0-trunk-rpi2' for regex 'linux-headers-3.18'
Note, selecting 'linux-headers-3.18.0-trunk-all' for regex
'linux-headers-3.18' Note, selecting
'linux-headers-3.18.0-trunk-common' for regex 'linux-headers-3.18'
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming. The following information may help
to resolve the situation:</p>

<p>The following packages have unmet dependencies:
linux-headers-3.18.0-trunk-rpi2 : Depends: linux-kbuild-3.18 but it
is not installable E: Unable to correct problems, you have held
broken packages. ---seems trying to install headers does not work
as previously stated?</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 23.116.82.161">


spencer


</span>

- <span class="date">Thu Mar 12 06:48:32 2015</span>
</div>



</div>
<div class="comment" id="comment-c018fbd458446ef7da85e56d483c43bd">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-c018fbd458446ef7da85e56d483c43bd">to get sound</a>

</div>

<div class="inlinecontent">
<p>To load the soundmodule at boot time you should edit the
soundmodule to modules.conf in ./etc/modules-load.de</p>

<p>There you can add one line for any kernel module you want to
load at boot time. For soundmodule add :</p>

<p>snd_bcm2835</p>

<p>Don't forget to install alsa-utils</p>

<p>and switch output to 3,5mm jack with "amixer cset numid=3 1" or
to hdmi with "amixer cset numid=3 2"</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 91.39.187.50">


Klaus


</span>

- <span class="date">Thu Mar 12 09:20:27 2015</span>
</div>



</div>
<div class="comment" id="comment-3cda5593895ca22fcd211f6e5d960dd9">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-3cda5593895ca22fcd211f6e5d960dd9">Problem after apt-get update and apt-get  upgrade</a>

</div>

<div class="inlinecontent">
<p>I encountered the same problem as Spencer above. Everything
worked fine until I did an apt-get update &amp; upgrade after which
I got the same error messages as above. Not sure what to do about
this. Everything worked beautifully before.</p>

<p>Paul</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 131.180.33.155">


Paul


</span>

- <span class="date">Thu Mar 12 14:52:52 2015</span>
</div>



</div>
<div class="comment" id="comment-94f1a7a042080e4d1ff5dc57c1e2e071">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-94f1a7a042080e4d1ff5dc57c1e2e071">flash-kernel</a>

</div>

<div class="inlinecontent">
<p>I ran into the same problem as above when upgrading the image.
The short term problem is that flash-kernel 3.33 does not recognize
the RPI2.</p>

<p>A temporary fix is to hold back flash-kernel to 3.31 until 3.33
is fixed. Do "apt-mark hold flash-kernel" before you upgrade. After
it is fixed you can lift the hold with "apt-mark unhold
flash-kernel"</p>

<p>Steve</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 66.203.142.202">


Steve Zingman


</span>

- <span class="date">Fri Mar 13 01:50:24 2015</span>
</div>



</div>
<div class="comment" id="comment-6f9a3830f715ea678d377c57fb9915b0">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-6f9a3830f715ea678d377c57fb9915b0">flash-kernel fails</a>

</div>

<div class="inlinecontent">
<pre>
root@jessie-rpi:~# apt-cache policy flash-kernel
flash-kernel:
  Installed: 3.33
  Candidate: 3.33
  Version table:
 *** 3.33 0
        500 http://ftp.debian.org/debian/ jessie/main armhf Packages
        100 /var/lib/dpkg/status
     3.31~exp.1co1+b3 0
        500 https://repositories.collabora.co.uk/debian/ jessie/rpi2 armhf Packages
</pre>

<p>It seems that flash-kernel gets updated to main version instead
of the collabora one. You can downgrade (and hold), but it might be
useful to pin the collabora repo to a high enough priority. Someone
might post a helpful file.</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 87.92.94.122">


XTL


</span>

- <span class="date">Fri Mar 13 07:52:10 2015</span>
</div>



</div>
<div class="comment" id="comment-05f97b7391a34d663157e1015fd0db5a">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-05f97b7391a34d663157e1015fd0db5a">Rpi-update</a>

</div>

<div class="inlinecontent">
<p>You can have the Hexxeh rpi-update tool update a different
directory with BOOT_PATH and ROOT_PATH environment variables. They
default to / and /boot, so I should just be able to set them to /
and /boot/firmware right?</p>

<p>Also I wasn't able to get OC working on this image. My Pi
refused to go any faster than 800Mhz.</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 69.144.7.114">


David


</span>

- <span class="date">Fri Mar 13 18:24:39 2015</span>
</div>



</div>
<div class="comment" id="comment-19d97690cb67e1f365cfece4619ed469">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-19d97690cb67e1f365cfece4619ed469">Flash-kernel updated</a>

</div>

<div class="inlinecontent">
For those having issues with upgrading due to flash-kernel, the
flash-kernel package in the collabora repositories has been rebased
on the version in jessie which should solve the problem

</div>

<div class="comment-header">

Comment by

<span class="author" title="Signed in">

<a href="http://sjoerd.luon.net/ikiwiki.cgi?page=sjoerd&amp;do=goto">sjoerd</a>

</span>


- <span class="date">Fri Mar 13 20:52:00 2015</span>
</div>



</div>
<div class="comment" id="comment-fc9c277526cb33bc24eb2ac83d9f5dc4">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-fc9c277526cb33bc24eb2ac83d9f5dc4">Re: flash kernel updated</a>

</div>

<div class="inlinecontent">
<p>Thanks and also "dankjewel" I guess!?</p>

<p>Paul</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 80.101.142.185">


Paul


</span>

- <span class="date">Sat Mar 14 14:10:57 2015</span>
</div>



</div>
<div class="comment" id="comment-97325fdd71aef224058f05e31d5cd5c1">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-97325fdd71aef224058f05e31d5cd5c1">Difference between Raspbian Jessie?</a>

</div>

<div class="inlinecontent">
What is the difference between Debian Jessie and Raspbian Jessie
(get it by taking Raspbian Wheezy and change sources.lst to
jessie), other than the fact that Raspbian delivers rpi specific
packages already? I'm using Raspbian Jessie for two weeks now and
it seems to have all the same package versions just like Debian
Jessie. I'm running on an "old" Pi B, however (fully headless, too,
so no GUI related stuff whatsoever installed). I'm thinking of
getting a RPi2, will there be any benefit of using Debian Jessie
instead of Raspbian Jessie?

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from unknown IP address">


Anonymous


</span>

- <span class="date">Sun Mar 15 19:36:15 2015</span>
</div>



</div>
<div class="comment" id="comment-619a257389fa889d751caf1b343d11e7">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-619a257389fa889d751caf1b343d11e7">xbmc/kodi</a>

</div>

<div class="inlinecontent">
<p>Hi !</p>

<p>I just upgraded firmware and still xbmc from debian repos will
not run due to missing OpenGL support. What i do not understand is
that in the debian xbmc source makefile it automatically uses
opengles compile parameters on ARM platforms, so it seems its
actually compiled the right way.</p>

<p>This guy has working kodi on debian jessie on rpi2:
http://www.raspberrypi.org/forums/viewtopic.php?f=56&amp;t=101831</p>

<p>I installed it and it just works. Its version 14.1 so its newer
than jessies 13.2 but he seems not to want to disclose how he did
it. I would really prefer a straight debian install like we discuss
here, with just kernel and a few other packages not from the repos,
if we could just get xbmc/kodi running....</p>

<p>Cheers, Karl</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 80.110.45.61">


Karl_K


</span>

- <span class="date">Sun Mar 15 22:14:36 2015</span>
</div>



</div>
<div class="comment" id="comment-4652a206b7b105c9855ffeae6f9d95df">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-4652a206b7b105c9855ffeae6f9d95df">comment 53</a>

</div>

<div class="inlinecontent">
<p>Is there a way to get EGL working (e.g. for <code>clutter</code>
or <code>qtquick</code> based things to work)? There is
<code>libraspberrypi0</code> package, but it seems most libraries
pull in and use Mesa, which leads to failure starting anything.</p>

<p>Example hello worlds:</p>

<pre>
$ qml -qt5 test4.qml 
libEGL warning: GLX/DRI2 is not supported
libEGL warning: DRI2: failed to authenticate
Unable to find an X11 visual which matches EGL config 77
Could not initialize OpenGL
Aborted
</pre>
<pre>
$ ./testclutter.py 
libEGL warning: GLX/DRI2 is not supported
libEGL warning: DRI2: failed to authenticate

(testclutter.py:6885): Clutter-CRITICAL **: Unable to initialize Clutter: Unable to eglMakeCurrent with no surface
Segmentation fault
</pre>

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 87.92.94.122">


Axel


</span>

- <span class="date">Tue Mar 17 12:34:45 2015</span>
</div>



</div>
<div class="comment" id="comment-15f74f393f15ca8c7d0e48966cedee05">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-15f74f393f15ca8c7d0e48966cedee05">Uboot</a>

</div>

<div class="inlinecontent">
<p>U-boot has RPi2 support since a while. Would you update to 3.19
with Mesa(anholt's implementation)?</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 90.35.30.104">


MY123


</span>

- <span class="date">Thu Mar 19 18:35:18 2015</span>
</div>



</div>
<div class="comment" id="comment-c38015c5dfcb74642ee7b190b04d869d">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-c38015c5dfcb74642ee7b190b04d869d">Jessie, XFCE and KODI on RPI2 !</a>

</div>

<div class="inlinecontent">
<p>After trying for ages to compile kodi on rpi2 i finally found a
different way to get what i want:</p>

<p>
http://karl.kashofer.org/2015/03/19/debian-jessie-xfce-and-kodi-on-rpi2/</p>

<p>This now seems to work, Cheers, Karl</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 80.110.45.61">


Karl_K


</span>

- <span class="date">Thu Mar 19 22:13:25 2015</span>
</div>



</div>
<div class="comment" id="comment-5540e59ec0b7faf92cdf59373f6a9536">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-5540e59ec0b7faf92cdf59373f6a9536">linux-kbuild-3.18</a>

</div>

<div class="inlinecontent">
<p>If you're having trouble installing linux-kbuild-3.18, it's in
the experimental release of debian. Just add the following line to
/etc/apt/sources.list:</p>

<pre>
<code>deb http://ftp.debian.org/debian experimental main
</code>
</pre>

<p>Then run:</p>

<pre>
<code>sudo apt-get update
sudo apt-get -t experimental install linux-kbuild-3.18
</code>
</pre>

<p>and you should be good to go.</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 199.83.220.194">


Jack


</span>

- <span class="date">Sun Mar 22 05:08:20 2015</span>
</div>



</div>
<div class="comment" id="comment-a32a4259fd00af6ef6b0d60458cf27d9">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-a32a4259fd00af6ef6b0d60458cf27d9">Omxplayer success</a>

</div>

<div class="inlinecontent">
<p>For (my) reference, I have been able to successfully run
outofthebox omxplayer
(omxplayer_0.3.6~git20150319~7c752d3_armhf.deb) after installing
the following :</p>

<pre>
<code>libraspberrypi0:armhf 1.20141219-1~nokernel1.co1+b3
libraspberrypi-bin:armhf 1.20141219-1~nokernel1.co1+b3
(and of course the omxplayer dependency)

gpu_mem=192
</code>
</pre>

<p>I wonder when the latest firmware that supports gpu_mem_1024 is
going to be released on the repository ? Working great !</p>

<p>Thanks, Thomas.</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 122.29.36.166">


thomas /=


</span>

- <span class="date">Tue Mar 24 11:31:25 2015</span>
</div>



</div>
<div class="comment" id="comment-debe768005424050d60290cd7a058a2f">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-debe768005424050d60290cd7a058a2f">OC does not work</a>

</div>

<div class="inlinecontent">
<p>I had the same Problem, that overclocking did not work after
installing debian jessie.</p>

<p>This can be fixed by setting:</p>

<p>echo ondemand >
/sys/devices/system/cpu/cpu0/cpufreq/scaling_governor</p>

<p>echo ondemand >
/sys/devices/system/cpu/cpu1/cpufreq/scaling_governor</p>

<p>echo ondemand >
/sys/devices/system/cpu/cpu2/cpufreq/scaling_governor</p>

<p>echo ondemand >
/sys/devices/system/cpu/cpu3/cpufreq/scaling_governor</p>

<p>in /etc/rc.local</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 188.193.194.208">


Anonymous


</span>

- <span class="date">Wed Mar 25 21:59:16 2015</span>
</div>



</div>
<div class="comment" id="comment-42868b425b97c7307b758832d7fa5486">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-42868b425b97c7307b758832d7fa5486">Running Kodi</a>

</div>

<div class="inlinecontent">
<p>I think for those of trying to run Kodi I have a solution.</p>

<p>You'll need to follow the usual instructions for install
deb-multimedia's repos:</p>

<p>Add the keys:</p>
<h4>wget
http://www.deb-multimedia.org/pool/main/d/deb-multimedia-keyring/deb-multimedia-keyring_2014.2_all.deb</h4>
<h4>dpkg -i deb-multimedia-keyring_2014.2_all.deb</h4>
<p>Add the repository:</p>

<p>http://www.deb-multimedia.org/debian-m</p>

<p>Update:</p>
<h4>apt-get update</h4>
<p>Install kodi:</p>
<h4>apt-get install kodi kodi-bin kodi-standalone</h4>
<p>Build a launch script:</p>

<p>$ nano kodi.sh</p>
<h4>!/bin/sh</h4>
<p>export LD_LIBRARY_PATH=/opt/vc/lib:/opt/kodi
/usr/lib/kodi/kodi.bin</p>

<p>Save it and run it. It seems to work fine.</p>

<p>Just be warned you'll need to have the additional raspberry pi
stuff from the collabora repository: I didn't have them installed
on my image and apt-get couldn't find them, so I had to wget and
install manually...</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 137.122.155.238">


joe


</span>

- <span class="date">Thu Mar 26 22:37:02 2015</span>
</div>



</div>
<div class="comment" id="comment-4c4e1defb59a765819781eddc928fd6d">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-4c4e1defb59a765819781eddc928fd6d">SSH keys included -- insecure</a>

</div>

<div class="inlinecontent">
<p>SSH keys are included in the image, which is insecure. It means
that anyone can who has access to your network can impersonate your
specific Raspberry Pi, which is one of the things that SSH is
designed to prevent.</p>

<p>As a workaround, users can remove the existing keys:</p>

<pre>
<code>sudo rm /etc/ssh/ssh_host_*_key*
</code>
</pre>

<p>And then regenerate their own unique keys:</p>

<pre>
<code>sudo dpkg-reconfigure openssh-server
</code>
</pre>

<p>If you've ssh'd to your Raspberry Pi previously, you'll get a
warning or error about the key having been changed. On your client
machine, remove the entries in ~/.ssh/known_hosts listing your
Raspberry Pi's old key to rectify this.</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 206.63.229.144">


J.P. Larocque


</span>

- <span class="date">Wed Apr  8 00:18:10 2015</span>
</div>



</div>
<div class="comment" id="comment-8de720adcf826e968421a3346d574573">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-8de720adcf826e968421a3346d574573">Thanks for your work :)</a>

</div>

<div class="inlinecontent">
<p>Thanks for your work and building an Image based on Debian
jessie.</p>

<p>i've recreated my own Repository and added some packages for my
own system. so u can also this repo. http://debian.gunah.eu/debian/
i've provid also a new version of flash-kernel (with your patch),
because i got an issue with "Unsupported Platform".</p>

<p>About the Problem of some user with the serial of the raspberry
pi, i've used the original raspbian to find it out.</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 212.68.73.181">


<a href="http://www.gunah.eu/">Mathis</a>


</span>

- <span class="date">Wed Apr  8 14:28:43 2015</span>
</div>



</div>
<div class="comment" id="comment-1beafb694bd87bf78c4768c93de03b12">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-1beafb694bd87bf78c4768c93de03b12">flash-kernel 3.34 (return of the initramfs update problem)</a>

</div>

<div class="inlinecontent">
<p>Could you update the collabora-repo version once again?</p>

<p>Merci, Robert</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 130.133.10.5">


Robert


</span>

- <span class="date">Fri Apr 10 14:52:16 2015</span>
</div>



</div>
<div class="comment" id="comment-52d53955af038e55f38b270664dc959d">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-52d53955af038e55f38b270664dc959d">urername/password</a>

</div>

<div class="inlinecontent">
<p>Hi All! Please help me! Im rooky <img src="http://sjoerd.luon.net/smileys/smile.png" alt=":)"> jessie-rpi login: ?</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 91.82.147.6">


warpig


</span>

- <span class="date">Fri Apr 10 22:53:02 2015</span>
</div>



</div>
<div class="comment" id="comment-b4cc9a4d279af0e41945b365ef3b4831">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-b4cc9a4d279af0e41945b365ef3b4831">comment 61</a>

</div>

<div class="inlinecontent">
How do I get rid of the initramfs-update error message after each
apt-get run?

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from unknown IP address">


Rolf


</span>

- <span class="date">Tue Apr 14 22:26:52 2015</span>
</div>



</div>
<div class="comment" id="comment-71f7b39bfc2051a0617609c9c6a59c8f">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-71f7b39bfc2051a0617609c9c6a59c8f">flash-kernel bug and linux-kbuild-3.18 dependence</a>

</div>

<div class="inlinecontent">
<p>The flash-kernel script <em>doesn't work</em>. You
<strong>must</strong> manually copy (as root) the kernel to the
proper location.</p>

<pre>
<code>user@rpi:~# cp /boot/vmlinuz-3.18.0-trunk-rpi2 /boot/firmware/kernel7.img
</code>
</pre>

<p>To install the linux-headers-3.18.0-trunk-rpi2 package, you have
a dependency on the virtual package linux- kbuild - 3.18. This
package come from <strong>experimental</strong> Debian
repositories. You must add them to the end of sources.list file and
<strong>adjust the priority of those repositories</strong>.</p>

<pre>
<code>user@rpi:~# echo "# Debian Exp\
deb http://ftp.fr.debian.org/debian experimental main contrib non-free\
deb-src http://ftp.fr.debian.org/debian experimental main contrib non-free" >> /etc/apt/sources.list
user@rpi:~# cat &lt;&lt;EOF > /etc/apt/preferences.d/experimental
Package: *
Pin: release a=experimental
Pin-Priority: 80
EOF
</code>
</pre>

<p>To illustrate, here is my sources.list :</p>

<pre>
<code>user@rpi:~# cat /etc/apt/sources.list
# Repo specifique RaspPi2 (ARMV7 armhf)
deb https://repositories.collabora.co.uk/debian jessie rpi2

# Debian repo
deb http://ftp.fr.debian.org/debian jessie main contrib non-free
deb-src http://ftp.fr.debian.org/debian jessie main contrib non-free
deb http://ftp.fr.debian.org/debian jessie-updates main contrib non-free
deb-src http://ftp.fr.debian.org/debian jessie-updates main contrib non-free
deb http://security.debian.org/debian-security jessie/updates main contrib non-free

# Debian Exp
deb http://ftp.fr.debian.org/debian experimental main contrib non-free
deb-src http://ftp.fr.debian.org/debian experimental main contrib non-free
</code>
</pre>

<p>And my /etc/apt/preferences.d/ directory:</p>

<pre>
<code>user@rpi:~# cat /etc/apt/preferences.d/collabora
Package: *
Pin: origin repositories.collabora.co.uk
Pin-Priority: 600
user@rpi:~# cat /etc/apt/preferences.d/experimental
Package: *
Pin: release a=experimental
Pin-Priority: 80
</code>
</pre>

<p>I hope it could be useful for other ...</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 176.181.253.138">


<a href="http://thibault.rouat.com/">BoN_Lth</a>


</span>

- <span class="date">Fri Apr 17 11:10:09 2015</span>
</div>



</div>
<div class="comment" id="comment-fc2baf567510c38e5bf7099822f835ae">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-fc2baf567510c38e5bf7099822f835ae">SolydX RPI2</a>

</div>

<div class="inlinecontent">
<p>I'm the founder of SolydXK. I've used your image as a base for
SolydX RPI2. I hope you don't mind.</p>

<p>You can see my post (with download link to the ISO) here:
http://forums.solydxk.com/viewtopic.php?f=53&amp;t=5457</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 84.105.92.129">


<a href="http://solydxk.com/">Schoelje</a>


</span>

- <span class="date">Fri Apr 17 16:25:11 2015</span>
</div>



</div>
<div class="comment" id="comment-632ad348394a3112a879ad86658699ed">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-632ad348394a3112a879ad86658699ed">flash</a>

</div>

<div class="inlinecontent">
<p>Hello, how to install a flash plugins with this optimized
version of Debian Jessie for Raspberry Pi2 thank you for your
answer</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 90.10.59.109">


jy


</span>

- <span class="date">Mon Apr 20 18:53:23 2015</span>
</div>



</div>
<div class="comment" id="comment-e74b8bbab2dd330763aad2b6d427fe18">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-e74b8bbab2dd330763aad2b6d427fe18">flash-kernel update</a>

</div>

<div class="inlinecontent">
<p>Append the following to /etc/flash-kernel/db to make it work
with the updated flash-kernel version:</p>

<pre>
<code>Machine: Raspberry pi 2 Model B
Machine: BCM2709
Kernel-Flavors: rpi2
Boot-Kernel-Path: /boot/firmware/kernel7.img
</code>
</pre>

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from unknown IP address">


BtbN


</span>

- <span class="date">Tue Apr 21 10:33:51 2015</span>
</div>



</div>
<div class="comment" id="comment-208ad06cf30aaf879b3ecbff8bc9f94d">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-208ad06cf30aaf879b3ecbff8bc9f94d">comment 61</a>

</div>

<div class="inlinecontent">
<h4>do not add deb-multimedia.org,</h4>
pardon my giant text but I had to do it to be heard over the last
guy. it's not safe, see what support says about it:
http://ircbots.debian.net/factoids/factoid.php?key=dmm

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 24.56.255.35">


shawn


</span>

- <span class="date">Thu Apr 23 06:55:18 2015</span>
</div>



</div>
<div class="comment" id="comment-d44a878ab811a7a63a8cea1ba83460f1">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-d44a878ab811a7a63a8cea1ba83460f1">comment 61</a>

</div>

<div class="inlinecontent">
<p>sjoerd, the version of flash-kernel in jessie overtook the
version in your repo. please bumb the version. for now I will use
apt pinning as a work around.</p>

<p>root@jessie-rpi:~# apt-cache policy flash-kernel flash-kernel:
Installed: 3.35 Candidate: 3.35 Version table: <em>*</em> 3.35 0
500 http://ftp.debian.org/debian/ jessie/main armhf Packages 100
/var/lib/dpkg/status 3.33.co1+b1 0 500
https://repositories.collabora.co.uk/debian/ jessie/rpi2 armhf
Packages</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 24.56.255.35">


shawn


</span>

- <span class="date">Thu Apr 23 07:50:09 2015</span>
</div>



</div>
<div class="comment" id="comment-78a918468263f982116fbb7626976351">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-78a918468263f982116fbb7626976351">PI Camera Module</a>

</div>

<div class="inlinecontent">
<p>I have downloaded the Debian image from
https://images.collabora.co.uk/rpi2/ and am very impressed with the
way it my webserver. On my RPI2's I also have the Raspberry Pi
camera module which work perfectly under Raspian but I do not know
what is needed or the steps to make it work under this pure Debian
environment. I would be very grateful if someone could explain the
steps required to get it working. Ultimately I want to steam video
to a web page (not using VLC) in html. Regards Chris Bussey</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 82.69.148.110">


Chris Bussey


</span>

- <span class="date">Sun Apr 26 19:32:20 2015</span>
</div>



</div>
<div class="comment" id="comment-0884eb383a484ea6ab54e2dffa0a457f">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-0884eb383a484ea6ab54e2dffa0a457f">Thanks a lot</a>

</div>

<div class="inlinecontent">
<p>small image, but include the essentials like dhcp and ssh.</p>

<p>Perfect for my needs.</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from unknown IP address">


<a href="http://marcobenecke.de/">Marco</a>


</span>

- <span class="date">Sun Apr 26 20:33:55 2015</span>
</div>



</div>
<div class="comment" id="comment-202faffe1e8fdc244f8c518fb9cc6da3">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-202faffe1e8fdc244f8c518fb9cc6da3">kudos</a>

</div>

<div class="inlinecontent">
Very nice effort, i hope to see this integrated into Debian soon.
Kudos.

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 5.199.144.223">


dutchfish


</span>

- <span class="date">Sat May  2 02:34:06 2015</span>
</div>



</div>
<div class="comment" id="comment-be32e91fd9775f0b6701af69d02c84f5">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-be32e91fd9775f0b6701af69d02c84f5"> PI Camera Module </a>

</div>

<div class="inlinecontent">
My notes say you can get the camera working (at least in some way)
by adding the line <code>start_x=1</code> to
<code>config.txt</code> (see note about location above). Then you
can load the module <code>bcm2835-v4l2</code>.

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 87.92.94.122">


<a href="http://iki.fi/xtl">XTL</a>


</span>

- <span class="date">Thu May  7 09:25:22 2015</span>
</div>



</div>
<div class="comment" id="comment-5a117a86bdb3d2fe327e42e79ca11328">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-5a117a86bdb3d2fe327e42e79ca11328">What toolchain did you use for crosscompiling the kernel?</a>

</div>

<div class="inlinecontent">
What toolchain did you use for crosscompiling the kernel?

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 70.0.131.149">


ken


</span>

- <span class="date">Mon May 11 09:49:35 2015</span>
</div>



</div>
<div class="comment" id="comment-64b33335e8d852179704fb5dc218aa1e">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-64b33335e8d852179704fb5dc218aa1e">Some adjustments</a>

</div>

<div class="inlinecontent">
<p>Hi,</p>

<p>many, many thanks for this image! I'm using it since one week
and like it very much.</p>

<p>After installing the image, I've done some changes that I like
to share with you here. Thanks to shawn for his help with this
notes.</p>

<p><strong>ENLARGE THE SECOND PARTITION ON THE SDCARD AFTER DDING
THE IMAGE</strong><br>
for example using gparted<br></p>

<p><strong>CHANGE ROOTS PASSWORD</strong><br>
'passwd'<br>
follow instructions<br></p>

<p><strong>CHANGE HOSTNAME</strong> (see also
https://wiki.debian.org/HowTo/ChangeHostname)<br>
'grep -R jessie-rpi /etc/*' check which files you need to
edit<br>
'vi /etc/hostname' edit the hostname in /etc/hostname<br>
'vi /etc/hosts' edit the hostname in /etc/hosts<br>
'dpkg-reconfigure exim4-config' reconfigure exim4<br>
'reboot' reboots the system<br></p>

<p><strong>PREVENT PACKAGE FLASH-KERNEL UPDATING FROM OFFICIAL REPO
WITH APT PINNING</strong><br>
'touch /etc/apt/preferences.d/flash-kernel' create a new file<br>
'vi /etc/apt/preferences.d/flash-kernel' edit it an add the
following lines to it:<br>
Package: flash-kernel<br>
Pin: origin repositories.collabora.co.uk<br>
Pin-Priority: 1000<br>
'apt-cache policy flash-kernel' check if the package is
pinned<br></p>

<p><strong>GENERATE NEW SSH KEYS</strong> (from
http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-4c4e1defb59a765819781eddc928fd6d)<br>

'rm /etc/ssh/ssh_host_*_key*' remove the old ones<br>
'dpkg-reconfigure openssh-server' create new ones<br></p>

<p><strong>RECONFIGURE LOCALES AND TIMEZONE</strong><br>
'dpkg-reconfigure locales'<br>
'dpkg-reconfigure tzdata'<br></p>

<p><strong>ACTIVATE ADDITIONAL REPOS</strong><br>
'vi /etc/apt/sources.list' open editor and add the following:<br>
deb http://ftp.us.debian.org/debian/ jessie contrib non-free<br>
deb http://security.debian.org/ jessie/updates main contrib
non-free<br>
deb http://ftp.us.debian.org/debian/ jessie-updates main contrib
non-free<br></p>

<p><strong>NOW YOU CAN SAFELY UPDATE THE SYSTEM</strong><br>
'apt-get update'<br>
'apt-get upgrade'<br></p>


</div>

<div class="comment-header">

Comment by

<span class="author" title="Signed in">

<a href="http://sjoerd.luon.net/ikiwiki.cgi?page=nadu&amp;do=goto">nadu</a>

</span>


- <span class="date">Sun May 17 23:31:31 2015</span>
</div>



</div>
<div class="comment" id="comment-66c58d05c38b0b6280f922aaf6cfeee7">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-66c58d05c38b0b6280f922aaf6cfeee7">Keyboard customization does not work</a>

</div>

<div class="inlinecontent">
<p>Hej Sjoerd! Great work with this jessie image.</p>

<p>I've instaled it without problem. But when I try to configure
the keyboard to my localization, it does not work.</p>

<p>I do: <code>dpkg-reconfigure keyboard-configuration</code> and
all is ok. But when I finished, there were two warnings about some
"invoke-rc deprecated mode" (or similar) and the keyboard
arrangement didn't change.</p>

<p>After this I tried <code>service keyboard-setup start</code> but
nothing happens: I get stucked in English keyboard, and it is a
mess to keep track of many symbols.</p>

<p>What can I do!? TIA</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 87.221.176.61">


<a href="https://esquelario.tk/">Shevek</a>


</span>

- <span class="date">Wed May 20 00:17:51 2015</span>
</div>



</div>
<div class="comment" id="comment-1c574213be709b085a735c5671ba6bb2">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-1c574213be709b085a735c5671ba6bb2">Some adjustments - additional information</a>

</div>

<div class="inlinecontent">
To everybody asking me how to use vi: you can use another editor
like nano as well. It should be preinstalled. If not, run 'apt-get
install nano'.

</div>

<div class="comment-header">

Comment by

<span class="author" title="Signed in">

<a href="http://sjoerd.luon.net/ikiwiki.cgi?page=nadu&amp;do=goto">nadu</a>

</span>


- <span class="date">Wed May 20 10:01:03 2015</span>
</div>



</div>
<div class="comment" id="comment-69bc07b18da765de13f29f63aedd07b9">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-69bc07b18da765de13f29f63aedd07b9">Hangs after some hours</a>

</div>

<div class="inlinecontent">
<p>Hi</p>

<p>I tested the image in various ways (I mean various burn image
&amp; boot) and it hangs after some time up (some hours). For the
symptomps seems more a software lock than a hardware issue, as in
all cases I'm able to ping the Pi and even TCP-connect via SSH (but
not getting prompt), even serial console don't show me the login
prompt.</p>

<p>On my first install, I upgraded packages and reconfigured some
settings so I supossed I made some mistake/error (as the settings
were from wheezy/sysvinit) which made the system unable to work as
expected.</p>

<p>But on my second try, I simply wrote the image to the SD and
booted the pi2, leaving it up for some hours, so no
changes/upgrades of flash-kernel done on the image, nothing no
changes.</p>

<p>I left some sessions logged (via serial and via SSH) and wait to
things happen.</p>

<p>After some hours I found that the load is starting to increase
(3, 5, 7 and up to 10 when finnally got fully unresponsive). During
that I tried to check for top/dmesg output but that commands hang
simply sitting down there, although other commands (free, ps, ..)
work. (ps doens't show any process eating too much CPU).</p>

<p>As I still had access (when load was below 10), I preferred to
reboot and start again to monitor the issue, but voila:</p>

<p>root@tessa:~# reboot</p>

<p>Failed to start reboot.target: Connection timed out</p>

<p>Broadcast message from root@tessa on pts/1 (Thu 2015-05-21
08:27:49 UTC):</p>

<p>The system is going down for reboot NOW!</p>

<p>root@tessa:/var/log# uptime 08:51:47 up 11:39, 1 user, load
average: 10.00, 10.02, 9.46</p>

<p>May be new systemd feature ??</p>

<p>Is very strange, as no one reported issues here, but I'm sure is
not a Hardware issue as the same image worked correctly using
raspbian Wheezy.</p>

<p>Any clues or any one having similar issues ?</p>

<p>Thanks</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 88.87.203.130">


Marc


</span>

- <span class="date">Mon May 25 12:27:22 2015</span>
</div>



</div>
<div class="comment" id="comment-be2b299990e05058b94331d539511636">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-be2b299990e05058b94331d539511636">flash-kernel</a>

</div>

<div class="inlinecontent">
<p>Hi, thanks for this great tutorial and image, it all works
perfectly for me. With one exception: After I <code>apt-get install
xfce4</code>, I got</p>

<pre>
<code>Processing triggers for initramfs-tools (0.120) ...
update-initramfs: Generating /boot/initrd.img-3.18.0-trunk-rpi2
Unsupported platform.
run-parts: /etc/initramfs/post-update.d//flash-kernel exited with return code 1
dpkg: error processing package initramfs-tools (--configure):
 subprocess installed post-installation script returned error exit status 1
Errors were encountered while processing:
 initramfs-tools
E: Sub-process /usr/bin/dpkg returned an error code (1)
</code>
</pre>

<p>I used the method suggested by BoN_Lth, which is manually
copying <code>/boot/vmlinuz-3.18.0-trunk-rpi2</code> to
<code>/boot/firmware/kernel7.img</code>.</p>

<p>I've got <code>flash-kernel</code> pinned at the Collabora
repository and its current version is <code>3.35.co1+b1</code>.</p>

<p>Any way to fix this? Is copying the kernel to
<code>/boot/firmware/kernel7.img</code> all that the
<code>flash-kernel</code> package does?</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 37.72.208.250">


Michael Franzl


</span>

- <span class="date">Wed May 27 19:09:20 2015</span>
</div>



</div>
<div class="comment" id="comment-6b6b803426770cfde3faa7bbf531f6d9">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-6b6b803426770cfde3faa7bbf531f6d9">comment 76</a>

</div>

<div class="inlinecontent">
<p>Seems the GPG keys for the collabora repository have expired
(from apt-get update)</p>

<p>Reading package lists... Done W: An error occurred during the
signature verification. The repository is not updated and the
previous index files will be used. GPG error:
https://repositories.collabora.co.uk jessie InRelease: The
following signatures were invalid: KEYEXPIRED 1433150817 KEYEXPIRED
1433150817 KEYEXPIRED 1401577200 KEYEXPIRED 1433150817 KEYEXPIRED
1433150817 KEYEXPIRED 1433150817 KEYEXPIRED 1433150817 KEYEXPIRED
1401577200 KEYEXPIRED 1433150817</p>

<p>W: Failed to fetch
https://repositories.collabora.co.uk/debian/dists/jessie/InRelease</p>

<p>W: Some index files failed to download. They have been ignored,
or old ones used instead.</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 46.18.104.161">


Anonymous


</span>

- <span class="date">Wed Jun  3 15:40:00 2015</span>
</div>



</div>
<div class="comment" id="comment-4c772b23b61495bf372a8e37c8d95409">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-4c772b23b61495bf372a8e37c8d95409">collabora key error</a>

</div>

<div class="inlinecontent">
An error occurred during the signature verification. The repository
is not updated and the previous index files will be used. GPG
error: https://repositories.collabora.co.uk jessie InRelease: The
following signatures were invalid: KEYEXPIRED 1433150817 KEYEXPIRED
1433150817 KEYEXPIRED 1401577200 KEYEXPIRED 1433150817 KEYEXPIRED
1433150817 KEYEXPIRED 1433150817 KEYEXPIRED 1433150817 KEYEXPIRED
1401577200 KEYEXPIRED 1433150817

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 83.165.129.38">


Debianita


</span>

- <span class="date">Fri Jun  5 23:43:02 2015</span>
</div>



</div>
<div class="comment" id="comment-114f474f6b841c8801f587c81f4a6772">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-114f474f6b841c8801f587c81f4a6772">Repositories on https://repositories.collabora.co.uk/debian/ not working</a>

</div>

<div class="inlinecontent">
<p>Hello,</p>

<p>First I must say, very good job. I've had no problems at all
with that image on my new RPI2. All things I need for my project
are working as expected. Thanks a lot for that.</p>

<p>I just want to update the PI with apt-get update ... It says ERR
https://repositories.collabora.co.uk/debian/</p>

<p>And at the end:</p>

<p>W: An error occurred during the signature verification. The
repository is not updated and the previous index files will be
used. GPG error: https://repositories.collabora.co.uk jessie
InRelease: The following signatures were invalid: KEYEXPIRED
1433150817 KEYEXPIRED 1433150817 KEYEXPIRED 1401577200 KEYEXPIRED
1433150817 KEYEXPIRED 1433150817 KEYEXPIRED 1433150817 KEYEXPIRED
1433150817 KEYEXPIRED 1401577200 KEYEXPIRED 1433150817</p>

<p>May be something wrong with the keyring?</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 109.90.232.31">


bats4u


</span>

- <span class="date">Sat Jun  6 12:43:05 2015</span>
</div>



</div>
<div class="comment" id="comment-383243db3e017ea3d796fc4938ed9a96">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-383243db3e017ea3d796fc4938ed9a96">uspip</a>

</div>

<div class="inlinecontent">
<p>Hi !</p>

<p>Would it be possible to enable usbip in your kernel build ?</p>

<p>karl@fernseher-rpi:~$ zcat /proc/config.gz |grep USBIP</p>
<h4>CONFIG_USBIP_CORE is not set</h4>
<p>I would really need that to share a printer. Thanks, Karl</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 88.117.13.185">


Karl


</span>

- <span class="date">Mon Jun  8 00:31:01 2015</span>
</div>



</div>
<div class="comment" id="comment-7c1c78caa6546bd5418605b8d764c25c">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-7c1c78caa6546bd5418605b8d764c25c">Collabora gpg key expired beginning of June</a>

</div>

<div class="inlinecontent">
<p>I had plenty of KEYEXPIRED errors during apt-get update. I found
out that the Collabora key for apt expired.</p>

<pre>
<code>$ apt-key list
/etc/apt/trusted.gpg.d/collabora-obs-archive-keyring.gpg
--------------------------------------------------------
pub   2048R/B5FBB289 2013-05-09 [expired: 2015-06-01]
uid                  Collabora OBS Automatic Signing Key &lt;example@example.com>
</code>
</pre>

<p>I'm pretty bad when it comes to apt and security, I failed
miserably with <code>gpg</code> and <code>apt-key</code> usual
commands. In the end, I downloaded and installed manually the
latest keyring package from Collabora. It may not be the right way
to do it, but it works like a charm now.</p>

<pre>
<code>$ wget https://repositories.collabora.co.uk/debian/pool/rpi2/c/collabora-obs-archive-keyring/collabora-obs-archive-keyring_0.5+b1_all.deb
$ dpkg -i collabora-obs-archive-keyring_0.5+b1_all.deb
$ apt-get update
</code>
</pre>

<p>Hope this helps <img src="DebianJessieOnRpi2_files/smile4.png" alt=";)"></p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 81.65.226.224">


elboulangero


</span>

- <span class="date">Mon Jun  8 18:58:25 2015</span>
</div>



</div>
<div class="comment" id="comment-0b356fe9072a3da0b63652adad633f53">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-0b356fe9072a3da0b63652adad633f53">8.1 Update</a>

</div>

<div class="inlinecontent">
<p>Just wanted to report this is still working after updating to
8.1 (with flash-kernel pinned as above).</p>

<p>Only issue is the apt key for your repo has expired (and is
registered to an @example.com email address!)... Could these be
updated/signed properly please?</p>

<p>Thanks</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 77.99.12.169">


ScHiZniK


</span>

- <span class="date">Mon Jun  8 20:02:30 2015</span>
</div>



</div>
<div class="comment" id="comment-0a1ff7530741be003b4db0ed22fdc8a4">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-0a1ff7530741be003b4db0ed22fdc8a4">comment 76</a>

</div>

<div class="inlinecontent">
<p>Sadly running 'apt-get update' now results in:</p>

<p>KEYEXPIRED 1433150817</p>

<p>Any chance you could take a look at this on the repo?</p>

<p>Thanks!</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 104.238.169.145">


chrisaw


</span>

- <span class="date">Wed Jun 10 23:49:03 2015</span>
</div>



</div>
<div class="comment" id="comment-466d4e095dd717570e83f8cea61aa1ce">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-466d4e095dd717570e83f8cea61aa1ce">Fixed my earlier issue</a>

</div>

<div class="inlinecontent">
<p>Turns out the resolution for the key issue I posted above
is:</p>

<p>wget
https://repositories.collabora.co.uk/debian/pool/rpi2/c/collabora-obs-archive-keyring/collabora-obs-archive-keyring_0.5+b1_all.deb
dpkg
 -i collabora-obs-archive-keyring_0.5+b1_all.deb</p>

<p>Issue resolved - woop!</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 104.238.169.145">


chrisaw


</span>

- <span class="date">Wed Jun 10 23:55:48 2015</span>
</div>



</div>
<div class="comment" id="comment-48f0102f7ee4d77554b685fb1fa42b6a">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-48f0102f7ee4d77554b685fb1fa42b6a">Flash-kernel version in the repository is outdated</a>

</div>

<div class="inlinecontent">
<p>There is a mismatch in the repository about the version of
flash-kernel (at least). The one actually present is much more
recent that the one advertised in the list.</p>

<p>Hope it helps.</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 158.169.40.9">


jwarnier


</span>

- <span class="date">Wed Jun 17 10:46:36 2015</span>
</div>



</div>
<div class="comment" id="comment-a303db82a89da3d175e89ff2489cf1df">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-a303db82a89da3d175e89ff2489cf1df">Warning in apt-update</a>

</div>

<div class="inlinecontent">
<p>Seems there is a problem in one of the default sources:</p>

<p>Reading package lists... Done W: An error occurred during the
signature verification. The repository is not updated and the
previous index files will be used. GPG error:
https://repositories.collabora.co.uk jessie InRelease: The
following signatures were invalid: KEYEXPIRED 1433150817 KEYEXPIRED
1433150817 KEYEXPIRED 1401577200 KEYEXPIRED 1433150817 KEYEXPIRED
1433150817 KEYEXPIRED 1433150817 KEYEXPIRED 1433150817 KEYEXPIRED
1401577200 KEYEXPIRED 1433150817</p>

<p>W: Failed to fetch
https://repositories.collabora.co.uk/debian/dists/jessie/InRelease</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 86.111.139.161">


Pedro


</span>

- <span class="date">Thu Jun 18 00:31:14 2015</span>
</div>



</div>
<div class="comment" id="comment-acf34029b46c1d75eb1aa5c0a1efd91d">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-acf34029b46c1d75eb1aa5c0a1efd91d">Warning in apt-update</a>

</div>

<div class="inlinecontent">
<p>Seems there is a problem in one of the default sources:</p>

<p>Reading package lists... Done W: An error occurred during the
signature verification. The repository is not updated and the
previous index files will be used. GPG error:
https://repositories.collabora.co.uk jessie InRelease: The
following signatures were invalid: KEYEXPIRED 1433150817 KEYEXPIRED
1433150817 KEYEXPIRED 1401577200 KEYEXPIRED 1433150817 KEYEXPIRED
1433150817 KEYEXPIRED 1433150817 KEYEXPIRED 1433150817 KEYEXPIRED
1401577200 KEYEXPIRED 1433150817</p>

<p>W: Failed to fetch
https://repositories.collabora.co.uk/debian/dists/jessie/InRelease</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 86.111.139.161">


Pedro


</span>

- <span class="date">Thu Jun 18 00:31:38 2015</span>
</div>



</div>
<div class="comment" id="comment-52618781d246aa3ed87c5af7bfad3835">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-52618781d246aa3ed87c5af7bfad3835">InRelease gpg signatures expired/invalid</a>

</div>

<div class="inlinecontent">
<p>Hi,</p>

<p>doing an apt-update it complains about invalid signatures and
expired keys:</p>

<pre>
<code>W: An error occurred during the signature verification. 
The repository is not updated and the previous index files will be used. 
GPG error: https://repositories.collabora.co.uk jessie InRelease: 
The following signatures were invalid: KEYEXPIRED 1433150817 KEYEXPIRED 1433150817 
KEYEXPIRED 1401577200 KEYEXPIRED 1433150817 KEYEXPIRED 1433150817 KEYEXPIRED 1433150817 
KEYEXPIRED 1433150817 KEYEXPIRED 1401577200 KEYEXPIRED 1433150817
</code>
</pre>

<p>I tried to get new keys but I do not know where to get them.
Using 'apt-key net-update' didn't work. I have the impression that
those keys turned invalid only few days before...</p>

<p>Could you please help me to get valid keys for:
repositories.collabora.co.uk jessie InRelease</p>

<p>Thanks in advance, Foka</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from unknown IP address">


Foka


</span>

- <span class="date">Sun Jun 21 11:29:39 2015</span>
</div>



</div>
<div class="comment" id="comment-4797414cb0077cc34a69ad3b59b21da8">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-4797414cb0077cc34a69ad3b59b21da8">Updating glitch</a>

</div>

<div class="inlinecontent">
<p>I've been using the image and updating it without issue since
February. Recently on running apt-get update I've been getting an
error with the repository as follows:</p>
<hr>
<p>Hit http://ftp.debian.org jessie InRelease<br>
Hit http://ftp.debian.org jessie/main armhf Packages Hit
http://ftp.debian.org jessie/main Translation-en Get:1
https://repositories.collabora.co.uk jessie InRelease Get:2
https://repositories.collabora.co.uk jessie InRelease [2,707 B] Err
https://repositories.collabora.co.uk jessie InRelease</p>

<p>Fetched 2,707 B in 19s (140 B/s)<br>
Reading package lists... Done W: An error occurred during the
signature verification. The repository is not updated and the
previous index files will be used. GPG error:
https://repositories.collabora.co.uk jessie InRelease: The
following signatures were invalid: KEYEXPIRED 1433150817 KEYEXPIRED
1433150817 KEYEXPIRED 1401577200 KEYEXPIRED 1433150817 KEYEXPIRED
1433150817 KEYEXPIRED 1433150817 KEYEXPIRED 1433150817 KEYEXPIRED
1401577200 KEYEXPIRED 1433150817</p>

<p>W: Failed to fetch
https://repositories.collabora.co.uk/debian/dists/jessie/InRelease</p>

<p>W: Some index files failed to download. They have been ignored,
or old ones used instead.</p>
<hr>
<p>Any assistance would be appreciated.</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 107.181.128.55">


Anonymous


</span>

- <span class="date">Sun Jun 28 02:33:24 2015</span>
</div>



</div>
<div class="comment" id="comment-0badb0cae570a4c46d8a5c0701bcde05">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-0badb0cae570a4c46d8a5c0701bcde05">The Collabora GPG Key Expired June 1, 2015</a>

</div>

<div class="inlinecontent">
How do we get a new key for apt-get? The current key expired.
Thanks.

</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 75.85.188.196">


Andrew Lentvorski


</span>

- <span class="date">Thu Jul  2 03:23:34 2015</span>
</div>



</div>
<div class="comment" id="comment-b6ebf143784aa666325a4ce5b7dbeb1e">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-b6ebf143784aa666325a4ce5b7dbeb1e">Best RPI2 Distro</a>

</div>

<div class="inlinecontent">
<p>I was looking for a good linux distro to use my RPI2 as a
server, but all the other ones are bloated, or don't have good
sources. All I had to do was use rufus to burn this to my MicroSD
card, pop it in to my RPI2, and SSH into it. I changed the sources
to the standard jessie list, ran apt-get update, then upgrade, now
I have a surprisingly fast, cheap, mini server. ProFTPd-basic is
super fast and awesome. Nginx and php5-fpm run flawlessly. And I
can use it as an RTMP server too. So much value for the $. Thanks
for the distro.</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from unknown IP address">


<a href="http://stardust342.tk/">Stardust342</a>


</span>

- <span class="date">Thu Jul  2 21:11:06 2015</span>
</div>



</div>
<div class="comment" id="comment-48cc6f56b5a366b3f033302722b8d1d6">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-48cc6f56b5a366b3f033302722b8d1d6">SPI</a>

</div>

<div class="inlinecontent">
<p>Hi, Thx your very much for your work, it is very quit and simple
to install (bmaptools is really fast)</p>

<p>Still, i have a little problem. I need raspi-config, in order to
activate SPI, and to connect a 4DS 32 LCD screen.</p>

<p>Where can i find this tool ? is there a new way to configure
this raspbian ? Thx</p>


</div>

<div class="comment-header">


Comment by

<span class="author" title="Unauthenticated, from 193.50.159.53">


<a href="http://bec3.com/">CHERRIER Sylvain</a>


</span>

- <span class="date">Mon Jul  6 16:46:38 2015</span>
</div>



</div>
<div class="comment" id="comment-370e601217850e5537f30af25717e87a">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-370e601217850e5537f30af25717e87a">"trusted=yes" set on repository</a>

</div>

<div class="inlinecontent">
I've just installed my second RPI2 with current image
jessie-rpi2-20150705.img.gz on the weekend. I saw that
"trusted=yes" is set on Sjoerd's repository in
/etc/apt/sources.list. I strongly recommend to remove this setting.
I've already emailed Sjoerd about this. He will generate a fresh
image. Thank you in adavance <img src="DebianJessieOnRpi2_files/smile4.png" alt=";)">

</div>

<div class="comment-header">

Comment by

<span class="author" title="Signed in">

<a href="http://sjoerd.luon.net/ikiwiki.cgi?page=nadu&amp;do=goto">nadu</a>

</span>


- <span class="date">Mon Jul 13 12:56:41 2015</span>
</div>



</div>
<div class="comment" id="comment-3f3a27e2100c99ea34a95f3ba58ad7aa">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-3f3a27e2100c99ea34a95f3ba58ad7aa">Hangs after some hours - comments on Marc's post from Mon May 25 12:27:22 2015</a>

</div>

<div class="inlinecontent">
I just ran into the same issue. The image is using
systemd-timesyncd for time synchronization. Yet, I couldn't find
out what's causing the problem, as systemd-timesyncd is running and
seems to be confgured properly.

</div>

<div class="comment-header">

Comment by

<span class="author" title="Signed in">

<a href="http://sjoerd.luon.net/ikiwiki.cgi?page=nadu&amp;do=goto">nadu</a>

</span>


- <span class="date">Sat Nov  7 13:15:53 2015</span>
</div>



</div>
<div class="comment" id="comment-895c8f332395aba413d609c0894cc370">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-895c8f332395aba413d609c0894cc370">Raspbian Jessie Lite - Minimal image based on Debian Jessie</a>

</div>

<div class="inlinecontent">
<p>Hi,</p>

<p>Raspbian Jessie Lite - the Minimal image based on Debian Jessie
on official RPi site (
https://www.raspberrypi.org/downloads/raspbian/ ) looks like our
image here.</p>

<p>Did anyone compare the official image and the one of this site?
Sjoerd what do you think?</p>

<p>Regards, Murat TA1DB</p>


</div>

<div class="comment-header">

Comment by

<span class="author" title="Signed in">

<a href="http://sjoerd.luon.net/ikiwiki.cgi?page=TA1DB&amp;do=goto">TA1DB</a>

</span>


- <span class="date">Mon Nov 30 11:28:42 2015</span>
</div>



</div>
<div class="comment" id="comment-b96d8c6f6b5f81a46d409107c0e6ed1a">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-b96d8c6f6b5f81a46d409107c0e6ed1a">Great work!</a>

</div>

<div class="inlinecontent">
<p>Thanks a lot for providing this really nice guide, I was able to
use my pi2 with jessie in no time.</p>

<p>A few additions:</p>

<p>To get rid of systemd, this link provides all the details:
<a href="http://without-systemd.org/wiki/index.php/How_to_remove_systemd_from_a_Debian_jessie/sid_installation">
http://without-systemd.org/wiki/index.php/How_to_remove_systemd_from_a_Debian_jessie/sid_installation</a></p>

<p>Basically all you need to do is to put the usual network stuff
to /etc/network/interfaces and then</p>

<pre>
<code>apt-get install sysvinit-core sysvinit-utils
cp /usr/share/sysvinit/inittab /etc/inittab
reboot
apt-get remove --purge --auto-remove systemd
echo -e 'Package: systemd\nPin: release *\nPin-Priority: -1' > /etc/apt/preferences.d/systemd
</code>
</pre>

<p>To get system time right:</p>

<pre>
<code>dpkg-reconfigure tzdata
apt-get install ntp
</code>
</pre>

<p>I also added max_usb_current=1 to /boot/firmware/config.txt, so
the PI gives enough power to an external USB Hard Drive.</p>


</div>

<div class="comment-header">

Comment by

<span class="author" title="Signed in">

<a href="http://sjoerd.luon.net/ikiwiki.cgi?page=Tim&amp;do=goto">Tim</a>

</span>


- <span class="date">Fri Jan 15 22:35:48 2016</span>
</div>



</div>
<div class="comment" id="comment-fa5d9e6750fb7cc85bd9947b6732beae">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-fa5d9e6750fb7cc85bd9947b6732beae">Great work!</a>

</div>

<div class="inlinecontent">
<p>Thanks a lot for providing this really nice guide, I was able to
use my pi2 with jessie in no time.</p>

<p>A few additions:</p>

<p>To get rid of systemd, this link provides all the details:
<a href="http://without-systemd.org/wiki/index.php/How_to_remove_systemd_from_a_Debian_jessie/sid_installation">
http://without-systemd.org/wiki/index.php/How_to_remove_systemd_from_a_Debian_jessie/sid_installation</a></p>

<p>Basically all you need to do is to put the usual network stuff
to /etc/network/interfaces and then</p>

<pre>
<code>apt-get install sysvinit-core sysvinit-utils
cp /usr/share/sysvinit/inittab /etc/inittab
reboot
apt-get remove --purge --auto-remove systemd
echo -e 'Package: systemd\nPin: release *\nPin-Priority: -1' > /etc/apt/preferences.d/systemd
</code>
</pre>

<p>To get system time right:</p>

<pre>
<code>dpkg-reconfigure tzdata
apt-get install ntp
</code>
</pre>

<p>I also added max_usb_current=1 to /boot/firmware/config.txt, so
the PI gives enough power to an external USB Hard Drive.</p>


</div>

<div class="comment-header">

Comment by

<span class="author" title="Signed in">

<a href="http://sjoerd.luon.net/ikiwiki.cgi?page=Tim&amp;do=goto">Tim</a>

</span>


- <span class="date">Fri Jan 15 22:36:41 2016</span>
</div>



</div>
<div class="comment" id="comment-db5fec044bc9a512d2af6a7a15f41eb0">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-db5fec044bc9a512d2af6a7a15f41eb0">[solved] Hangs after some hours</a>

</div>

<div class="inlinecontent">
I solved the "time sync problem" a few weeks ago: It has been a
hardware issue for me. I thought it had to be a timesync issue
because my Pi was pingable but not reacting to https and ssh
anymore (http wasn't active). As I posted before, systemd-timesync
was configured properly. When I tried getting help on IRC, someone
suggested to check hardware related stuff. He was right <img src="http://sjoerd.luon.net/smileys/smile.png" alt=":)">

</div>

<div class="comment-header">

Comment by

<span class="author" title="Signed in">

<a href="http://sjoerd.luon.net/ikiwiki.cgi?page=nadu&amp;do=goto">nadu</a>

</span>


- <span class="date">Mon Mar 14 20:51:05 2016</span>
</div>



</div>
<div class="comment" id="comment-d7d7a1834e3802bcbf23df4cbe96d9d3">

<div class="comment-subject">

<a href="http://sjoerd.luon.net/posts/2015/02/debian-jessie-on-rpi2/#comment-d7d7a1834e3802bcbf23df4cbe96d9d3">debian-jessie-on-rpi 3</a>

</div>

<div class="inlinecontent">
I appreciate to hear comments and/or test results if anybody
already tested or plan to use this excellent debootstrap on the new
RPi 3. Does it work good as it does on RPi 2? What differs?

</div>

<div class="comment-header">

Comment by

<span class="author" title="Signed in">

<a href="http://sjoerd.luon.net/ikiwiki.cgi?page=TA1DB&amp;do=goto">TA1DB</a>

</span>


- <span class="date">Wed May  4 12:36:49 2016</span>
</div>



</div>




<div class="addcomment">
<a href="http://sjoerd.luon.net/ikiwiki.cgi?page=posts%2F2015%2F02%2Fdebian-jessie-on-rpi2&amp;do=comment">Add a comment</a>
</div>

</div>



</div>

<div id="footer" class="pagefooter">

<div id="pageinfo">


<div class="tags">
Tags:

<a href="http://sjoerd.luon.net/tags/collabora/" rel="tag">collabora</a>

<a href="http://sjoerd.luon.net/tags/tech/" rel="tag">tech</a>

</div>





<div class="pagecopyright">
<a name="pagecopyright"></a>
Copyright  2015 Sjoerd Simons
</div>




<div class="pagedate">
Last edited <span class="date">Sun Jul  5 20:06:05 2015</span>
<!-- Created <span class="date">Tue Feb  3 10:47:08 2015</span> -->
</div>

</div>


<!-- from Misc and other -->
</div>

</div>

<a name="DevuanAndSlackWareArm"></a><h3>Devuan And SlackWare Arm</h3>
<OL>
  <LI>Finally, we are able to emualting Rpi 4.4.* via Qemu.

<PRE>
$ diff Rpi2-qemu-2016-05-27.sh Rpi2-qemu.sh
5,6c5,6
<      -no-reboot -serial stdio \
<       -drive "file=2016-05-27-raspbian-jessie.img,format=raw"
---
>       -serial stdio \
>       -drive "file=solydxrpi_201606.img,index=0,media=disk,format=raw"
</PRE>

<P> As far as I could recall, I changed the string "file=solydxrpi_201606.img" to 
    "file=2016-05-27-raspbian-jessie.img", we can successfully boot Rpi2 4.4.X.  
    However, not native Rpi2, we simulate it as rpi (-M versatilepb -cpu arm1176).

<P> Don't forget to uncomment the only line in /etc/ld.so.preload.  Otherwise, 
    kernel panic.

  <LI><a href="http://gnuinos.org/raspberry/" target="_b">unofficial devuan
      rpi2 image</a>
  <LI><a href="https://files.devuan.org/devuan_jessie_beta/"
	 target="_b">devuan jessie beta raspi2</a>
  <LI><a href="https://git.devuan.org/devuan/arm-sdk"
	 target="_b">devuan arm-sdk</a>
  <LI><a href="https://github.com/raspberrypi/firmware"
	 target="_b">raspberrypi/firmware</a>
  <LI><a href="https://solydxk.com/downloads/solydx-rpi/"
	 target="_b">SolydX RPI Download</a>
  <LI><a href="http://downloads.raspberrypi.org/raspbian/images/"
	 target="_b">http://downloads.raspberrypi.org/raspbian/images/</a>
  <LI><a href="https://github.com/dhruvvyas90/qemu-rpi-kernel"
	 target="_b">qemu-rpi-kernel</a>
  <LI><a href=""
	 target="_b"></a>
  <LI><a href=""
	 target="_b"></a>
</OL>

<PRE>
$ cat /tmp/devuan-rpi/Rpi2-devuan.sh
#! /bin/bash 

qemu-system-arm -M raspi2 -m size=512 -kernel devuan-boot/kernel7.img \
     -sd devuan_jessie_1.0.0-beta_armhf_raspi2.img \
     -append "rw earlyprintk loglevel=8 console=ttyAMA0,115200 dwc_otg.lpm_enable=0 root=/dev/mmcblk0p2" \
     -dtb devuan-boot/bcm2709-rpi-2-b.dtb -serial stdio
</PRE>

<P> By default, devuan rpi2 failed to boot:

<PRE>
[    7.498620] sdhost-bcm2835 3f202000.sdhost: no support for card's volts
[    7.499638] mmc0: error -22 whilst initialising SDIO card
[    7.503127] sdhost-bcm2835 3f202000.sdhost: no support for card's volts
[    7.504709] mmc0: error -22 whilst initialising MMC card
</PRE>

<P> Fixes:  

<PRE>
  $ cd devuan-boot;
  $ mv bcm2709-rpi-2-b.dtb bcm2709-rpi-2-b.dtb-4.1.21
  # In another xterm
  $ cp 2016-03-18-raspbian-boot/bcm2709-rpi-2-b.dtb /tmp/devuan-rpi/devuan-boot/bcm2709-rpi-2-b.dtb-4.1.19 
  # In fact, I stole this dtb file from bcm2709-rpi-2-b.dtb-2015-11-21.  The original 
  # 2016-03-18-raspbian-boot/bcm2709-rpi-2-b.dtb.orig also failed to boot rpi2.
  $ ln -s bcm2709-rpi-2-b.dtb-4.1.19 bcm2709-rpi-2-b.dtb; cd ..
</PRE>

<P>

<OL>
  <LI> username: root
  <LI> password: toor
</OL>

<P> During System booting: hang at: [ ok ] Starting slim: slim.

<OL>
  <LI><a href="https://xathrya.id/2015/12/09/installing-slackware-arm-on-qemu/" 
      target="_b">Installing Slackware ARM on QEMU</a>
  <LI><a href="ftp://ftp.arm.slackware.com/slackwarearm/slackwarearm-14.2/INSTALL_QEMU.TXT" 
      target="_b">How to install Slackware ARM inside QEMU</a>
  <LI><a href="https://github.com/gamaral/rpi-buildroot/blob/rpi/README.md" 
      target="_b">Buildroot for Raspberry Pi</a>
  <LI><a href="http://elinux.org/RPi_Distributions#Slackware_ARM" 
      target="_b">Slackware ARM</a>
  <LI><a href="http://rpi2.fatdog.eu/index.php?p=downloads" 
	 target="_b">Slackware RaspberryPi2 - Downloads</a>&nbsp;&nbsp;
      <a href="http://rpi2.fatdog.eu/index.php?p=installer" 
      target="_b">Slackware RaspberryPi2 - Installation Guide</a>
  <LI><a href="" 
      target="_b"></a>
  <LI><a href="" 
      target="_b"></a>
</OL>

<P>
    <OL>
        <LI>Qemu emulating slackware rpi2
    </OL>
</P>

<a name="qemu-rpi-kernel"></a><h3>Welcome to the qemu-rpi-kernel wiki!  
<a href="https://github.com/dhruvvyas90/qemu-rpi-kernel/wiki">(Source Origin)</a></h3>

<p>Emulation is a necessary aspect of embedded system development and 
QEMU is the right open source tool to do so for linux based SBCs.</p>

<p>To emulate RPi on QEMU, you will need these two files. </p>

<ul>
<li>RPi kernel,</li>
<li>RPi rootfs (which would be a second portion of official .img file).</li>
</ul>

<p>If you want to emulate newer jessie images with 4.1.x kernel from this repo, you should prepare your image as per given on this <a href="#Emulating4.x.xxKernel">Emulating-Jessie-image-with-4.x.xx-kernel</a>.</p>

<h4>
<a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"></a>Installation</h4>

<ul>
<li>
<p>Ubuntu (generally, any OS based on Debian):</p>

<div class="highlight highlight-source-shell"><pre>sudo apt-get install qemu</pre></div>
</li>
<li>
<p>OS X:</p>

<div class="highlight highlight-source-shell"><pre>brew install qemu</pre></div>
</li>
<li>
<p>Windows:</p>

<p>Grab the latest QEMU from <a href="http://wiki.qemu.org/Download">official Download page</a>.</p>
</li>
</ul>

<h4>
<a id="user-content-emulating" class="anchor" href="#emulating" aria-hidden="true"></a>Emulating</h4>

<p>Once QEMU is installed and you have necessary files for emulation as mentioned above, follow the following steps to emulate RPi.</p>

<ol>
<li>
<p>Run:</p>

<pre><code>qemu-system-arm -kernel kernel-qemu \
                -cpu arm1176 \
                -m 256 \
                -M versatilepb \
                -no-reboot \
                -serial stdio \
                -append "root=/dev/sda2 panic=1 rootfstype=ext4 rw init=/bin/bash" \
                -hda image-file-name.img
</code></pre>

<p>You should get <code>#</code> prompt (bash) at the end of processing.</p>
</li>
<li>
<p>Edit <code>/etc/ld.so.preload</code> by commenting (with # symbol) the 1st line, e.g.:</p>

<pre><code># /usr/lib/arm-linux-gnueabihf/libcofi_rpi.so
#
# ... rest of the file
</code></pre>
</li>
<li>
<p>Edit <code>/etc/udev/rules.d/90-qemu.rules</code> by adding the following lines:</p>

<pre><code>KERNEL=="sda", SYMLINK+="mmcblk0"
KERNEL=="sda?", SYMLINK+="mmcblk0p%n"
KERNEL=="sda2", SYMLINK+="root"
</code></pre>
</li>
<li>
<p>Run:</p>

<pre><code>sudo poweroff
</code></pre>
</li>
<li>
<p>Re-emulate by running: </p>

<pre><code>qemu-system-arm -kernel kernel-qemu \
                -cpu arm1176 \
                -m 256 \
                -M versatilepb \
                -serial stdio \
                -append "root=/dev/sda2 panic=1 rootfstype=ext4 rw"
                -drive "file=image-file-name.img,index=0,media=disk,format=raw"
</code></pre>
</li>
</ol>

<h4>
<a id="user-content-key-notes" class="anchor" href="#key-notes" aria-hidden="true"></a>Key notes</h4>

<ol>
<li>You can have maximum ram upto 256 only as there's a bug in versatilepb which doesn't allow to emulate more than 256 MB.</li>
<li>You might want to set up ssh by adding this extra flag while using QEMU:</li>
</ol>

<pre><code>-redir tcp:2222::22
</code></pre>

<p>Hope it helps.</p>

<a name="Emulating4.x.xxKernel"></a>  <h3>Emulating Jessie image with 4.x.xx kernel 
<a href="https://github.com/dhruvvyas90/qemu-rpi-kernel/wiki/Emulating-Jessie-image-with-4.x.xx-kernel">(Source Origin)</a></h3>
      <div class="gh-header-meta">
        Dhruv Vyas edited this page <relative-time title="Jun 7, 2016, 11:02 PM GMT+8" datetime="2016-06-07T15:02:07Z">on Jun 7</relative-time>
        
        <a href="https://github.com/dhruvvyas90/qemu-rpi-kernel/wiki/Emulating-Jessie-image-with-4.x.xx-kernel/_history" class="history">
          1 revision
        </a>

  <div id="wiki-body" class="wiki-body gollum-markdown-content instapaper_body">
      <div class="markdown-body">
        <p>To emulate Jessie image with 4.x.xx kernel in this repo, 
steps differ slightly compared to a lot of (and standard) wheezy 
emulating guides on the internet.</p>

<p>In order to prepare your image for the first time, you will need a 
Linux box (or any other OS that can mount an ext4 file from a <code>.img</code> file).</p>

<p>I'm assuming that you have:</p>

<ol>
<li>Latest jessie image</li>
<li>4.x.xx qemu-kernel for versatilepb.</li>
</ol>

<p><strong>Steps:</strong></p>

<ol>
<li>
<code>fdisk -l &lt;image-file&gt;</code>. It should show output like this one :</li>
</ol>

<pre><code>Disk 2015-11-21-raspbian-jessie.img: 3.7 GiB, 3934257152 bytes, 7684096 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0xea0e7380

Device                          Boot  Start     End Sectors  Size Id Type
2015-11-21-raspbian-jessie.img1        8192  131071  122880   60M  c W95 FAT32 (LBA)
2015-11-21-raspbian-jessie.img2      131072 7684095 7553024  3.6G 83 Linux
</code></pre>

<p>The filesystem (.img2) starts at sector 131072, which equals 512 * 
131072 = 67108864 bytes. Use this as the          offset, ie. <code>mount -v -o offset=67108864 -t ext4 your-image-file.img /path/to/mnt/</code></p>

<ol>
<li><code>cd /path/to/mnt</code></li>
<li><code>sudo nano ./etc/ld.so.preload</code></li>
<li>Comment out every entry in it, <code>Ctrl-x</code> >> <code>Y</code> to save and exit</li>
<li><code>sudo nano ./etc/fstab</code></li>
<li>Comment out entries containing <code>/dev/mmcblk</code>, <code>Ctrl-x</code> >> <code>Y</code> to save and exit</li>
<li><code>cd ~</code></li>
<li><code>sudo umount /path/to/mnt</code></li>
</ol>

<p>Once done with these changes, you can emulate it on Qemu by:</p>

<blockquote>
<p><code>qemu-system-arm -kernel /path/to/kernel/kernel-name -cpu 
arm1176 -m 256 -M versatilepb -serial stdio -append "root=/dev/sda2 
rootfstype=ext4 rw" -hda /path/to/image/image-file-name.img</code></p>
</blockquote>

<p>Hope it helps.</p>


</body></html>
